<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
   "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<!-- THIS PAGE IS AUTOMATICALLY GENERATED.  DO NOT EDIT. -->
<!--User-specified headers:
Title: The Whole Python FAQ
Wide-page: yes
Meta: 
Banner: 
Banner-alt: Python
Author: webmaster@python.org
-->
<head>
<title>The Whole Python FAQ</title>
</head>
<body bgcolor="#FFFFFF" text="#000000" link="#0000BB" vlink="#551A8B"
alink="#FF0000">

<!--User part of page starts here-->


<h3>The whole Python FAQ</h3>
<p>
</p>
<hr>


<h3>1. General information and availability</h3>
<ul>
<li>
<a href="#1.1">1.1. What is Python?</a>
</li>
<li>
<a href="#1.2">1.2. Why is it called Python?</a>
</li>
<li>
<a href="#1.3">1.3. How do I obtain a copy of the Python source?</a>
</li>
<li>
<a href="#1.4">1.4. How do I get documentation on Python?</a>
</li>
<li>
<a href="#1.5">1.5. Are there other ftp sites that mirror the Python
distribution?</a>
</li>
<li>
<a href="#1.6">1.6. Is there a newsgroup or mailing list devoted to
Python?</a>
</li>
<li>
<a href="#1.7">1.7. Is there a WWW page devoted to Python?</a>
</li>
<li>
<a href="#1.8">1.8. Is the Python documentation available on the WWW?</a>
</li>
<li>
<a href="#1.9">1.9. Are there any books on Python?</a>
</li>
<li>
<a href="#1.10">1.10. Are there any published articles about Python that I can
reference?</a>
</li>
<li>
<a href="#1.11">1.11. Are there short introductory papers or talks on
Python?</a>
</li>
<li>
<a href="#1.12">1.12. How does the Python version numbering scheme work?</a>
</li>
<li>
<a href="#1.13">1.13. How do I get a beta test version of Python?</a>
</li>
<li>
<a href="#1.14">1.14. Are there copyright restrictions on the use of
Python?</a>
</li>
<li>
<a href="#1.15">1.15. Why was Python created in the first place?</a>
</li>
<li>
<a href="#1.16">1.16. Do I have to like "Monty Python's Flying Circus"?</a>
</li>
<li>
<a href="#1.17">1.17. What is Python good for?</a>
</li>
<li>
<a href="#1.18">1.18. Can I use the FAQ Wizard software to maintain my own
FAQ?</a>
</li>
<li>
<a href="#1.19">1.19. Which editor has good support for editing Python source
code?</a>
</li>
</ul>
<p>
</p>
<hr>


<h3>2. Python in the real world</h3>
<ul>
<li>
<a href="#2.1">2.1. How many people are using Python?</a>
</li>
<li>
<a href="#2.2">2.2. Have any significant projects been done in Python?</a>
</li>
<li>
<a href="#2.3">2.3. Are there any commercial projects going on using
Python?</a>
</li>
<li>
<a href="#2.4">2.4. How stable is Python?</a>
</li>
<li>
<a href="#2.5">2.5. What new developments are expected for Python in the
future?</a>
</li>
<li>
<a href="#2.6">2.6. Is it reasonable to propose incompatible changes to
Python?</a>
</li>
<li>
<a href="#2.7">2.7. What is the future of Python?</a>
</li>
<li>
<a href="#2.8">2.8. What is the PSA, anyway?</a>
</li>
<li>
<a href="#2.9">2.9. How do I join the PSA?</a>
</li>
<li>
<a href="#2.10">2.10. What are the benefits of joining the PSA?</a>
</li>
<li>
<a href="#2.11">2.11. Is Python Y2K (Year 2000) Compliant?</a>
</li>
</ul>
<p>
</p>
<hr>


<h3>3. Building Python and Other Known Bugs</h3>
<ul>
<li>
<a href="#3.1">3.1. Is there a test set?</a>
</li>
<li>
<a href="#3.2">3.2. When running the test set, I get complaints about floating
point operations, but when playing with floating point operations I cannot
find anything wrong with them.</a>
</li>
<li>
<a href="#3.3">3.3. Link errors after rerunning the configure script.</a>
</li>
<li>
<a href="#3.4">3.4. The python interpreter complains about options passed to a
script (after the script name).</a>
</li>
<li>
<a href="#3.5">3.5. When building on the SGI, make tries to run python to
create glmodule.c, but python hasn't been built or installed yet.</a>
</li>
<li>
<a href="#3.6">3.6. I use VPATH but some targets are built in the source
directory.</a>
</li>
<li>
<a href="#3.7">3.7. Trouble building or linking with the GNU readline
library.</a>
</li>
<li>
<a href="#3.8">3.8. Trouble with socket I/O on older Linux 1.x versions.</a>
</li>
<li>
<a href="#3.9">3.9. Trouble with prototypes on Ultrix.</a>
</li>
<li>
<a href="#3.10">3.10. Other trouble building Python on platform X.</a>
</li>
<li>
<a href="#3.11">3.11. How to configure dynamic loading on Linux.</a>
</li>
<li>
<a href="#3.12">3.12. I can't get shared modules to work on Linux 2.0
(Slackware96)?</a>
</li>
<li>
<a href="#3.13">3.13. Trouble when making modules shared on Linux.</a>
</li>
<li>
<a href="#3.14">3.14. How to use threads on Linux.</a>
</li>
<li>
<a href="#3.15">3.15. Errors when linking with a shared library containing C++
code.</a>
</li>
<li>
<a href="#3.16">3.16. I built with tkintermodule.c enabled but get 'Tkinter
not found'</a>
</li>
<li>
<a href="#3.17">3.17. I built with Tk 4.0 but Tkinter complains about the Tk
version.</a>
</li>
<li>
<a href="#3.18">3.18. Compilation or link errors for the _tkinter module</a>
</li>
<li>
<a href="#3.19">3.19. I configured and built Python for Tcl/Tk but "import
Tkinter" fails.</a>
</li>
<li>
<a href="#3.20">3.20. Tk doesn't work right on DEC Alpha.</a>
</li>
<li>
<a href="#3.21">3.21. Several common system calls are missing from the posix
module.</a>
</li>
<li>
<a href="#3.22">3.22. ImportError: No module named string, on MS Windows.</a>
</li>
<li>
<a href="#3.23">3.23. Core dump on SGI when using the gl module.</a>
</li>
<li>
<a href="#3.24">3.24. "Initializer not a constant" while building DLL on
MS-Windows</a>
</li>
<li>
<a href="#3.25">3.25. Output directed to a pipe or file disappears on
Linux.</a>
</li>
<li>
<a href="#3.26">3.26. Syntax Errors all over the place in Linux with libc
5.4</a>
</li>
<li>
<a href="#3.27">3.27. Crash in XIO on Linux when using Tkinter.</a>
</li>
<li>
<a href="#3.28">3.28. How can I test if Tkinter is working?</a>
</li>
<li>
<a href="#3.29">3.29. Is there a way to get the interactive mode of the python
interpreter to perform function/variable name completion?</a>
</li>
<li>
<a href="#3.30">3.30. Why is the Python interpreter not built as a shared
library?</a>
</li>
<li>
<a href="#3.31">3.31. Build with GCC on Solaris 2.6 (SunOS 5.6) fails</a>
</li>
</ul>
<p>
</p>
<hr>


<h3>4. Programming in Python</h3>
<ul>
<li>
<a href="#4.1">4.1. Is there a source code level debugger with breakpoints,
step, etc.?</a>
</li>
<li>
<a href="#4.2">4.2. Can I create an object class with some methods implemented
in C and others in Python (e.g. through inheritance)? (Also phrased as: Can I
use a built-in type as base class?)</a>
</li>
<li>
<a href="#4.3">4.3. Is there a curses/termcap package for Python?</a>
</li>
<li>
<a href="#4.4">4.4. Is there an equivalent to C's onexit() in Python?</a>
</li>
<li>
<a href="#4.5">4.5. When I define a function nested inside another function,
the nested function seemingly can't access the local variables of the outer
function. What is going on? How do I pass local data to a nested function?</a>
</li>
<li>
<a href="#4.6">4.6. How do I iterate over a sequence in reverse order?</a>
</li>
<li>
<a href="#4.7">4.7. My program is too slow. How do I speed it up?</a>
</li>
<li>
<a href="#4.8">4.8. When I have imported a module, then edit it, and import it
again (into the same Python process), the changes don't seem to take place.
What is going on?</a>
</li>
<li>
<a href="#4.9">4.9. How do I find the current module name?</a>
</li>
<li>
<a href="#4.10">4.10. I have a module in which I want to execute some extra
code when it is run as a script. How do I find out whether I am running as a
script?</a>
</li>
<li>
<a href="#4.11">4.11. I try to run a program from the Demo directory but it
fails with ImportError: No module named ...; what gives?</a>
</li>
<li>
<a href="#4.12">4.12. I have successfully built Python with STDWIN but it
can't find some modules (e.g. stdwinevents).</a>
</li>
<li>
<a href="#4.13">4.13. What GUI toolkits exist for Python?</a>
</li>
<li>
<a href="#4.14">4.14. Are there any interfaces to database packages in
Python?</a>
</li>
<li>
<a href="#4.15">4.15. Is it possible to write obfuscated one-liners in
Python?</a>
</li>
<li>
<a href="#4.16">4.16. Is there an equivalent of C's "?:" ternary operator?</a>
</li>
<li>
<a href="#4.17">4.17. My class defines __del__ but it is not called when I
delete the object.</a>
</li>
<li>
<a href="#4.18">4.18. How do I change the shell environment for programs
called using os.popen() or os.system()? Changing os.environ doesn't work.</a>
</li>
<li>
<a href="#4.19">4.19. What is a class?</a>
</li>
<li>
<a href="#4.20">4.20. What is a method?</a>
</li>
<li>
<a href="#4.21">4.21. What is self?</a>
</li>
<li>
<a href="#4.22">4.22. What is an unbound method?</a>
</li>
<li>
<a href="#4.23">4.23. How do I call a method defined in a base class from a
derived class that overrides it?</a>
</li>
<li>
<a href="#4.24">4.24. How do I call a method from a base class without using
the name of the base class?</a>
</li>
<li>
<a href="#4.25">4.25. How can I organize my code to make it easier to change
the base class?</a>
</li>
<li>
<a href="#4.26">4.26. How can I find the methods or attributes of an
object?</a>
</li>
<li>
<a href="#4.27">4.27. I can't seem to use os.read() on a pipe created with
os.popen().</a>
</li>
<li>
<a href="#4.28">4.28. How can I create a stand-alone binary from a Python
script?</a>
</li>
<li>
<a href="#4.29">4.29. What WWW tools are there for Python?</a>
</li>
<li>
<a href="#4.30">4.30. How do I run a subprocess with pipes connected to both
input and output?</a>
</li>
<li>
<a href="#4.31">4.31. How do I call a function if I have the arguments in a
tuple?</a>
</li>
<li>
<a href="#4.32">4.32. How do I enable font-lock-mode for Python in Emacs?</a>
</li>
<li>
<a href="#4.33">4.33. Is there a scanf() or sscanf() equivalent?</a>
</li>
<li>
<a href="#4.34">4.34. Can I have Tk events handled while waiting for I/O?</a>
</li>
<li>
<a href="#4.35">4.35. How do I write a function with output parameters (call
by reference)?</a>
</li>
<li>
<a href="#4.36">4.36. Please explain the rules for local and global variables
in Python.</a>
</li>
<li>
<a href="#4.37">4.37. How can I have modules that mutually import each
other?</a>
</li>
<li>
<a href="#4.38">4.38. How do I copy an object in Python?</a>
</li>
<li>
<a href="#4.39">4.39. How to implement persistent objects in Python?
(Persistent == automatically saved to and restored from disk.)</a>
</li>
<li>
<a href="#4.40">4.40. I try to use __spam and I get an error about
_SomeClassName__spam.</a>
</li>
<li>
<a href="#4.41">4.41. How do I delete a file? And other file questions.</a>
</li>
<li>
<a href="#4.42">4.42. How to modify urllib or httplib to support HTTP/1.1?</a>
</li>
<li>
<a href="#4.43">4.43. Unexplicable syntax errors in compile() or exec.</a>
</li>
<li>
<a href="#4.44">4.44. How do I convert a string to a number?</a>
</li>
<li>
<a href="#4.45">4.45. How do I convert a number to a string?</a>
</li>
<li>
<a href="#4.46">4.46. How do I copy a file?</a>
</li>
<li>
<a href="#4.47">4.47. How do I check if an object is an instance of a given
class or of a subclass of it?</a>
</li>
<li>
<a href="#4.48">4.48. What is delegation?</a>
</li>
<li>
<a href="#4.49">4.49. How do I test a Python program or component.</a>
</li>
<li>
<a href="#4.50">4.50. My multidimensional list (array) is broken! What
gives?</a>
</li>
<li>
<a href="#4.51">4.51. I want to do a complicated sort: can you do a
Schwartzian Transform in Python?</a>
</li>
<li>
<a href="#4.52">4.52. How to convert between tuples and lists?</a>
</li>
<li>
<a href="#4.53">4.53. Files retrieved with urllib contain leading garbage that
looks like email headers.</a>
</li>
<li>
<a href="#4.54">4.54. How do I get a list of all instances of a given
class?</a>
</li>
<li>
<a href="#4.55">4.55. A regular expression fails with regex.error: match
failure.</a>
</li>
<li>
<a href="#4.56">4.56. I can't get signal handlers to work.</a>
</li>
<li>
<a href="#4.57">4.57. I can't use a global variable in a function? Help!</a>
</li>
<li>
<a href="#4.58">4.58. What's a negative index? Why doesn't list.insert() use
them?</a>
</li>
<li>
<a href="#4.59">4.59. How can I sort one list by values from another list?</a>
</li>
<li>
<a href="#4.60">4.60. Why doesn't dir() work on builtin types like files and
lists?</a>
</li>
<li>
<a href="#4.61">4.61. How can I mimic CGI form submission (METHOD=POST)?</a>
</li>
<li>
<a href="#4.62">4.62. If my program crashes with a bsddb (or anydbm) database
open, it gets corrupted. How come?</a>
</li>
<li>
<a href="#4.63">4.63. How do I make a Python script executable on Unix?</a>
</li>
<li>
<a href="#4.64">4.64. How do you remove duplicates from a list?</a>
</li>
<li>
<a href="#4.65">4.65. Are there any known year 2000 problems in Python?</a>
</li>
<li>
<a href="#4.66">4.66. I want a version of map that applies a method to a
sequence of objects! Help!</a>
</li>
<li>
<a href="#4.67">4.67. How do I generate random numbers in Python?</a>
</li>
<li>
<a href="#4.68">4.68. How do I access the serial (RS232) port?</a>
</li>
<li>
<a href="#4.69">4.69. Images on Tk-Buttons don't work in Py15?</a>
</li>
<li>
<a href="#4.70">4.70. Where is the math.py (socket.py, regex.py, etc.) source
file?</a>
</li>
<li>
<a href="#4.71">4.71. How do I send mail from a Python script?</a>
</li>
<li>
<a href="#4.72">4.72. How do I avoid blocking in connect() of a socket?</a>
</li>
<li>
<a href="#4.73">4.73. How do I specify hexadecimal and octal integers?</a>
</li>
<li>
<a href="#4.74">4.74. How to get a single keypress at a time?</a>
</li>
<li>
<a href="#4.75">4.75. How can I overload constructors (or methods) in
Python?</a>
</li>
<li>
<a href="#4.76">4.76. How do I pass keyword arguments from one method to
another?</a>
</li>
<li>
<a href="#4.77">4.77. What module should I use to help with generating
HTML?</a>
</li>
<li>
<a href="#4.78">4.78. How do I create documentation from doc strings?</a>
</li>
<li>
<a href="#4.79">4.79. How do I read (or write) binary data?</a>
</li>
<li>
<a href="#4.80">4.80. I can't get key bindings to work in Tkinter</a>
</li>
<li>
<a href="#4.81">4.81. "import crypt" fails</a>
</li>
<li>
<a href="#4.82">4.82. Are there coding standards or a style guide for Python
programs?</a>
</li>
<li>
<a href="#4.83">4.83. How do I freeze Tkinter applications?</a>
</li>
<li>
<a href="#4.84">4.84. How do I create static class data and static class
methods?</a>
</li>
<li>
<a href="#4.85">4.85. __import__('x.y.z') returns &lt;module 'x'>; how do I
get z?</a>
</li>
<li>
<a href="#4.86">4.86. Basic thread wisdom</a>
</li>
</ul>
<p>
</p>
<hr>


<h3>5. Extending Python</h3>
<ul>
<li>
<a href="#5.1">5.1. Can I create my own functions in C?</a>
</li>
<li>
<a href="#5.2">5.2. Can I create my own functions in C++?</a>
</li>
<li>
<a href="#5.3">5.3. How can I execute arbitrary Python statements from C?</a>
</li>
<li>
<a href="#5.4">5.4. How can I evaluate an arbitrary Python expression from
C?</a>
</li>
<li>
<a href="#5.5">5.5. How do I extract C values from a Python object?</a>
</li>
<li>
<a href="#5.6">5.6. How do I use Py_BuildValue() to create a tuple of
arbitrary length?</a>
</li>
<li>
<a href="#5.7">5.7. How do I call an object's method from C?</a>
</li>
<li>
<a href="#5.8">5.8. How do I catch the output from PyErr_Print() (or anything
that prints to stdout/stderr)?</a>
</li>
<li>
<a href="#5.9">5.9. How do I access a module written in Python from C?</a>
</li>
<li>
<a href="#5.10">5.10. How do I interface to C++ objects from Python?</a>
</li>
<li>
<a href="#5.11">5.11. mSQLmodule (or other old module) won't build with Python
1.5 (or later)</a>
</li>
<li>
<a href="#5.12">5.12. I added a module using the Setup file and the make
fails! Huh?</a>
</li>
<li>
<a href="#5.13">5.13. I want to compile a Python module on my Red Hat Linux
system, but some files are missing.</a>
</li>
</ul>
<p>
</p>
<hr>


<h3>6. Python's design</h3>
<ul>
<li>
<a href="#6.1">6.1. Why isn't there a switch or case statement in Python?</a>
</li>
<li>
<a href="#6.2">6.2. Why does Python use indentation for grouping of
statements?</a>
</li>
<li>
<a href="#6.3">6.3. Why are Python strings immutable?</a>
</li>
<li>
<a href="#6.4">6.4. Why don't strings have methods like index() or sort(),
like lists?</a>
</li>
<li>
<a href="#6.5">6.5. Why does Python use methods for some functionality (e.g.
list.index()) but functions for other (e.g. len(list))?</a>
</li>
<li>
<a href="#6.6">6.6. Why can't I derive a class from built-in types (e.g. lists
or files)?</a>
</li>
<li>
<a href="#6.7">6.7. Why must 'self' be declared and used explicitly in method
definitions and calls?</a>
</li>
<li>
<a href="#6.8">6.8. Can't you emulate threads in the interpreter instead of
relying on an OS-specific thread implementation?</a>
</li>
<li>
<a href="#6.9">6.9. Why can't lambda forms contain statements?</a>
</li>
<li>
<a href="#6.10">6.10. Why don't lambdas have access to variables defined in
the containing scope?</a>
</li>
<li>
<a href="#6.11">6.11. Why can't recursive functions be defined inside other
functions?</a>
</li>
<li>
<a href="#6.12">6.12. Why is there no more efficient way of iterating over a
dictionary than first constructing the list of keys()?</a>
</li>
<li>
<a href="#6.13">6.13. Can Python be compiled to machine code, C or some other
language?</a>
</li>
<li>
<a href="#6.14">6.14. How does Python manage memory? Why not full garbage
collection?</a>
</li>
<li>
<a href="#6.15">6.15. Why are there separate tuple and list data types?</a>
</li>
<li>
<a href="#6.16">6.16. How are lists implemented?</a>
</li>
<li>
<a href="#6.17">6.17. How are dictionaries implemented?</a>
</li>
<li>
<a href="#6.18">6.18. Why must dictionary keys be immutable?</a>
</li>
<li>
<a href="#6.19">6.19. How the heck do you make an array in Python?</a>
</li>
<li>
<a href="#6.20">6.20. Why doesn't list.sort() return the sorted list?</a>
</li>
<li>
<a href="#6.21">6.21. How do you specify and enforce an interface spec in
Python?</a>
</li>
<li>
<a href="#6.22">6.22. Why do all classes have the same type? Why do instances
all have the same type?</a>
</li>
<li>
<a href="#6.23">6.23. Why isn't all memory freed when Python exits?</a>
</li>
<li>
<a href="#6.24">6.24. Why no class methods or mutable class variables?</a>
</li>
<li>
<a href="#6.25">6.25. Why are default values sometimes shared between
objects?</a>
</li>
<li>
<a href="#6.26">6.26. Why no goto?</a>
</li>
<li>
<a href="#6.27">6.27. How do you make a higher order function in Python?</a>
</li>
<li>
<a href="#6.28">6.28. Why do I get a SyntaxError for a 'continue' inside a
'try'?</a>
</li>
<li>
<a href="#6.29">6.29. Why can't raw strings (r-strings) end with a
backslash?</a>
</li>
</ul>
<p>
</p>
<hr>


<h3>7. Using Python on non-UNIX platforms</h3>
<ul>
<li>
<a href="#7.1">7.1. Is there a Mac version of Python?</a>
</li>
<li>
<a href="#7.2">7.2. Are there DOS and Windows versions of Python?</a>
</li>
<li>
<a href="#7.3">7.3. Is there an OS/2 version of Python?</a>
</li>
<li>
<a href="#7.4">7.4. Is there a VMS version of Python?</a>
</li>
<li>
<a href="#7.5">7.5. What about IBM mainframes, or other non-UNIX
platforms?</a>
</li>
<li>
<a href="#7.6">7.6. Where are the source or Makefiles for the non-UNIX
versions?</a>
</li>
<li>
<a href="#7.7">7.7. What is the status and support for the non-UNIX
versions?</a>
</li>
<li>
<a href="#7.8">7.8. I have a PC version but it appears to be only a binary.
Where's the library?</a>
</li>
<li>
<a href="#7.9">7.9. Where's the documentation for the Mac or PC version?</a>
</li>
<li>
<a href="#7.10">7.10. How do I create a Python program file on the Mac or
PC?</a>
</li>
<li>
<a href="#7.11">7.11. How can I use Tkinter on Windows 95/NT?</a>
</li>
<li>
<a href="#7.12">7.12. cgi.py (or other CGI programming) doesn't work sometimes
on NT or win95!</a>
</li>
<li>
<a href="#7.13">7.13. Why doesn't os.popen() work in PythonWin on NT?</a>
</li>
<li>
<a href="#7.14">7.14. How do I use different functionality on different
platforms with the same program?</a>
</li>
<li>
<a href="#7.15">7.15. Is there an Amiga version of Python?</a>
</li>
</ul>
<p>
</p>
<hr>


<h3>8. Python on Windows</h3>
<ul>
<li>
<a href="#8.1">8.1. Using Python for CGI on Microsoft Windows</a>
</li>
<li>
<a href="#8.2">8.2. How to check for a keypress without blocking?</a>
</li>
<li>
<a href="#8.3">8.3. $PYTHONPATH</a>
</li>
<li>
<a href="#8.4">8.4. dedent syntax errors</a>
</li>
<li>
<a href="#8.5">8.5. How do I emulate os.kill() in Windows?</a>
</li>
<li>
<a href="#8.6">8.6. Why does os.path.isdir() fail on NT shared
directories?</a>
</li>
<li>
<a href="#8.7">8.7. PyRun_SimpleFile() crashes on Windows but not on Unix</a>
</li>
<li>
<a href="#8.8">8.8. Import of _tkinter fails on Windows 95/98</a>
</li>
<li>
<a href="#8.9">8.9. Can't extract the downloaded documentation on Windows</a>
</li>
<li>
<a href="#8.10">8.10. Can't get Py_RunSimpleFile() to work.</a>
</li>
<li>
<a href="#8.11">8.11. Where is Freeze for Windows?</a>
</li>
</ul>
<hr>


<h3>1. General information and availability</h3>
<hr>


<h3><a name="1.1">1.1. What is Python?</a></h3>

Python is an interpreted, interactive, object-oriented programming language. 
It incorporates modules, exceptions, dynamic typing, very high level dynamic
data types, and classes.  Python combines remarkable power with very clear
syntax.  It has interfaces to many system calls and libraries, as well as to
various window systems, and is extensible in C or C++.  It is also usable as
an extension language for applications that need a programmable interface. 
Finally, Python is portable: it runs on many brands of UNIX, on the Mac, and
on PCs under MS-DOS, Windows, Windows NT, and OS/2.
<p>
To find out more, the best thing to do is to start reading the tutorial from
the documentation set (see a few questions further down).</p>
<p>
See also question 1.17 (what is Python good for).</p>
<p>
</p>
<hr>


<h3><a name="1.2">1.2. Why is it called Python?</a></h3>

Apart from being a computer scientist, I'm also a fan of "Monty Python's
Flying Circus" (a BBC comedy series from the seventies, in the -- unlikely --
case you didn't know).  It occurred to me one day that I needed a name that
was short, unique, and slightly mysterious. And I happened to be reading some
scripts from the series at the time...  So then I decided to call my language
Python.  But Python is not a joke.  And don't you associate it with dangerous
reptiles either!  (If you need an icon, use an image of the 16-ton weight from
the TV series or of a can of SPAM :-)
<p>
</p>
<hr>


<h3><a name="1.3">1.3. How do I obtain a copy of the Python source?</a></h3>

The latest complete Python source distribution is always available by
anonymous ftp, e.g. <a
href="ftp://ftp.python.org/pub/python/src/python1.4.tar.gz">ftp://ftp.python.org/pub/python/src/python1.4.tar.gz</a>.
 It is a gzipped tar file containing the complete C source, LaTeX
documentation, Python library modules, example programs, and several useful
pieces of freely distributable software.  This will compile and run out of the
box on most UNIX platforms.  (See section 7 for non-UNIX information.)
<p>
An index of said ftp directory can be found in the file INDEX.  An HTML
version of the index can be found in the file index.html, <a
href="ftp://ftp.python.org/pub/python/index.html">ftp://ftp.python.org/pub/python/index.html</a>.</p>
<p>
</p>
<hr>


<h3><a name="1.4">1.4. How do I get documentation on Python?</a></h3>

All documentation is available on-line, starting at <a
href="http://www.python.org/doc">http://www.python.org/doc</a>/.
<p>
The LaTeX source for the documentation is part of the source distribution.  If
you don't have LaTeX, the latest Python documentation set is available, in
various formats like postscript and html, by anonymous ftp - visit the above
URL for links to the current versions.</p>
<p>
PostScript for a high-level description of Python is in the file
nluug-paper.ps (a separate file on the ftp site).</p>
<p>
</p>
<hr>


<h3><a name="1.5">1.5. Are there other ftp sites that mirror the Python
distribution?</a></h3>

The following anonymous ftp sites keep mirrors of the Python distribution:
<p>
USA:</p>
<p>
</p>
<pre>        <a href="ftp://ftp.python.org/pub/python">ftp://ftp.python.org/pub/python</a>/
        <a href="ftp://gatekeeper.dec.com/pub/plan/python">ftp://gatekeeper.dec.com/pub/plan/python</a>/
        <a href="ftp://ftp.uu.net/languages/python">ftp://ftp.uu.net/languages/python</a>/
        <a href="ftp://ftp.wustl.edu/graphics/graphics/sgi-stuff/python">ftp://ftp.wustl.edu/graphics/graphics/sgi-stuff/python</a>/
        <a href="ftp://ftp.sterling.com/programming/languages/python">ftp://ftp.sterling.com/programming/languages/python</a>/
        <a href="ftp://uiarchive.cso.uiuc.edu/pub/lang/python">ftp://uiarchive.cso.uiuc.edu/pub/lang/python</a>/
        <a href="ftp://ftp.pht.com/mirrors/python/python">ftp://ftp.pht.com/mirrors/python/python</a>/
        <a href="ftp://ftp.cdrom.com/pub/python">ftp://ftp.cdrom.com/pub/python</a>/</pre>

Europe:
<p>
</p>
<pre>        <a href="ftp://ftp.cwi.nl/pub/python">ftp://ftp.cwi.nl/pub/python</a>/
        <a href="ftp://ftp.funet.fi/pub/languages/python">ftp://ftp.funet.fi/pub/languages/python</a>/
        <a href="ftp://ftp.sunet.se/pub/lang/python">ftp://ftp.sunet.se/pub/lang/python</a>/
        <a href="ftp://unix.hensa.ac.uk/mirrors/uunet/languages/python">ftp://unix.hensa.ac.uk/mirrors/uunet/languages/python</a>/
        <a href="ftp://ftp.ibp.fr/pub/python">ftp://ftp.ibp.fr/pub/python</a>/
        <a href="ftp://sunsite.cnlab-switch.ch/mirror/python">ftp://sunsite.cnlab-switch.ch/mirror/python</a>/
        <a href="ftp://ftp.informatik.tu-muenchen.de/pub/comp/programming/languages/python">ftp://ftp.informatik.tu-muenchen.de/pub/comp/programming/languages/python</a>/</pre>

Australia:
<p>
</p>
<pre>        <a href="ftp://ftp.dstc.edu.au/pub/python">ftp://ftp.dstc.edu.au/pub/python</a>/</pre>
<p>
</p>
<hr>


<h3><a name="1.6">1.6. Is there a newsgroup or mailing list devoted to
Python?</a></h3>

There is a newsgroup, comp.lang.python, and a mailing list.  The newsgroup and
mailing list are gatewayed into each other -- if you can read news it's
unnecessary to subscribe to the mailing list.  Send e-mail to <a
href="mailto:python-list-request@cwi.nl">python-list-request@cwi.nl</a> to
(un)subscribe to the mailing list (a person reads this, don't use majordomo or
listserv commands).
<p>
More info about the newsgroup and mailing list, and about other lists, can be
found at <a
href="http://www.python.org/psa/MailingLists.html">http://www.python.org/psa/MailingLists.html</a>.</p>
<p>
Recent archives of the newsgroup are kept by Deja News and accessible through
the "locator" web page, <a
href="http://www.python.org/locator">http://www.python.org/locator</a>/. This
page also contains pointer to older archival collections.</p>
<p>
</p>
<hr>


<h3><a name="1.7">1.7. Is there a WWW page devoted to Python?</a></h3>

Yes, <a href="http://www.python.org">http://www.python.org</a>/ is the
official Python home page.
<p>
</p>
<hr>


<h3><a name="1.8">1.8. Is the Python documentation available on the
WWW?</a></h3>

Yes, see <a href="http://www.python.org">http://www.python.org</a>/ (Python's
home page).  It contains pointers to hypertext versions of the whole
documentation set (as hypertext, not just PostScript).
<p>
If you wish to browse this collection of HTML files on your own machine, it is
available bundled up by anonymous ftp, e.g. <a
href="ftp://ftp.python.org/pub/python/doc/html.tar.gz">ftp://ftp.python.org/pub/python/doc/html.tar.gz</a>.</p>
<p>
An Emacs-INFO set containing the library manual is also available by ftp, e.g.
<a
href="ftp://ftp.python.org/pub/python/doc/lib-info.tar.gz">ftp://ftp.python.org/pub/python/doc/lib-info.tar.gz</a>.</p>
<p>
</p>
<hr>


<h3><a name="1.9">1.9. Are there any books on Python?</a></h3>

Yes, several:
<p>
</p>
<pre>      + Internet Programming with Python 
        by Aaron Watters, Guido van Rossum, and James Ahlstrom
        MIS Press/Henry Holt publishers
        ISBN: 1-55851-484-8
        First published October, 1996</pre>
<pre>      + Programming Python 
        by Mark Lutz
        O'Reilly &amp; Associates
        ISBN: 1-56592-197-6
        First published October, 1996</pre>
<pre>      + Das Python-Buch (in German)
        by Martin von Loewis and Nils Fischbeck
        Addison-Wesley-Longman, 1997
        ISBN: 3-8273-1110-1</pre>

More are coming:
<p>
</p>
<pre>      + Python Pocket Reference
        by Mark Lutz
        O'Reilly &amp; Associates
        ISBN 1-56592-500-9
        1st Edition October 1998 (est.)
        80 pages (est.), $6.95 (est.)</pre>
<p>
</p>
<hr>


<h3><a name="1.10">1.10. Are there any published articles about Python that I
can reference?</a></h3>

If you can't reference the web site, and you don't want to reference the books
(see previous question), there are several articles on Python that you could
reference.
<p>
Most publications about Python are collected on the Python web site:</p>
<p>
</p>
<pre>    <a href="http://www.python.org/doc/publications.html">http://www.python.org/doc/Publications.html</a></pre>

It is no longer recommended to reference this very old article by Python's
author:
<p>
</p>
<pre>    Guido van Rossum and Jelke de Boer, "Interactively Testing Remote
    Servers Using the Python Programming Language", CWI Quarterly, Volume
    4, Issue 4 (December 1991), Amsterdam, pp 283-303.</pre>
<p>
</p>
<hr>


<h3><a name="1.11">1.11. Are there short introductory papers or talks on
Python?</a></h3>

There are several - you can find links to some of them collected at <a
href="http://www.python.org/doc/Hints.html#intros">http://www.python.org/doc/Hints.html#intros</a>.
<p>
</p>
<hr>


<h3><a name="1.12">1.12. How does the Python version numbering scheme
work?</a></h3>

Python versions are numbered A.B.C or A.B.  A is the major version number --
it is only incremented for major changes in functionality or source structure.
 B is the minor version number, incremented for less earth-shattering changes
to a release.  C is the patchlevel -- it is incremented for each new patch
release.  Not all releases have patch releases.  Note that in the past,
patches have added significant changes; in fact the changeover from 0.9.9 to
1.0.0 was the first time that either A or B changed!
<p>
Beta versions have an additional suffix of "betaN" for some small number N. 
Note that (for instance) all versions labeled 1.4betaN <i>precede</i> the
actual release of 1.4.  1.4b3 is short for 1.4beta3.</p>
<p>
</p>
<hr>


<h3><a name="1.13">1.13. How do I get a beta test version of Python?</a></h3>

If there are any beta releases, they are published in the normal source
directory (e.g. <a
href="ftp://ftp.python.org/pub/python/src">ftp://ftp.python.org/pub/python/src</a>/).
<p>
Alpha releases are only open to PSA members. See <a
href="http://www.python.org/psa">http://www.python.org/psa</a>/ for
information on how to join ($50/year).</p>
<p>
</p>
<hr>


<h3><a name="1.14">1.14. Are there copyright restrictions on the use of
Python?</a></h3>

Hardly.  You can do anything you want with the source, as long as you leave
the copyrights in, and display those copyrights in any documentation about
Python that you produce.  Also, don't use the author's institute's name in
publicity without prior written permission, and don't hold them responsible
for anything (read the actual copyright for a precise legal wording).
<p>
In particular, if you honor the copyright rules, it's OK to use Python for
commercial use, to sell copies of Python in source or binary form, or to sell
products that enhance Python or incorporate Python (or part of it) in some
form.  I would still like to know about all commercial use of Python!</p>
<p>
</p>
<hr>


<h3><a name="1.15">1.15. Why was Python created in the first place?</a></h3>

Here's a <i>very</i> brief summary of what got me started:
<p>
I had extensive experience with implementing an interpreted language in the
ABC group at CWI, and from working with this group I had learned a lot about
language design.  This is the origin of many Python features, including the
use of indentation for statement grouping and the inclusion of very-high-level
data types (although the details are all different in Python).</p>
<p>
I had a number of gripes about the ABC language, but also liked many of its
features.  It was impossible to extend the ABC language (or its
implementation) to remedy my complaints -- in fact its lack of extensibility
was one of its biggest problems. I had some experience with using Modula-2+
and talked with the designers of Modula-3 (and read the M3 report).  M3 is the
origin of the syntax and semantics used for exceptions, and some other Python
features.</p>
<p>
I was working in the Amoeba distributed operating system group at CWI.  We
needed a better way to do system administration than by writing either C
programs or Bourne shell scripts, since Amoeba had its own system call
interface which wasn't easily accessible from the Bourne shell.  My experience
with error handling in Amoeba made me acutely aware of the importance of
exceptions as a programming language feature.</p>
<p>
It occurred to me that a scripting language with a syntax like ABC but with
access to the Amoeba system calls would fill the need.  I realized that it
would be foolish to write an Amoeba-specific language, so I decided that I
needed a language that was generally extensible.</p>
<p>
During the 1989 Christmas holidays, I had a lot of time on my hand, so I
decided to give it a try.  During the next year, while still mostly working on
it in my own time, Python was used in the Amoeba project with increasing
success, and the feedback from colleagues made me add many early
improvements.</p>
<p>
In February 1991, after just over a year of development, I decided to post to
USENET.  The rest is in the Misc/HISTORY file.</p>
<p>
</p>
<hr>


<h3><a name="1.16">1.16. Do I have to like "Monty Python's Flying
Circus"?</a></h3>

No, but it helps.  Pythonistas like the occasional reference to SPAM, and of
course, nobody expects the Spanish Inquisition
<p>
The two main reasons to use Python are:</p>
<p>
</p>
<pre> - Portable
 - Easy to learn</pre>

The <i>three</i> main reasons to use Python are:
<p>
</p>
<pre> - Portable
 - Easy to learn
 - Powerful standard library</pre>

(And nice red uniforms.)
<p>
And remember, there is <i>no</i> rule six.</p>
<p>
</p>
<hr>


<h3><a name="1.17">1.17. What is Python good for?</a></h3>

Python is used in many situations where a great deal of dynamism, ease of use,
power, and flexibility are required.
<p>
In the area of basic text manipulation core Python (without any non-core
extensions) is easier to use and is roughly as fast as just  about any
language, and this makes Python good for many system administration type tasks
and for CGI programming and other application areas that manipulate text and
strings and such.</p>
<p>
When augmented with standard extensions (such as PIL, COM, Numeric, oracledb,
kjbuckets, tkinter, win32api, etc.) or special purpose extensions (that you
write, perhaps using helper tools such as SWIG, or using object protocols such
as ILU/CORBA or COM) Python becomes a very convenient "glue" or "steering"
language that helps make heterogeneous collections of unrelated software
packages work together. For example by combining Numeric with oracledb you can
help your SQL database do statistical analysis, or even Fourier transforms.
One of the features that makes Python excel in the "glue language" role is
Python's simple, usable, and powerful C language runtime API.</p>
<p>
Many developers also use Python extensively as a graphical user interface
development aide.</p>
<p>
</p>
<hr>


<h3><a name="1.18">1.18. Can I use the FAQ Wizard software to maintain my own
FAQ?</a></h3>

Sure.  Version 1.0 is distributed in the Tools subdirectory of the Python 1.5
source release at
<p>
</p>
<pre>  <a href="http://www.python.org/ftp/python/src/pyth151.tgz">http://www.python.org/ftp/python/src/pyth151.tgz</a></pre>
<p>
</p>
<hr>


<h3><a name="1.19">1.19. Which editor has good support for editing Python
source code?</a></h3>

On Unix, the first choice is Emacs/XEmacs.  There's an elaborate mode for
editing Python code, which is available from the Python source distribution
(Misc/python-mode.el).  It's also bundled with XEmacs (we're still working on
legal details to make it possible to bundle it with FSF Emacs).  And it has
its own web page:
<p>
</p>
<pre>    <a href="http://www.python.org/emacs/python-mode/index.html">http://www.python.org/emacs/python-mode/index.html</a></pre>

There are many other choices, for Unix, Windows or Macintosh. Richard Jones
compiled a table from postings on the Python newsgroup:
<p>
</p>
<pre>    <a href="http://www.bofh.asn.au/~richard/editors.html">http://www.bofh.asn.au/~richard/editors.html</a></pre>

See also FAQ question 7.10 for some more Mac and Win options.
<p>
</p>
<hr>


<h3>2. Python in the real world</h3>
<hr>


<h3><a name="2.1">2.1. How many people are using Python?</a></h3>

I don't know, but the maximum number of simultaneous subscriptions to the
Python mailing list before it was gatewayed into the newsgroup was about 180
(several of which were local redistribution lists).  I believe that many
active Python users don't bother to subscribe to the list, and now that
there's a newsgroup the mailing list subscription is even less meaningful.  I
see new names on the newsgroup all the time and my best guess is that there
are currently at least several thousands of users.
<p>
Another statistic is the number of accesses to the Python WWW server. Have a
look at <a
href="http://www.python.org/stats">http://www.python.org/stats</a>/.</p>
<p>
</p>
<hr>


<h3><a name="2.2">2.2. Have any significant projects been done in
Python?</a></h3>

At CWI (the former home of Python), we have written a 20,000 line authoring
environment for transportable hypermedia presentations, a 5,000 line
multimedia teleconferencing tool, as well as many many smaller programs.
<p>
At CNRI (Python's new home), we have written two large applications: Grail, a
fully featured web browser (see <a
href="http://grail.cnri.reston.va.us">http://grail.cnri.reston.va.us</a>), and
the Knowbot Operating Environment, a distributed environment for mobile
code.</p>
<p>
The University of Virginia uses Python to control a virtual reality engine. 
See <a href="http://alice.cs.cmu.edu">http://alice.cs.cmu.edu</a>.</p>
<p>
The ILU project at Xerox PARC can generate Python glue for ILU interfaces. 
See <a
href="ftp://ftp.parc.xerox.com/pub/ilu/ilu.html">ftp://ftp.parc.xerox.com/pub/ilu/ilu.html</a>.
 ILU is a free CORBA compliant ORB which supplies distributed object
connectivity to a host of platforms using a host of languages.</p>
<p>
Mark Hammond and Greg Stein and others are interfacing Python to Microsoft's
COM and ActiveX architectures.  This means, among other things, that Python
may be used in active server pages or as a COM controller (for example to
automatically extract from or insert information into Excel or MSAccess or any
other COM aware application). Mark claims Python can even be a ActiveX
scripting host (which means you could embed JScript inside a Python
application, if you had a strange sense of humor).  Python/AX/COM is
distributed as part of the PythonWin distribution.</p>
<p>
The University of California, Irvine uses a student administration system
called TELE-Vision written entirely in Python.  Contact: Ray Price <a
href="mailto:rlprice@uci.edu">rlprice@uci.edu</a>.</p>
<p>
The Melbourne Cricket Ground (MCG) in Australia (a 100,000+ person venue) has
it's scoreboard system written largely in Python on MS Windows. Python
expressions are used to create almost every scoring entry that appears on the
board.  The move to Python/C++ away from exclusive C++ has provided a level of
functionality that would simply not have been viable otherwise.</p>
<p>
See also the next question.</p>
<p>
If you have done a significant project in Python that you'd like to be
included in the list above, send me email!</p>
<p>
</p>
<hr>


<h3><a name="2.3">2.3. Are there any commercial projects going on using
Python?</a></h3>

Yes, there's lots of commercial activity using Python.  See <a
href="http://www.python.org/psa/Users.html">http://www.python.org/psa/Users.html</a>
for a list.
<p>
</p>
<hr>


<h3><a name="2.4">2.4. How stable is Python?</a></h3>

Very stable.  While the current version number would suggest it is in the
early stages of development, in fact new, stable releases (numbered 0.9.x
through 1.4) have been coming out roughly every 3 to 6 or 12 months for the
past four years.
<p>
</p>
<hr>


<h3><a name="2.5">2.5. What new developments are expected for Python in the
future?</a></h3>

Follow the newsgroup discussions!  The workshop proceedings (<a
href="http://www.python.org/workshops">http://www.python.org/workshops</a>/)
may also contain interesting looks into the future.
<p>
</p>
<hr>


<h3><a name="2.6">2.6. Is it reasonable to propose incompatible changes to
Python?</a></h3>

In general, no.  There are already millions of lines of Python code around the
world, so any changes in the language that invalidates more than a very small
fraction of existing programs has to be frowned upon.  Even if you can provide
a conversion program, there still is the problem of updating all
documentation.  Providing a gradual upgrade path is the only way if a feature
has to be changed.
<p>
</p>
<hr>


<h3><a name="2.7">2.7. What is the future of Python?</a></h3>

If I knew, I'd be rich :-)
<p>
Seriously, the formation of the PSA (Python Software Activity, see <a
href="http://www.python.org/psa">http://www.python.org/psa</a>/) ensures some
kind of support even in the (unlikely!) event that I'd be hit by a bus
(actually, here in the U.S., a car accident would be more likely :-), were to
join a nunnery, or would be head-hunted.  A large number of Python users have
become experts at Python programming as well as maintenance of the
implementation, and would easily fill the vacuum created by my
disappearance.</p>
<p>
In the meantime, I have no plans to disappear -- rather, I am committed to
improving Python, and my current benefactor, CNRI (see <a
href="http://www.cnri.reston.va.us">http://www.cnri.reston.va.us</a>) is just
as committed to continue its support of Python and the PSA.  In fact, we have
great plans for Python -- we just can't tell yet!</p>
<p>
</p>
<hr>


<h3><a name="2.8">2.8. What is the PSA, anyway?</a></h3>

The Python Software Activity <a
href="http://www.python.org/psa">http://www.python.org/psa</a>/ was created by
a number of Python aficionados who want Python to be more than the product and
responsibility of a single individual.  It has found a home at CNRI <a
href="http://www.cnri.reston.va.us">http://www.cnri.reston.va.us</a>.  Anybody
who wishes Python well should join the PSA.
<p>
</p>
<hr>


<h3><a name="2.9">2.9. How do I join the PSA?</a></h3>

The full scoop is available on the web, see <a
href="http://www.python.org/psa/regtempl.html">http://www.python.org/psa/regtempl.html</a>.
 Summary: send a check of at least $50 to CNRI/PSA, 1895 Preston White Drive,
Suite 100, in Reston, VA 20191.  Full-time students pay $25.  Prices drop by
half the second half of the fiscal year (April - September).  Companies can
join for a mere $500. Pets may join for only $15!
<p>
</p>
<hr>


<h3><a name="2.10">2.10. What are the benefits of joining the PSA?</a></h3>

Like National Public Radio, without your support, Python will wither.
<p>
If you join, your name will be mentioned on the PSA's web server. Workshops
organized by the PSA <a
href="http://www.python.org/workshops">http://www.python.org/workshops</a>/
are only accessible to PSA members (you can join at the door).  The PSA is
working on additional benefits, such as reduced prices for books and software,
and early access to alpha versions of Python. (The latter has been realized --
the 1.5 alpha testing program is accessible only to PSA members.)</p>
<p>
You might also consider to become a member of the starship project. It is a
free group of Python enthusiasts, and you get a free account. They just happen
to admit only PSA members. Check out <a
href="http://starship.skyport.net">http://starship.skyport.net</a> for further
information.</p>
<p>
</p>
<hr>


<h3><a name="2.11">2.11. Is Python Y2K (Year 2000) Compliant?</a></h3>

Since Python is available free of charge, I don't want to make any absolute
guarantees.  If there <i>is</i> a problem that I didn't foresee, I don't want
to be sued for damages.
<p>
That said, I'm pretty convinced that there are no Y2K problems anywhere in the
core distribution, either 1.5 or 1.4.  Python does few date manipulations, and
what it does is all based on the Unix representation for time (even on
non-Unix systems) which uses seconds since 1970 and won't overflow until
2038.</p>
<p>
</p>
<hr>


<h3>3. Building Python and Other Known Bugs</h3>
<hr>


<h3><a name="3.1">3.1. Is there a test set?</a></h3>

Sure.  You can run it after building with "make test", or you can run it
manuall with the command
<p>
</p>
<pre>        import test.autotest</pre>

In 1.4 or earlier, use
<p>
</p>
<pre>        import autotest</pre>

The test set doesn't test <i>all</i> features of Python, but it goes a long
way to confirm that Python is actually working.
<p>
NOTE: if "make test" fails, don't just mail the output to the newsgroup --
this doesn't give enough information to debug the problem.  Instead, find out
which test fails, and run that test manually from an interactive interpreter. 
For example, if "make test" reports that test_spam fails, try this
interactively:</p>
<p>
</p>
<pre>        import test.test_spam</pre>

This generally produces more verbose output which can be diagnosed to debug
the problem.
<p>
</p>
<hr>


<h3><a name="3.2">3.2. When running the test set, I get complaints about
floating point operations, but when playing with floating point operations I
cannot find anything wrong with them.</a></h3>

The test set makes occasional unwarranted assumptions about the semantics of C
floating point operations.  Until someone donates a better floating point test
set, you will have to comment out the offending floating point tests and
execute similar tests manually.
<p>
</p>
<hr>


<h3><a name="3.3">3.3. Link errors after rerunning the configure
script.</a></h3>

It is generally necessary to run "make clean" after a configuration change.
<p>
</p>
<hr>


<h3><a name="3.4">3.4. The python interpreter complains about options passed
to a script (after the script name).</a></h3>

You are probably linking with GNU getopt, e.g. through -liberty. Don't.  The
reason for the complaint is that GNU getopt, unlike System V getopt and other
getopt implementations, doesn't consider a non-option to be the end of the
option list.  A quick (and compatible) fix for scripts is to add "--" to the
interpreter, like this:
<p>
</p>
<pre>        #! /usr/local/bin/python --</pre>

You can also use this interactively:
<p>
</p>
<pre>        python -- script.py [options]</pre>

Note that a working getopt implementation is provided in the Python
distribution (in Python/getopt.c) but not automatically used.
<p>
</p>
<hr>


<h3><a name="3.5">3.5. When building on the SGI, make tries to run python to
create glmodule.c, but python hasn't been built or installed yet.</a></h3>

Comment out the line mentioning glmodule.c in Setup and build a python without
gl first; install it or make sure it is in your $PATH, then edit the Setup
file again to turn on the gl module, and make again.  You don't need to do
"make clean"; you do need to run "make Makefile" in the Modules subdirectory
(or just run "make" at the toplevel).
<p>
</p>
<hr>


<h3><a name="3.6">3.6. I use VPATH but some targets are built in the source
directory.</a></h3>

On some systems (e.g. Sun), if the target already exists in the source
directory, it is created there instead of in the build directory.  This is
usually because you have previously built without VPATH.  Try running "make
clobber" in the source directory.
<p>
</p>
<hr>


<h3><a name="3.7">3.7. Trouble building or linking with the GNU readline
library.</a></h3>

Consider using readline 2.0.  Some hints:
<p>
You can use the GNU readline library to improve the interactive user
interface: this gives you line editing and command history when calling python
interactively. You need to configure and build the GNU readline library before
running the configure script. Its sources are no longer distributed with
Python; you can ftp them from any GNU mirror site, or from its home site <a
href="ftp://slc2.ins.cwru.edu/pub/dist/readline-2.0.tar.gz">ftp://slc2.ins.cwru.edu/pub/dist/readline-2.0.tar.gz</a>
(or a higher version number -- using version 1.x is not recommended). Pass the
Python configure script the option --with-readline=DIRECTORY where DIRECTORY
is the absolute pathname of the directory where you've built the readline
library. Some hints on building and using the readline library: On SGI IRIX 5,
you may have to add the following to rldefs.h:</p>
<p>
</p>
<pre>        #ifndef sigmask
        #define sigmask(sig) (1L &lt;&lt; ((sig)-1))
        #endif</pre>

On most systems, you will have to add #include "rldefs.h" to the top of
several source files, and if you use the VPATH feature, you will have to add
dependencies of the form foo.o: foo.c to the Makefile for several values of
foo. The readline library requires use of the termcap library. A known problem
with this is that it contains entry points which cause conflicts with the
STDWIN and SGI GL libraries. The STDWIN conflict can be solved by adding a
line saying '#define werase w_erase' to the stdwin.h file (in the STDWIN
distribution, subdirectory H). The GL conflict has been solved in the Python
configure script by a hack that forces use of the static version of the
termcap library. Check the newsgroup gnu.bash.bug news:gnu.bash.bug for
specific problems with the readline library (I don't read this group but I've
been told that it is the place for readline bugs).
<p>
</p>
<hr>


<h3><a name="3.8">3.8. Trouble with socket I/O on older Linux 1.x
versions.</a></h3>

Once you've built Python, use it to run the regen.py script in the Lib/linux1
directory.  Apparently the files as distributed don't match the system headers
on some Linux versions.
<p>
</p>
<hr>


<h3><a name="3.9">3.9. Trouble with prototypes on Ultrix.</a></h3>

Ultrix cc seems broken -- use gcc, or edit config.h to #undef HAVE_PROTOTYPES.
<p>
</p>
<hr>


<h3><a name="3.10">3.10. Other trouble building Python on platform X.</a></h3>

Please email the details to <a
href="mailto:guido@cnri.reston.va.us">guido@cnri.reston.va.us</a> and I'll
look into it.  Please provide as many details as possible.  In particular, if
you don't tell me what type of computer and what operating system (and
version) you are using it will be difficult for me to figure out what is the
matter.  If you get a specific error message, please email it to me too.
<p>
</p>
<hr>


<h3><a name="3.11">3.11. How to configure dynamic loading on Linux.</a></h3>

This is now automatic as long as your Linux version uses the ELF object format
(all recent Linuxes do).
<p>
</p>
<hr>


<h3><a name="3.12">3.12. I can't get shared modules to work on Linux 2.0
(Slackware96)?</a></h3>

This is a bug in the Slackware96 release. The fix is simple: Make sure that
there is a link from /lib/libdl.so to /lib/libdl.so.1 so that the following
links are setup: /lib/libdl.so -> /lib/libdl.so.1 /lib/libdl.so.1 ->
/lib/libdl.so.1.7.14 You may have to rerun the configure script, after rm'ing
the config.cache file, before you attempt to rebuild python after this fix.
<p>
</p>
<hr>


<h3><a name="3.13">3.13. Trouble when making modules shared on Linux.</a></h3>

This happens when you have built Python for static linking and then enable
<pre>  *shared*</pre>

in the Setup file.  Shared library code must be compiled with "-fpic".  If a
.o file for the module already exist that was compiled for static linking, you
must remove it or do "make clean" in the Modules directory.
<p>
</p>
<hr>


<h3><a name="3.14">3.14. How to use threads on Linux.</a></h3>

[Greg Stein] You need to have a very recent libc, or even better, get the
LinuxThreads-0.5 distribution. Note that if you install LinuxThreads normally,
then you shouldn't need to specify the directory to the -with-thread
configuration switch. The configure script ought to find it without a problem.
To make sure everything builds properly, do a "make clean", remove
config.cache, re-run configure with that switch, and then build.
<p>
[Andy Dustman] On glibc systems (i.e. RedHat 5.0+), LinuxThreads is obsoleted
by POSIX threads (-lpthread). If you upgraded from an earlier RedHat, remove
LinuxThreads with "rpm -e linuxthreads linuxthreads-devel". Then run configure
using --with-thread as above.</p>
<p>
</p>
<hr>


<h3><a name="3.15">3.15. Errors when linking with a shared library containing
C++ code.</a></h3>

Link the main Python binary with C++.  Change the definition of LINKCC in
Modules/Makefile to be your C++ compiler.  You may have to edit config.c
slightly to make it compilable with C++.
<p>
</p>
<hr>


<h3><a name="3.16">3.16. I built with tkintermodule.c enabled but get 'Tkinter
not found'</a></h3>

Tkinter.py (note: upper case T) lives in a subdirectory of Lib, Lib/tkinter. 
If you are using the default module search path, you probably didn't enable
the line in the Modules/Setup file defining TKPATH; if you use the environment
variable PYTHONPATH, you'll have to add  the proper tkinter subdirectory.
<p>
For Windows, see question 7.11.</p>
<p>
</p>
<hr>


<h3><a name="3.17">3.17. I built with Tk 4.0 but Tkinter complains about the
Tk version.</a></h3>

Several things could cause this.  You most likely have a Tk 3.6 installation
that wasn't completely eradicated by the Tk 4.0 installation (which tends to
add "4.0" to its installed files).  You may have the Tk 3.6 support library
installed in the place where the Tk 4.0 support files should be (default
/usr/local/lib/tk/); you may have compiled Python with the old tk.h header
file (yes, this actually compiles!); you may actually have linked with Tk 3.6
even though Tk 4.0 is also around.  Similar for Tcl 7.4 vs. Tcl 7.3.
<p>
</p>
<hr>


<h3><a name="3.18">3.18. Compilation or link errors for the _tkinter
module</a></h3>

Most likely, there's a version mismatch between the Tcl/Tk header files (tcl.h
and tk.h) and the Tcl/Tk libraries you are using e.g. "-ltk8.0" and "-ltcl8.0"
arguments for _tkinter in the Setup file). It is possible to install several
versions of the Tcl/Tk libraries, but there can only be one version of the
tcl.h and tk.h header files.  If the library doesn't match the header, you'll
get problems, either when linking the module, or when importing it.
Fortunately, the version number is clearly stated in each file, so this is
easy to find.  Reinstalling and using the latest version usually fixes the
problem.
<p>
(Also note that when compiling unpatched Python 1.5.1 against Tcl/Tk 7.6/4.2
or older, you get an error on Tcl_Finalize.  See the 1.5.1 patch page at <a
href="http://www.python.org/1.5/patches-1.5.1">http://www.python.org/1.5/patches-1.5.1</a>/.)</p>
<p>
</p>
<hr>


<h3><a name="3.19">3.19. I configured and built Python for Tcl/Tk but "import
Tkinter" fails.</a></h3>

Most likely, you forgot to enable the line in Setup that says
"TKPATH=:$(DESTLIB)/tkinter".
<p>
</p>
<hr>


<h3><a name="3.20">3.20. Tk doesn't work right on DEC Alpha.</a></h3>

You probably compiled either Tcl, Tk or Python with gcc.  Don't. For this
platform, which has 64-bit integers, gcc is known to generate broken code. 
The standard cc (which comes bundled with the OS!) works.  If you still prefer
gcc, at least try recompiling with cc before reporting problems to the
newsgroup or the author; if this fixes the problem, report the bug to the gcc
developers instead.  (As far as we know, there are no problem with gcc on
other platforms -- the instabilities seem to be restricted to the DEC Alpha.) 
See also question 3.6.
<p>
There's also a 64-bit bugfix for Tcl/Tk; see</p>
<p>
</p>
<pre>        <a href="http://grail.cnri.reston.va.us/grail/info/patches/tk64bit.txt">http://grail.cnri.reston.va.us/grail/info/patches/tk64bit.txt</a></pre>
<p>
</p>
<hr>


<h3><a name="3.21">3.21. Several common system calls are missing from the
posix module.</a></h3>

Most likely, <i>all</i> test compilations run by the configure script are
failing for some reason or another.  Have a look in config.log to see what
could be the reason.  A common reason is specifying a directory to the
--with-readline option that doesn't contain the libreadline.a file.
<p>
</p>
<hr>


<h3><a name="3.22">3.22. ImportError: No module named string, on MS
Windows.</a></h3>

Most likely, your PYTHONPATH environment variable should be set to something
like:
<p>
set PYTHONPATH=c:\python;c:\python\lib;c:\python\scripts</p>
<p>
(assuming Python was installed in c:\python)</p>
<p>
</p>
<hr>


<h3><a name="3.23">3.23. Core dump on SGI when using the gl module.</a></h3>

There are conflicts between entry points in the termcap and curses libraries
and an entry point in the GL library.  There's a hack of a fix for the termcap
library if it's needed for the GNU readline library, but it doesn't work when
you're using curses.  Concluding, you can't build a Python binary containing
both the curses and gl modules.
<p>
</p>
<hr>


<h3><a name="3.24">3.24. "Initializer not a constant" while building DLL on
MS-Windows</a></h3>

Static type object initializers in extension modules may cause compiles to
fail with an error message like "initializer not a constant". Fredrik Lundh
&lt;<a
href="mailto:Fredrik.Lundh@image.combitech.se">Fredrik.Lundh@image.combitech.se</a>>
explains:
<p>
This shows up when building DLL under MSVC.  There's two ways to address this:
either compile the module as C++, or change your code to something like:</p>
<p>
</p>
<pre>  statichere PyTypeObject bstreamtype = {
      PyObject_HEAD_INIT(NULL) /* must be set by init function */
      0,
      "bstream",
      sizeof(bstreamobject),</pre>
<pre>  ...</pre>
<pre>  void
  initbstream()
  {
      /* Patch object type */
      bstreamtype.ob_type = &amp;PyType_Type;
      Py_InitModule("bstream", functions);
      ...
  }</pre>
<p>
</p>
<hr>


<h3><a name="3.25">3.25. Output directed to a pipe or file disappears on
Linux.</a></h3>

Some people have reported that when they run their script interactively, it
runs great, but that when they redirect it to a pipe or file, no output
appears.
<p>
</p>
<pre>    % python script.py
    ...some output...
    % python script.py >file
    % cat file
    % # no output
    % python script.py | cat
    % # no output
    %</pre>

Nobody knows what causes this, but it is apparently a Linux bug. Most Linux
users are <i>not</i> affected by this.
<p>
There's at least one report of someone who reinstalled Linux (presumably a
newer version) and Python and got rid of the problem; so this may be the
solution.</p>
<p>
</p>
<hr>


<h3><a name="3.26">3.26. Syntax Errors all over the place in Linux with libc
5.4</a></h3>

``I have installed python1.4 on my Linux system. When I try run the import
statement I get the following error message:''
<p>
</p>
<pre>   File "&lt;stdin>", line 1
       import sys
          ^
   Syntax Error: "invalid syntax"</pre>

Did you compile it yourself? This usually is caused by an incompatibility
between libc 5.4.x and earlier libc's. In particular, programs compiled with
libc 5.4 give incorrect results on systems which had libc 5.2 installed
because the ctype.h file is broken. In this case, Python can't recognize which
characters are letters and so on. The fix is to install the C library which
was used when building the binary that you installed, or to compile Python
yourself. When you do this, make sure the C library header files which get
used by the compiler match the installed C library.
<p>
[adapted from an answer by Martin v. Loewis]</p>
<p>
PS [adapted from Andreas Jung]: If you have upgraded to libc 5.4.x, and the
problem persists, check your library path for an older version of libc. Try to
clean update libc with the libs and the header files and then try to recompile
all.</p>
<p>
</p>
<hr>


<h3><a name="3.27">3.27. Crash in XIO on Linux when using Tkinter.</a></h3>

When Python is built with threads under Linux, use of Tkinter can cause
crashes like the following:
<p>
</p>
<pre>  >>> from Tkinter import *
  >>> root = Tk()
  XIO:  fatal IO error 0 (Unknown error) on X server ":0.0"
        after 45 requests (40 known processed) with 1 events remaining.</pre>

The reason is that the default Xlib is not built with support for threads.  If
you rebuild Xlib with threads enabled the problems go away. Alternatively, you
can rebuild Python without threads ("make clean" first!).
<p>
(Disclaimer: this is from memory.)</p>
<p>
</p>
<hr>


<h3><a name="3.28">3.28. How can I test if Tkinter is working?</a></h3>

Try the following:
<p>
</p>
<pre>  python
  >>> import _tkinter
  >>> import Tkinter
  >>> Tkinter._test()</pre>

This should pop up a window with two buttons, one "Click me" and one "Quit".
<p>
If the first statement (import _tkinter) fails, your Python installation
probably has not been configured to support Tcl/Tk. On Unix, if you have
installed Tcl/Tk, you have to rebuild Python after editing the Modules/Setup
file to enable the _tkinter module and the TKPATH environment variable.</p>
<p>
It is also possible to get complaints about Tcl/Tk version number mismatches
or missing TCL_LIBRARY or TK_LIBRARY environment variables.  These have to do
with Tcl/Tk installation problems.</p>
<p>
A common problem is to have installed versions of tcl.h and tk.h that don't
match the installed version of the Tcl/Tk libraries; this usually results in
linker errors or (when using dynamic loading) complaints about missing symbols
during loading the shared library.</p>
<p>
</p>
<hr>


<h3><a name="3.29">3.29. Is there a way to get the interactive mode of the
python interpreter to perform function/variable name completion?</a></h3>

(From a posting by Guido van Rossum)
<p>
On Unix, if you have enabled the readline module (i.e. if Emacs-style command
line editing and bash-style history works for you), you can add this by
importing the undocumented standard library module "rlcompleter".  When
completing a simple identifier, it completes keywords, built-ins and globals
in __main__; when completing NAME.NAME..., it evaluates (!) the expression up
to the last dot and completes its attributes.</p>
<p>
This way, you can do "import string", type "string.", hit the completion key
twice, and see the list of names defined by the string module.</p>
<p>
Tip: to use the tab key as the completion key, call</p>
<p>
</p>
<pre>    readline.parse_and_bind("tab: complete")</pre>

You can put this in a ~/.pythonrc file, and set the PYTHONSTARTUP environment
variable to ~/.pythonrc.  This will cause the completion to be enabled
whenever you run Python interactively.
<p>
Notes (see the docstring for rlcompleter.py for more information):</p>
<p>
* The evaluation of the NAME.NAME... form may cause arbitrary application
defined code to be executed if an object with a __getattr__ hook is found. 
Since it is the responsibility of the application (or the user) to enable this
feature, I consider this an acceptable risk.  More complicated expressions
(e.g. function calls or indexing operations) are <i>not</i> evaluated.</p>
<p>
* GNU readline is also used by the built-in functions input() and raw_input(),
and thus these also benefit/suffer from the complete features.  Clearly an
interactive application can benefit by specifying its own completer function
and using raw_input() for all its input.</p>
<p>
* When stdin is not a tty device, GNU readline is never used, and this module
(and the readline module) are silently inactive.</p>
<p>
</p>
<hr>


<h3><a name="3.30">3.30. Why is the Python interpreter not built as a shared
library?</a></h3>

(This is a Unix question; on Mac and Windows, it <i>is</i> a shared library.)
<p>
It's just a nightmare to get this to work on all different platforms. Shared
library portability is a pain.  And yes, I know about GNU libtool -- but it
requires me to use its conventions for filenames etc, and it would require a
complete and utter rewrite of all the makefile and config tools I'm currently
using.</p>
<p>
In practice, few applications embed Python -- it's much more common to have
Python extensions, which already are shared libraries.  Also, serious
embedders often want total control over which Python version and configuration
they use so they wouldn't want to use a standard shared library anyway.  So
while the motivation of saving space when lots of apps embed Python is nice in
theory, I doubt that it will save much in practice.  (Hence the low priority I
give to making a shared library.)</p>
<p>
</p>
<hr>


<h3><a name="3.31">3.31. Build with GCC on Solaris 2.6 (SunOS 5.6)
fails</a></h3>

If you have upgraded Solaris 2.5 or 2.5.1 to Solaris 2.6, but you have not
upgraded your GCC installation, the compile may fail, e.g. like this:
<p>
</p>
<pre> In file included from /usr/include/sys/stream.h:26,
                  from /usr/include/netinet/in.h:38,
                  from /usr/include/netdb.h:96,
                  from ./socketmodule.c:121:
 /usr/include/sys/model.h:32: #error "No DATAMODEL_NATIVE specified"</pre>

Solution: rebuild GCC for Solaris 2.6. You might be able to simply re-run
fixincludes, but people have had mixed success with doing that.
<p>
</p>
<hr>


<h3>4. Programming in Python</h3>
<hr>


<h3><a name="4.1">4.1. Is there a source code level debugger with breakpoints,
step, etc.?</a></h3>

Yes.  Check out module pdb.  It is documented in the Library Reference Manual;
pdb.help() also prints the documentation.  You can write your own debugger by
using the code for pdb as an example.
<p>
Pythonwin also has a GUI debugger available, based on bdb, which colors
breakpoints and has quite a few cool features (including debugging
non-Pythonwin programs).  The interface needs some work, but is interesting
none the less.  A reference can be found in <a
href="http://www.python.org/ftp/python/pythonwin/pwindex.html">http://www.python.org/ftp/python/pythonwin/pwindex.html</a></p>
<p>
Richard Wolff has created a modified version of pdb, called Pydb, for use with
the popular Data Display Debugger (DDD). Pydb can be found at <a
href="http://daikon.tuc.noao.edu/python">http://daikon.tuc.noao.edu/python</a>/,
and DDD can be found at <a
href="http://www.cs.tu-bs.de/softech/ddd">http://www.cs.tu-bs.de/softech/ddd</a>/</p>
<p>
</p>
<hr>


<h3><a name="4.2">4.2. Can I create an object class with some methods
implemented in C and others in Python (e.g. through inheritance)? (Also
phrased as: Can I use a built-in type as base class?)</a></h3>

No, but you can easily create a Python class which serves as a wrapper around
a built-in object, e.g. (for dictionaries):
<p>
</p>
<pre>        # A user-defined class behaving almost identical
        # to a built-in dictionary.
        class UserDict:
                def __init__(self): self.data = {}
                def __repr__(self): return repr(self.data)
                def __cmp__(self, dict):
                        if type(dict) == type(self.data):
                                return cmp(self.data, dict)
                        else:
                                return cmp(self.data, dict.data)
                def __len__(self): return len(self.data)
                def __getitem__(self, key): return self.data[key]
                def __setitem__(self, key, item): self.data[key] = item
                def __delitem__(self, key): del self.data[key]
                def keys(self): return self.data.keys()
                def items(self): return self.data.items()
                def values(self): return self.data.values()
                def has_key(self, key): return self.data.has_key(key)</pre>

A2. See Jim Fulton's ExtensionClass for an example of a mechanism which allows
you to have superclasses which you can inherit from in Python -- that way you
can have some methods from a C superclass (call it a mixin) and some methods
from either a Python superclass or your subclass.  See <a
href="http://www.digicool.com/papers/ExtensionClass.html">http://www.digicool.com/papers/ExtensionClass.html</a>.
<p>
</p>
<hr>


<h3><a name="4.3">4.3. Is there a curses/termcap package for Python?</a></h3>

[Andrew Kuchling] The standard Python distribution comes with a curses module
in the Modules/ subdirectory, though it's not compiled by default. However,
that module only supports plain curses; you can't use ncurses features like
colors with it (though it will link with ncurses).
<p>
Oliver Andrich has an enhanced module that does support such features; there's
a version available at <a
href="http://andrich.net/python/selfmade.html#ncursesmodule">http://andrich.net/python/selfmade.html#ncursesmodule</a>
.</p>
<p>
</p>
<hr>


<h3><a name="4.4">4.4. Is there an equivalent to C's onexit() in
Python?</a></h3>

Yes, if you import sys and assign a function to sys.exitfunc, it will be
called when your program exits, is killed by an unhandled exception, or (on
UNIX) receives a SIGHUP or SIGTERM signal.
<p>
</p>
<hr>


<h3><a name="4.5">4.5. When I define a function nested inside another
function, the nested function seemingly can't access the local variables of
the outer function. What is going on? How do I pass local data to a nested
function?</a></h3>

Python does not have arbitrarily nested scopes.  When you need to create a
function that needs to access some data which you have available locally,
create a new class to hold the data and return a method of an instance of that
class, e.g.:
<p>
</p>
<pre>        class MultiplierClass:
            def __init__(self, factor):
                self.factor = factor
            def multiplier(self, argument):
                return argument * self.factor</pre>
<pre>        def generate_multiplier(factor):
            return MultiplierClass(factor).multiplier</pre>
<pre>        twice = generate_multiplier(2)
        print twice(10)
        # Output: 20</pre>

An alternative solution uses default arguments, e.g.:
<p>
</p>
<pre>        def generate_multiplier(factor):
            def multiplier(arg, fact = factor):
                return arg*fact
            return multiplier</pre>
<pre>        twice = generate_multiplier(2)
        print twice(10)
        # Output: 20</pre>
<p>
</p>
<hr>


<h3><a name="4.6">4.6. How do I iterate over a sequence in reverse
order?</a></h3>

If it is a list, the fastest solution is
<p>
</p>
<pre>        list.reverse()
        try:
                for x in list:
                        "do something with x"
        finally:
                list.reverse()</pre>

This has the disadvantage that while you are in the loop, the list is
temporarily reversed.  If you don't like this, you can make a copy. This
appears expensive but is actually faster than other solutions:
<p>
</p>
<pre>        rev = list[:]
        rev.reverse()
        for x in rev:
                &lt;do something with x></pre>

If it's not a list, a more general but slower solution is:
<p>
</p>
<pre>        for i in range(len(sequence)-1, -1, -1):
                x = sequence[i]
                &lt;do something with x></pre>

A more elegant solution, is to define a class which acts as a sequence and
yields the elements in reverse order (solution due to Steve Majewski):
<p>
</p>
<pre>        class Rev:
                def __init__(self, seq):
                        self.forw = seq
                def __len__(self):
                        return len(self.forw)
                def __getitem__(self, i):
                        return self.forw[-(i + 1)]</pre>

You can now simply write:
<p>
</p>
<pre>        for x in Rev(list):
                &lt;do something with x></pre>

Unfortunately, this solution is slowest of all, due to the method call
overhead...
<p>
</p>
<hr>


<h3><a name="4.7">4.7. My program is too slow. How do I speed it up?</a></h3>

That's a tough one, in general.  There are many tricks to speed up Python
code; I would consider rewriting parts in C only as a last resort.  One thing
to notice is that function and (especially) method calls are rather expensive;
if you have designed a purely OO interface with lots of tiny functions that
don't do much more than get or set an instance variable or call another
method, you may consider using a more direct way, e.g. directly accessing
instance variables.  Also see the standard module "profile" (described in the
Library Reference manual) which makes it possible to find out where your
program is spending most of its time (if you have some patience -- the
profiling itself can slow your program down by an order of magnitude).
<p>
Remember that many standard optimization heuristics you may know from other
programming experience may well apply to Python.  For example it may be faster
to send output to output devices using larger writes rather than smaller ones
in order to avoid the overhead of kernel system calls.  Thus CGI scripts that
write all output in "one shot" may be notably faster than those that write
lots of small pieces of output.</p>
<p>
Also, be sure to use "aggregate" operations where appropriate. For example the
"slicing" feature allows programs to chop up lists and other sequence objects
in a single tick of the interpreter mainloop using highly optimized C
implementations.  Thus to get the same effect as</p>
<p>
</p>
<pre>  L2 = []
  for i in range[3]:
       L2.append(L1[i])</pre>

it is much shorter and far faster to use
<p>
</p>
<pre>  L2 = list(L1[:3]) # "list" is redundant if L1 is a list.</pre>

Note that the map() function, particularly used with builtin methods or
builtin functions can be a convenient accellerator.  For example to pair the
elements of two lists together:
<p>
</p>
<pre>  >>> map(None, [1,2,3], [4,5,6])
  [(1, 4), (2, 5), (3, 6)]</pre>

or to compute a number of sines:
<p>
</p>
<pre>  >>> map( math.sin, (1,2,3,4))
  [0.841470984808, 0.909297426826, 0.14112000806,   -0.756802495308]</pre>

The map operation completes very quickly in such cases.
<p>
Other examples of aggregate operations include the join, joinfields, split,
and splitfields methods of the standard string builtin module.  For example if
s1..s7 are large (10K+) strings then string.joinfields([s1,s2,s3,s4,s5,s6,s7],
"") may be far faster than the more obvious s1+s2+s3+s4+s5+s6+s7, since the
"summation" will compute many subexpressions, whereas joinfields does all
copying in one pass.  For manipulating strings also consider the regular
expression libraries and the "substitution" operations String % tuple and
String % dictionary.  Also be sure to use the list.sort builtin method to do
sorting, and see FAQ's 4.51 and 4.59 for examples of moderately advanced usage
-- list.sort beats other techniques for sorting in all but the most extreme
circumstances.</p>
<p>
There are many other aggregate operations available in the standard libraries
and in contributed libraries and extensions.</p>
<p>
Another common trick is to "push loops into functions or methods." For example
suppose you have a program that runs slowly and you use the profiler
(profile.run) to determine that a Python function ff is being called lots of
times.  If you notice that ff</p>
<p>
</p>
<pre>   def ff(x):
       ...do something with x computing result...
       return result</pre>

tends to be called in loops like (A)
<p>
</p>
<pre>   list = map(ff, oldlist)</pre>

or (B)
<p>
</p>
<pre>   for x in sequence:
       value = ff(x)
       ...do something with value...</pre>

then you can often eliminate function call overhead by rewriting ff to
<p>
</p>
<pre>   def ffseq(seq):
       resultseq = []
       for x in seq:
           ...do something with x computing result...
           resultseq.append(result)
       return resultseq</pre>

and rewrite (A) to
<p>
</p>
<pre>    list = ffseq(oldlist)</pre>

and (B) to
<p>
</p>
<pre>    for value in ffseq(sequence):
        ...do something with value...</pre>

Other single calls ff(x) translate to ffseq([x])[0] with little penalty.  Of
course this technique is not always appropriate and there are other variants,
which you can figure out.
<p>
You can gain some performance by explicitly storing the results of a function
or method lookup into a local variable.  A loop like</p>
<p>
</p>
<pre>    for key in token:
        dict[key] = dict.get(key, 0) + 1</pre>

resolves dict.get every iteration.  If the method isn't going to change, a
faster implementation is
<p>
</p>
<pre>    dict_get = dict.get  # look up the method once
    for key in token:
        dict[key] = dict_get(key, 0) + 1</pre>

Default arguments can be used to determine values once, at compile time
instead of at run time.  This can only be done for functions or objects which
will not be changed during program execution, such as replacing
<p>
</p>
<pre>    def degree_sin(deg):
        return math.sin(deg * math.pi / 180.0)</pre>

with
<p>
</p>
<pre>    def degree_sin(deg, factor = math.pi/180.0, sin = math.sin):
        return sin(deg * factor)</pre>

Because this trick uses default arguments for terms which should not be
changed, it should only be used when you are not concerned with presenting a
possibly confusing API to your users.
<p>
</p>
<p>
For an anecdote related to optimization, see</p>
<p>
</p>
<pre>        <a href="http://www.python.org/doc/essays/list2str.html">http://www.python.org/doc/essays/list2str.html</a></pre>
<p>
</p>
<hr>


<h3><a name="4.8">4.8. When I have imported a module, then edit it, and import
it again (into the same Python process), the changes don't seem to take place.
What is going on?</a></h3>

For reasons of efficiency as well as consistency, Python only reads the module
file on the first time a module is imported.  (Otherwise a program consisting
of many modules, each of which imports the same basic module, would read the
basic module over and over again.)  To force rereading of a changed module, do
this:
<p>
</p>
<pre>        import modname
        reload(modname)</pre>

Warning: this technique is not 100% fool-proof.  In particular, modules
containing statements like
<p>
</p>
<pre>        from modname import some_objects</pre>

will continue to work with the old version of the imported objects.
<p>
</p>
<hr>


<h3><a name="4.9">4.9. How do I find the current module name?</a></h3>

A module can find out its own module name by looking at the (predefined)
global variable __name__.  If this has the value '__main__' you are running as
a script.
<p>
</p>
<hr>


<h3><a name="4.10">4.10. I have a module in which I want to execute some extra
code when it is run as a script. How do I find out whether I am running as a
script?</a></h3>

See the previous question.  E.g. if you put the following on the last line of
your module, main() is called only when your module is running as a script:
<p>
</p>
<pre>        if __name__ == '__main__': main()</pre>
<p>
</p>
<hr>


<h3><a name="4.11">4.11. I try to run a program from the Demo directory but it
fails with ImportError: No module named ...; what gives?</a></h3>

This is probably an optional module (written in C!) which hasn't been
configured on your system.  This especially happens with modules like
"Tkinter", "stdwin", "gl", "Xt" or "Xm".  For Tkinter, STDWIN and many other
modules, see Modules/Setup.in for info on how to add these modules to your
Python, if it is possible at all.  Sometimes you will have to ftp and build
another package first (e.g. Tcl and Tk for Tkinter). Sometimes the module only
works on specific platforms (e.g. gl only works on SGI machines).
<p>
NOTE: if the complaint is about "Tkinter" (upper case T) and you have already
configured module "tkinter" (lower case t), the solution is <i>not</i> to
rename tkinter to Tkinter or vice versa.  There is probably something wrong
with your module search path.  Check out the value of sys.path.</p>
<p>
For X-related modules (Xt and Xm) you will have to do more work: they are
currently not part of the standard Python distribution.  You will have to ftp
the Extensions tar file, i.e. <a
href="ftp://ftp.python.org/pub/python/src/X-extension.tar.gz">ftp://ftp.python.org/pub/python/src/X-extension.tar.gz</a>
and follow the instructions there.</p>
<p>
See also the next question.</p>
<p>
</p>
<hr>


<h3><a name="4.12">4.12. I have successfully built Python with STDWIN but it
can't find some modules (e.g. stdwinevents).</a></h3>

There's a subdirectory of the library directory named 'stdwin' which should be
in the default module search path.  There's a line in Modules/Setup(.in) that
you have to enable for this purpose -- unfortunately in the latest release
it's not near the other STDWIN-related lines so it's easy to miss it.
<p>
</p>
<hr>


<h3><a name="4.13">4.13. What GUI toolkits exist for Python?</a></h3>

Depending on what platform(s) you are aiming at, there are several.
<p>
Currently supported solutions:</p>
<p>
There's a neat object-oriented interface to the Tcl/Tk widget set, called
Tkinter.  It is part of the standard Python distribution and well-supported --
all you need to do is build and install Tcl/Tk and enable the _tkinter module
and the TKPATH definition in Modules/Setup when building Python.  This is
probably the easiest to install and use, and the most complete widget set.  It
is also very likely that in the future the standard Python GUI API will be
based on or at least look very much like the Tkinter interface.  For more info
about Tk, including pointers to the source, see the Tcl/Tk home page at <a
href="http://www.scriptics.com">http://www.scriptics.com</a>.  Tcl/Tk is now
fully portable to the Mac and Windows platforms (NT and 95 only); you need
Python 1.4beta3 or later and Tk 4.1patch1 or later.</p>
<p>
There's an interface to X11, including the Athena and Motif widget sets (and a
few individual widgets, like Mosaic's HTML widget and SGI's GL widget)
available from <a
href="ftp://ftp.python.org/pub/python/src/X-extension.tar.gz">ftp://ftp.python.org/pub/python/src/X-extension.tar.gz</a>.
Support by Sjoerd Mullender <a
href="mailto:sjoerd@cwi.nl">sjoerd@cwi.nl</a>.</p>
<p>
On top of the X11 interface there's the (recently revived) vpApp toolkit by
Per Spilling, now also maintained by Sjoerd Mullender <a
href="mailto:sjoerd@cwi.nl">sjoerd@cwi.nl</a>.  See <a
href="ftp://ftp.cwi.nl/pub/sjoerd/vpApp.tar.gz">ftp://ftp.cwi.nl/pub/sjoerd/vpApp.tar.gz</a>.</p>
<p>
The Mac port has a rich and ever-growing set of modules that support the
native Mac toolbox calls.  See the documentation that comes with the Mac port.
 See <a
href="ftp://ftp.python.org/pub/python/mac">ftp://ftp.python.org/pub/python/mac</a>.
 Support by Jack Jansen <a href="mailto:jack@cwi.nl">jack@cwi.nl</a>.</p>
<p>
The NT port supported by Mark Hammond <a
href="mailto:MHammond@skippinet.com.au">MHammond@skippinet.com.au</a> (see
question 7.2) includes an interface to the Microsoft Foundation Classes and a
Python programming environment using it that's written mostly in Python.  See
<a
href="ftp://ftp.python.org/pub/python/pythonwin">ftp://ftp.python.org/pub/python/pythonwin</a>/.</p>
<p>
There's an object-oriented GUI based on the Microsoft Foundation Classes model
called WPY, supported by Jim Ahlstrom <a
href="mailto:jim@interet.com">jim@interet.com</a>. Programs written in WPY run
unchanged and with native look and feel on Windows NT/95, Windows 3.1 (using
win32s), and on Unix (using Tk). Source and binaries for Windows and Linux are
available in <a
href="ftp://ftp.python.org/pub/python/wpy">ftp://ftp.python.org/pub/python/wpy</a>/.</p>
<p>
Obsolete or minority solutions:</p>
<p>
There's an interface to wxWindows.  wxWindows is a portable GUI class library
written in C++.  It supports XView, Motif, MS-Windows as targets.  There is
some support for Macs and CURSES as well. wxWindows preserves the look and
feel of the underlying graphics toolkit.  See the wxPython WWW page at <a
href="http://www.aiai.ed.ac.uk/~jacs/wx/wxpython/wxpython.html">http://www.aiai.ed.ac.uk/~jacs/wx/wxpython/wxpython.html</a>.
Support for wxPython (by Harri Pasanen <a
href="mailto:pa@tekla.fi">pa@tekla.fi</a>) appears to have a low priority.</p>
<p>
For SGI IRIX only, there are unsupported interfaces to the complete GL
(Graphics Library -- low level but very good 3D capabilities) as well as to
FORMS (a buttons-and-sliders-etc package built on top of GL by Mark Overmars
-- ftp'able from <a
href="ftp://ftp.cs.ruu.nl/pub/SGI/FORMS">ftp://ftp.cs.ruu.nl/pub/SGI/FORMS</a>/).
 This is probably also becoming obsolete, as OpenGL takes over.</p>
<p>
There's an interface to STDWIN, a platform-independent low-level windowing
interface for Mac and X11.  This is totally unsupported and rapidly becoming
obsolete.  The STDWIN sources are at <a
href="ftp://ftp.cwi.nl/pub/stdwin">ftp://ftp.cwi.nl/pub/stdwin</a>/.  (For
info about STDWIN 2.0, please refer to Steven Pemberton <a
href="mailto:steven@cwi.nl">steven@cwi.nl</a> -- I believe it is also
dead.)</p>
<p>
There is an interface to WAFE, a Tcl interface to the X11 Motif and Athena
widget sets.  WAFE is at <a
href="http://www.wu-wien.ac.at/wafe/wafe.html">http://www.wu-wien.ac.at/wafe/wafe.html</a>.</p>
<p>
(The Fresco port that was mentioned in earlier versions of this FAQ no longer
seems to exist.  Inquire with Mark Linton.)</p>
<p>
</p>
<hr>


<h3><a name="4.14">4.14. Are there any interfaces to database packages in
Python?</a></h3>

There's a whole collection of them in the contrib area of the ftp server, see
<a
href="http://www.python.org/ftp/python/contrib/Database">http://www.python.org/ftp/python/contrib/Database</a>/.
<p>
</p>
<hr>


<h3><a name="4.15">4.15. Is it possible to write obfuscated one-liners in
Python?</a></h3>

Yes.  See the following three examples, due to Ulf Bartelt:
<p>
</p>
<pre>        # Primes &lt; 1000
        print filter(None,map(lambda y:y*reduce(lambda x,y:x*y!=0,
        map(lambda x,y=y:y%x,range(2,int(pow(y,0.5)+1))),1),range(2,1000)))</pre>
<pre>        # First 10 Fibonacci numbers
        print map(lambda x,f=lambda x,f:(x&lt;=1) or (f(x-1,f)+f(x-2,f)): f(x,f),
        range(10))</pre>
<pre>        # Mandelbrot set
        print (lambda Ru,Ro,Iu,Io,IM,Sx,Sy:reduce(lambda x,y:x+y,map(lambda y,
        Iu=Iu,Io=Io,Ru=Ru,Ro=Ro,Sy=Sy,L=lambda yc,Iu=Iu,Io=Io,Ru=Ru,Ro=Ro,i=IM,
        Sx=Sx,Sy=Sy:reduce(lambda x,y:x+y,map(lambda x,xc=Ru,yc=yc,Ru=Ru,Ro=Ro,
        i=i,Sx=Sx,F=lambda xc,yc,x,y,k,f=lambda xc,yc,x,y,k,f:(k&lt;=0)or (x*x+y*y
        >=4.0) or 1+f(xc,yc,x*x-y*y+xc,2.0*x*y+yc,k-1,f):f(xc,yc,x,y,k,f):chr(
        64+F(Ru+x*(Ro-Ru)/Sx,yc,0,0,i)),range(Sx))):L(Iu+y*(Io-Iu)/Sy),range(Sy
        ))))(-2.1, 0.7, -1.2, 1.2, 30, 80, 24)
        #    \___ ___/  \___ ___/  |   |   |__ lines on screen
        #        V          V      |   |______ columns on screen
        #        |          |      |__________ maximum of "iterations"
        #        |          |_________________ range on y axis
        #        |____________________________ range on x axis</pre>

Don't try this at home, kids!
<p>
</p>
<hr>


<h3><a name="4.16">4.16. Is there an equivalent of C's "?:" ternary
operator?</a></h3>

Not directly.  In many cases you can mimic a?b:c with "a and b or c", but
there's a flaw: if b is zero (or empty, or None -- anything that tests false)
then c will be selected instead.  In many cases you can prove by looking at
the code that this can't happen (e.g. because b is a constant or has a type
that can never be false), but in general this can be a problem.
<p>
Tim Peters (who wishes it was Steve Majewski) suggested the following
solution: (a and [b] or [c])[0].  Because [b] is a singleton list it is never
false, so the wrong path is never taken; then applying [0] to the whole thing
gets the b or c that you really wanted.  Ugly, but it gets you there in the
rare cases where it is really inconvenient to rewrite your code using
'if'.</p>
<p>
</p>
<hr>


<h3><a name="4.17">4.17. My class defines __del__ but it is not called when I
delete the object.</a></h3>

There are several possible reasons for this.
<p>
The del statement does not necessarily call __del__ -- it simply decrements
the object's reference count, and if this reaches zero __del__ is called.</p>
<p>
If your data structures contain circular links (e.g. a tree where each child
has a parent pointer and each parent has a list of children) the reference
counts will never go back to zero.  You'll have to define an explicit close()
method which removes those pointers.  Please don't ever call __del__ directly
-- __del__ should call close() and close() should make sure that it can be
called more than once for the same object.</p>
<p>
If the object has ever been a local variable (or argument, which is really the
same thing) to a function that caught an expression in an except clause,
chances are that a reference to the object still exists in that function's
stack frame as contained in the stack trace. Normally, deleting (better:
assigning None to) sys.exc_traceback will take care of this.  If a stack was
printed for an unhandled exception in an interactive interpreter, delete
sys.last_traceback instead.</p>
<p>
There is code that deletes all objects when the interpreter exits, but it is
not called if your Python has been configured to support threads (because
other threads may still be active).  You can define your own cleanup function
using sys.exitfunc (see question 4.4).</p>
<p>
Finally, if your __del__ method raises an exception, this will be ignored. 
Starting with Python 1.4beta3, a warning message is printed to sys.stderr when
this happens.</p>
<p>
See also question 6.14 for a discussion of the possibility of adding true
garbage collection to Python.</p>
<p>
</p>
<hr>


<h3><a name="4.18">4.18. How do I change the shell environment for programs
called using os.popen() or os.system()? Changing os.environ doesn't
work.</a></h3>

You must be using either a version of python before 1.4, or on a (rare) system
that doesn't have the putenv() library function.
<p>
Before Python 1.4, modifying the environment passed to subshells was left out
of the interpreter because there seemed to be no well-established portable way
to do it (in particular, some systems, have putenv(), others have setenv(),
and some have none at all).  As of Python 1.4, almost all Unix systems
<i>do</i> have putenv(), and so does the Win32 API, and thus the os module was
modified so that changes to os.environ are trapped and the corresponding
putenv() call is made.</p>
<p>
</p>
<hr>


<h3><a name="4.19">4.19. What is a class?</a></h3>

A class is the particular object type that is created by executing a class
statement.  Class objects are used as templates, to create class instance
objects, which embody both the data structure and program routines specific to
a datatype.
<p>
</p>
<hr>


<h3><a name="4.20">4.20. What is a method?</a></h3>

A method is a function that you normally call as x.name(arguments...) for some
object x.  The term is used for methods of classes and class instances as well
as for methods of built-in objects.  (The latter have a completely different
implementation and only share the way their calls look in Python code.) 
Methods of classes (and class instances) are defined as functions inside the
class definition.
<p>
</p>
<hr>


<h3><a name="4.21">4.21. What is self?</a></h3>

Self is merely a conventional name for the first argument of a method -- i.e.
a function defined inside a class definition.  A method defined as meth(self,
a, b, c) should be called as x.meth(a, b, c) for some instance x of the class
in which the definition occurs; the called method will think it is called as
meth(x, a, b, c).
<p>
</p>
<hr>


<h3><a name="4.22">4.22. What is an unbound method?</a></h3>

An unbound method is a method defined in a class that is not yet bound to an
instance.  You get an unbound method if you ask for a class attribute that
happens to be a function. You get a bound method if you ask for an instance
attribute.  A bound method knows which instance it belongs to and calling it
supplies the instance automatically; an unbound method only knows which class
it wants for its first argument (a derived class is also OK).  Calling an
unbound method doesn't "magically" derive the first argument from the context
-- you have to provide it explicitly.
<p>
Trivia note regarding bound methods:  each reference to a bound method of a
particular object creates a bound method object.  If you have two such
references (a = inst.meth; b = inst.meth), they will compare equal (a == b)
but are not the same (a is not b).</p>
<p>
</p>
<hr>


<h3><a name="4.23">4.23. How do I call a method defined in a base class from a
derived class that overrides it?</a></h3>

If your class definition starts with "class Derived(Base): ..." then you can
call method meth defined in Base (or one of Base's base classes) as
Base.meth(self, arguments...).  Here, Base.meth is an unbound method (see
previous question).
<p>
</p>
<hr>


<h3><a name="4.24">4.24. How do I call a method from a base class without
using the name of the base class?</a></h3>

DON'T DO THIS.  REALLY.  I MEAN IT.  It appears that you could call
self.__class__.__bases__[0].meth(self, arguments...) but this fails when a
doubly-derived method is derived from your class: for its instances,
self.__class__.__bases__[0] is your class, not its base class -- so (assuming
you are doing this from within Derived.meth) you would start a recursive call.
<p>
Often when you want to do this you are forgetting that classes are first class
in Python.  You can "point to" the class you want to delegate an operation to
either at the instance or at the subclass level.  For example if you want to
use a "glorp" operation of a superclass you can point to the right superclass
to use.</p>
<p>
</p>
<pre>  class subclass(superclass1, superclass2, superclass3):
      delegate_glorp = superclass2
      ...
      def glorp(self, arg1, arg2):
            ... subclass specific stuff ...
            self.delegate_glorp.glorp(self, arg1, arg2)
       ...</pre>
<pre>  class subsubclass(subclass):
       delegate_glorp = superclass3
       ...</pre>

Note, however that setting delegate_glorp to subclass in subsubclass would
cause an infinite recursion on subclass.delegate_glorp.  Careful!  Maybe you
are getting too fancy for your own good.  Consider simplifying the design (?).
<p>
</p>
<hr>


<h3><a name="4.25">4.25. How can I organize my code to make it easier to
change the base class?</a></h3>

You could define an alias for the base class, assign the real base class to it
before your class definition, and use the alias throughout your class.  Then
all you have to change is the value assigned to the alias.  Incidentally, this
trick is also handy if you want to decide dynamically (e.g. depending on
availability of resources) which base class to use.  Example:
<p>
</p>
<pre>        BaseAlias = &lt;real base class>
        class Derived(BaseAlias):
                def meth(self):
                        BaseAlias.meth(self)
                        ...</pre>
<p>
</p>
<hr>


<h3><a name="4.26">4.26. How can I find the methods or attributes of an
object?</a></h3>

This depends on the object type.
<p>
For an instance x of a user-defined class, instance attributes are found in
the dictionary x.__dict__, and methods and attributes defined by its class are
found in x.__class__.__bases__[i].__dict__ (for i in
range(len(x.__class__.__bases__))).  You'll have to walk the tree of base
classes to find <i>all</i> class methods and attributes.</p>
<p>
Many, but not all built-in types define a list of their method names in
x.__methods__, and if they have data attributes, their names may be found in
x.__members__.  However this is only a convention.</p>
<p>
For more information, read the source of the standard (but undocumented)
module newdir.</p>
<p>
</p>
<hr>


<h3><a name="4.27">4.27. I can't seem to use os.read() on a pipe created with
os.popen().</a></h3>

os.read() is a low-level function which takes a file descriptor (a small
integer).  os.popen() creates a high-level file object -- the same type used
for sys.std{in,out,err} and returned by the builtin open() function.  Thus, to
read n bytes from a pipe p created with os.popen(), you need to use p.read(n).
<p>
</p>
<hr>


<h3><a name="4.28">4.28. How can I create a stand-alone binary from a Python
script?</a></h3>

The "freeze" tool in "Tools/freeze/" does what you want.  See the README.
<p>
This works by scanning your source recursively for import statements (both
forms) and looking for the modules on the standard Python path as well as in
the source directory (for built-in modules).  It then "compiles" the modules
written in Python to C code (array initializers that can be turned into code
objects using the marshal module) and creates a custom-made config file that
only contains those built-in modules which are actually used in the program. 
It then compiles the generated C code and links it with the rest of the Python
interpreter to form a self-contained binary which acts exactly like your
script.</p>
<p>
Hint: the freeze program only works if your script's filename ends in
".py".</p>
<p>
</p>
<hr>


<h3><a name="4.29">4.29. What WWW tools are there for Python?</a></h3>

See the chapter titled "Internet and WWW" in the Library Reference Manual. 
There's also a web browser written in Python, called Grail -- see <a
href="http://grail.cnri.reston.va.us/grail">http://grail.cnri.reston.va.us/grail</a>/.
<p>
</p>
<hr>


<h3><a name="4.30">4.30. How do I run a subprocess with pipes connected to
both input and output?</a></h3>

Use the standard popen2 module.  For example:
<p>
</p>
<pre>        import popen2
        fromchild, tochild = popen2.popen2("command")
        tochild.write("input\n")
        tochild.flush()
        output = fromchild.readline()</pre>

Warning: in general, it is unwise to do this, because you can easily cause a
deadlock where your process is blocked waiting for output from the child,
while the child is blocked waiting for input from you.  This can be caused
because the parent expects the child to output more text than it does, or it
can be caused by data being stuck in stdio buffers due to lack of flushing. 
The Python parent can of course explicitly flush the data it sends to the
child before it reads any output, but if the child is a naive C program it can
easily have been written to never explicitly flush its output, even if it is
interactive, since flushing is normally automatic.
<p>
Note on a bug in popen2: unless your program calls wait() or waitpid(),
finished child processes are never removed, and eventually calls to popen2
will fail because of a limit on the number of child processes.  Calling
os.waitpid with the os.WNOHANG option can prevent this; a good place to insert
such a call would be before calling popen2 again.</p>
<p>
In many cases, all you really need is to run some data through a command and
get the result back.  Unless the data is infinite in size, the easiest (and
often the most efficient!) way to do this is to write it to a temporary file
and run the command with that temporary file as input.  The standard module
tempfile exports a function mktemp() which generates unique temporary file
names.</p>
<p>
Note that many interactive programs (e.g. vi) don't work well with pipes
substituted for standard input and output.  You will have to use pseudo ttys
("ptys") instead of pipes.  There is some undocumented code to use these in
the library module pty.py -- I'm afraid you're on your own here.</p>
<p>
A different answer is a Python interface to Don Libes' "expect" library.  A
Python extension that interfaces to expect is called "expy" and available from
<a
href="ftp://ftp.python.org/pub/python/contrib/System">ftp://ftp.python.org/pub/python/contrib/System</a>/.</p>
<p>
A pure Python solution that works like expect is PIPE by John Croix. A
prerelease of PIPE is available from <a
href="ftp://ftp.python.org/pub/python/contrib/System">ftp://ftp.python.org/pub/python/contrib/System</a>/.</p>
<p>
</p>
<hr>


<h3><a name="4.31">4.31. How do I call a function if I have the arguments in a
tuple?</a></h3>

Use the built-in function apply().  For instance,
<p>
</p>
<pre>    func(1, 2, 3)</pre>

is equivalent to
<p>
</p>
<pre>    args = (1, 2, 3)
    apply(func, args)</pre>

Note that func(args) is not the same -- it calls func() with exactly one
argument, the tuple args, instead of three arguments, the integers 1, 2 and 3.
<p>
</p>
<hr>


<h3><a name="4.32">4.32. How do I enable font-lock-mode for Python in
Emacs?</a></h3>

If you are using XEmacs 19.14 or later, any XEmacs 20, FSF Emacs 19.34 or any
Emacs 20, font-lock should work automatically for you if you are using the
latest python-mode.el.
<p>
If you are using an older version of XEmacs or Emacs you will need to put this
in your .emacs file:</p>
<p>
</p>
<pre>        (defun my-python-mode-hook ()
          (setq font-lock-keywords python-font-lock-keywords)
          (font-lock-mode 1))
        (add-hook 'python-mode-hook 'my-python-mode-hook)</pre>
<p>
</p>
<hr>


<h3><a name="4.33">4.33. Is there a scanf() or sscanf() equivalent?</a></h3>

Not as such.
<p>
For simple input parsing, the easiest approach is usually to split the line
into whitespace-delimited words using string.split(), and to convert decimal
strings to numeric values using string.atoi(), string.atol() or string.atof().
 (Python's atoi() is 32-bit and its atol() is arbitrary precision.)  If you
want to use another delimiter than whitespace, use string.splitfield()
(possibly combining it with string.strip() which removes surrounding
whitespace from a string).</p>
<p>
For more complicated input parsing, regular expressions (see module regex) are
better suited and more powerful than C's sscanf().</p>
<p>
There's a contributed module that emulates sscanf(), by Steve Clift; see
contrib/Misc/sscanfmodule.c of the ftp site:</p>
<p>
</p>
<pre>    <a href="http://www.python.org/ftp/python/contrib/misc/sscanfmodule.c">http://www.python.org/ftp/python/contrib/Misc/sscanfmodule.c</a></pre>
<p>
</p>
<hr>


<h3><a name="4.34">4.34. Can I have Tk events handled while waiting for
I/O?</a></h3>

Yes, and you don't even need threads!  But you'll have to restructure your I/O
code a bit.  Tk has the equivalent of Xt's XtAddInput() call, which allows you
to register a callback function which will be called from the Tk mainloop when
I/O is possible on a file descriptor.  Here's what you need:
<p>
</p>
<pre>        from Tkinter import tkinter
        tkinter.createfilehandler(file, mask, callback)</pre>

The file may be a Python file or socket object (actually, anything with a
fileno() method), or an integer file descriptor.  The mask is one of the
constants tkinter.READABLE or tkinter.WRITABLE.  The callback is called as
follows:
<p>
</p>
<pre>        callback(file, mask)</pre>

You must unregister the callback when you're done, using
<p>
</p>
<pre>        tkinter.deletefilehandler(file)</pre>

Note: since you don't know *how many bytes* are available for reading, you
can't use the Python file object's read or readline methods, since these will
insist on reading a predefined number of bytes.  For sockets, the recv() or
recvfrom() methods will work fine; for other files, use os.read(file.fileno(),
maxbytecount).
<p>
</p>
<hr>


<h3><a name="4.35">4.35. How do I write a function with output parameters
(call by reference)?</a></h3>

[Mark Lutz] The thing to remember is that arguments are passed by assignment
in Python.  Since assignment just creates references to objects, there's no
alias between an argument name in the caller and callee, and so no
call-by-reference per se.  But you can simulate it in a number of ways:
<p>
1) By using global variables; but you probably shouldn't :-)</p>
<p>
2) By passing a mutable (changeable in-place) object:</p>
<p>
</p>
<pre>      def func1(a):
          a[0] = 'new-value'     # 'a' references a mutable list
          a[1] = a[1] + 1        # changes a shared object</pre>
<pre>      args = ['old-value', 99]
      func1(args)
      print args[0], args[1]     # output: new-value 100</pre>

3) By returning a tuple, holding the final values of arguments:
<p>
</p>
<pre>      def func2(a, b):
          a = 'new-value'        # a and b are local names
          b = b + 1              # assigned to new objects
          return a, b            # return new values</pre>
<pre>      x, y = 'old-value', 99
      x, y = func2(x, y)
      print x, y                 # output: new-value 100</pre>

4) And other ideas that fall-out from Python's object model. For instance, it
might be clearer to pass in a mutable dictionary:
<p>
</p>
<pre>      def func3(args):
          args['a'] = 'new-value'     # args is a mutable dictionary
          args['b'] = args['b'] + 1   # change it in-place</pre>
<pre>      args = {'a':' old-value', 'b': 99}
      func3(args)
      print args['a'], args['b']</pre>

5) Or bundle-up values in a class instance:
<p>
</p>
<pre>      class callByRef:
          def __init__(self, **args):
              for (key, value) in args.items():
                  setattr(self, key, value)</pre>
<pre>      def func4(args):
          args.a = 'new-value'        # args is a mutable callByRef
          args.b = args.b + 1         # change object in-place</pre>
<pre>      args = callByRef(a='old-value', b=99)
      func4(args)
      print args.a, args.b</pre>
<pre>   But there's probably no good reason to get this complicated :-).</pre>

[Python's author favors solution 3 in most cases.]
<p>
</p>
<hr>


<h3><a name="4.36">4.36. Please explain the rules for local and global
variables in Python.</a></h3>

[Ken Manheimer] In Python, procedure variables are implicitly global, unless
they are assigned anywhere within the block. In that case they are implicitly
local, and you need to explicitly declare them as 'global'.
<p>
Though a bit surprising at first, a moment's consideration explains this.  On
one hand, requirement of 'global' for assigned vars provides a bar against
unintended side-effects.  On the other hand, if global were required for all
global references, you'd be using global all the time.  Eg, you'd have to
declare as global every reference to a builtin function, or to a component of
an imported module.  This clutter would defeat the usefulness of the 'global'
declaration for identifying side-effects.</p>
<p>
</p>
<hr>


<h3><a name="4.37">4.37. How can I have modules that mutually import each
other?</a></h3>

Jim Roskind recommends the following order in each module:
<p>
First: all exports (like globals, functions, and classes that don't need
imported base classes).</p>
<p>
Then: all import statements.</p>
<p>
Finally: all active code (including globals that are initialized from imported
values).</p>
<p>
Python's author doesn't like this approach much because the imports appear in
a strange place, but has to admit that it works.  His recommended strategy is
to avoid all uses of "from &lt;module> import *" (so everything from an
imported module is referenced as &lt;module>.&lt;name>) and to place all code
inside functions. Initializations of global variables and class variables
should use constants or built-in functions only.</p>
<p>
</p>
<hr>


<h3><a name="4.38">4.38. How do I copy an object in Python?</a></h3>

There is no generic copying operation built into Python, however most object
types have some way to create a clone.  Here's how for the most common
objects:
<p>
For immutable objects (numbers, strings, tuples), cloning is unnecessary since
their value can't change. For lists (and generally for mutable sequence
types), a clone is created by the expression l[:]. For dictionaries, the
following function returns a clone:</p>
<p>
</p>
<pre>        def dictclone(o):
            n = {}
            for k in o.keys(): n[k] = o[k]
            return n</pre>

Finally, for generic objects, the "copy" module defines two functions for
copying objects.  copy.copy(x) returns a copy as shown by the above rules. 
copy.deepcopy(x) also copies the elements of composite objects.  See the
section on this module in the Library Reference Manual.
<p>
</p>
<hr>


<h3><a name="4.39">4.39. How to implement persistent objects in Python?
(Persistent == automatically saved to and restored from disk.)</a></h3>

The library module "pickle" now solves this in a very general way (though you
still can't store things like open files, sockets or windows), and the library
module "shelve" uses pickle and (g)dbm to create persistent mappings
containing arbitrary Python objects. For possibly better performance also look
for the latest version of the relatively recent cPickle module.
<p>
A more awkward way of doing things is to use pickle's little sister, marshal. 
The marshal module provides very fast ways to store noncircular basic Python
types to files and strings, and back again. Although marshal does not do fancy
things like store instances or handle shared references properly, it does run
extremely fast.  For example loading a half megabyte of data may take less
than a third of a second (on some machines).  This often beats doing something
more complex and general such as using gdbm with pickle/shelve.</p>
<p>
</p>
<hr>


<h3><a name="4.40">4.40. I try to use __spam and I get an error about
_SomeClassName__spam.</a></h3>

Variables with double leading underscore are "mangled" to provide a simple but
effective way to define class private variables.  See the chapter "New in
Release 1.4" in the Python Tutorial.
<p>
</p>
<hr>


<h3><a name="4.41">4.41. How do I delete a file? And other file
questions.</a></h3>

Use os.remove(filename) or os.unlink(filename); for documentation, see the
posix section of the library manual.  They are the same, unlink() is simply
the Unix name for this function.  In earlier versions of Python, only
os.unlink() was available.
<p>
To remove a directory, use os.rmdir(); use os.mkdir() to create one.</p>
<p>
To rename a file, use os.rename().</p>
<p>
To truncate a file, open it using f = open(filename, "r+"), and use
f.truncate(offset); offset defaults to the current seek position. (The "r+"
mode opens the file for reading and writing.) There's also os.ftruncate(fd,
offset) for files opened with os.open() -- for advanced Unix hacks only.</p>
<p>
</p>
<hr>


<h3><a name="4.42">4.42. How to modify urllib or httplib to support
HTTP/1.1?</a></h3>

Apply the following patch to the vanilla Python 1.4 httplib.py:
<p>
</p>
<pre>  41c41
  &lt; replypat = regsub.gsub('\\.', '\\\\.', HTTP_VERSION) + \
  ---
  > replypat = regsub.gsub('\\.', '\\\\.', 'HTTP/1.[0-9]+') + \</pre>
<p>
</p>
<hr>


<h3><a name="4.43">4.43. Unexplicable syntax errors in compile() or
exec.</a></h3>

When a statement suite (as opposed to an expression) is compiled by compile(),
exec or execfile(), it <i>must</i> end in a newline.  In some cases, when the
source ends in an indented block it appears that at least two newlines are
required.
<p>
</p>
<hr>


<h3><a name="4.44">4.44. How do I convert a string to a number?</a></h3>

For integers, use the built-in int() function, e.g. int('144') == 144. 
Similarly, long() converts from string to long integer, e.g. long('144') ==
144L; and float() to floating-point, e.g. float('144') == 144.0.
<p>
Note that these are restricted to decimal interpretation, so that int('0144')
== 144 and int('0x144') raises ValueError.</p>
<p>
For greater flexibility, or before Python 1.5, import the module string and
use the string.atoi() function for integers, string.atol() for long integers,
or string.atof() for floating-point.  E.g., string.atoi('100', 16) ==
string.atoi('0x100', 0) == 256.  See the library reference manual section for
the string module for more details.</p>
<p>
While you could use the built-in function eval() instead of any of those, this
is not recommended, because someone could pass you a Python expression that
might have unwanted side effects (like reformatting your disk).</p>
<p>
</p>
<hr>


<h3><a name="4.45">4.45. How do I convert a number to a string?</a></h3>

To convert, e.g., the number 144 to the string '144', use the built-in
function repr() or the backquote notation (these are equivalent).  If you want
a hexadecimal or octal representation, use the built-in functions hex() or
oct(), respectively.  For fancy formatting, use the % operator on strings,
just like C printf formats, e.g. "%04d" % 144 yields '0144' and "%.3f" %
(1/3.0) yields '0.333'. See the library reference manual for details.
<p>
</p>
<hr>


<h3><a name="4.46">4.46. How do I copy a file?</a></h3>

Most of the time this will do:
<p>
</p>
<pre>   infile = open("file.in", "rb")
   outfile = open("file.out", "wb")
   outfile.write(infile.read())</pre>

However for huge files you may want to do the reads/writes in pieces (or you
may have to), and if you dig deeper you may find other technical problems.
<p>
Unfortunately, there's no totally platform independent answer. On Unix, you
can use os.system() to invoke the "cp" command (see your Unix manual for how
it's invoked). On DOS or Windows, use os.system() to invoke the "COPY"
command. On the Mac, use macostools.copy(srcpath, dstpath). It will also copy
the resource fork and Finder info.</p>
<p>
There's also the shutil module which contains a copyfile() function that
implements the copy loop; but in Python 1.4 and earlier it opens files in text
mode, and even in Python 1.5 it still isn't good enough for the Macintosh: it
doesn't copy the resource fork and Finder info.</p>
<p>
</p>
<hr>


<h3><a name="4.47">4.47. How do I check if an object is an instance of a given
class or of a subclass of it?</a></h3>

If you are developing the classes from scratch it might be better to program
in a more proper object-oriented style -- instead of doing a different thing
based on class membership, why not use a method and define the method
differently in different classes?
<p>
However, there are some legitimate situations where you need to test for class
membership.</p>
<p>
In Python 1.5, you can use the built-in function isinstance(obj, cls).</p>
<p>
The following approaches can be used with earlier Python versions:</p>
<p>
An unobvious method is to raise the object as an exception and to try to catch
the exception with the class you're testing for:</p>
<p>
</p>
<pre>        def is_instance_of(the_instance, the_class):
            try:
                raise the_instance
            except the_class:
                return 1
            except:
                return 0</pre>

This technique can be used to distinguish "subclassness" from a collection of
classes as well
<p>
</p>
<pre>                try:
                              raise the_instance
                except Audible:
                              the_instance.play(largo)
                except Visual:
                              the_instance.display(gaudy)
                except Olfactory:
                              sniff(the_instance)
                except:
                              raise ValueError, "dunno what to do with this!"</pre>

This uses the fact that exception catching tests for class or subclass
membership.
<p>
A different approach is to test for the presence of a class attribute that is
presumably unique for the given class.  For instance:</p>
<p>
</p>
<pre>        class MyClass:
            ThisIsMyClass = 1
            ...</pre>
<pre>        def is_a_MyClass(the_instance):
            return hasattr(the_instance, 'ThisIsMyClass')</pre>

This version is easier to inline, and probably faster (inlined it is
definitely faster).  The disadvantage is that someone else could cheat:
<p>
</p>
<pre>        class IntruderClass:
            ThisIsMyClass = 1    # Masquerade as MyClass
            ...</pre>

but this may be seen as a feature (anyway, there are plenty of other ways to
cheat in Python).  Another disadvantage is that the class must be prepared for
the membership test.  If you do not "control the source code" for the class it
may not be advisable to modify the class to support testability.
<p>
</p>
<hr>


<h3><a name="4.48">4.48. What is delegation?</a></h3>

Delegation refers to an object oriented technique Python programmers may
implement with particular ease.  Consider the following:
<p>
</p>
<pre>  from string import upper</pre>
<pre>  class UpperOut:
        def __init__(self, outfile):
              self.__outfile = outfile
        def write(self, str):
              self.__outfile.write( upper(str) )
        def __getattr__(self, name):
              return getattr(self.__outfile, name)</pre>

Here the UpperOut class redefines the write method to convert the argument
string to upper case before calling the underlying self.__outfile.write
method, but all other methods are delegated to the underlying self.__outfile
object.  The delegation is accomplished via the "magic" __getattr__ method. 
Please see the language reference for more information on the use of this
method.
<p>
Note that for more general cases delegation can get trickier. Particularly
when attributes must be set as well as gotten the class must define a
__settattr__ method too, and it must do so carefully.</p>
<p>
The basic implementation of __setattr__ is roughly equivalent to the
following:</p>
<p>
</p>
<pre>   class X:
        ...
        def __setattr__(self, name, value):
             self.__dict__[name] = value
        ...</pre>

Most __setattr__ implementations must modify self.__dict__ to store local
state for self without causing an infinite recursion.
<p>
</p>
<hr>


<h3><a name="4.49">4.49. How do I test a Python program or component.</a></h3>

First, it helps to write the program so that it may be easily tested by using
good modular design.  In particular your program should have almost all
functionality encapsulated in either functions or class methods -- and this
sometimes has the surprising and delightful effect of making the program run
faster (because local variable accesses are faster than global accesses).
Furthermore the program should avoid depending on mutating global variables,
since this makes testing much more difficult to do.
<p>
The "global main logic" of your program may be as simple as</p>
<p>
</p>
<pre>  if __name__=="__main__":
       main_logic()</pre>

at the bottom of the main module of your program.
<p>
Once your program is organized as a tractible collection of functions and
class behaviours you should write test functions that exercise the behaviours.
 A test suite can be associated with each module which automates a sequence of
tests.  This sounds like a lot of work, but since Python is so terse and
flexible it's surprisingly easy. You can make coding much more pleasant and
fun by writing your test functions in parallel with the "production code",
since this makes it easy to find bugs and even design flaws earlier.</p>
<p>
"Support modules" that are not intended to be the main module of a program may
include a "test script interpretation" which invokes a self test of the
module.</p>
<p>
</p>
<pre>   if __name__ == "__main__":
      self_test()</pre>

Even programs that interact with complex external interfaces may be tested
when the external interfaces are unavailable by using "fake" interfaces
implemented in Python.  For an example of a "fake" interface, the following
class defines (part of) a "fake" file interface:
<p>
</p>
<pre> import string
 testdata = "just a random sequence of characters"</pre>
<pre> class FakeInputFile:
   data = testdata
   position = 0
   closed = 0</pre>
<pre>   def read(self, n=None):
       self.testclosed()
       p = self.position
       if n is None:
          result= self.data[p:]
       else:
          result= self.data[p: p+n]
       self.position = p + len(result)
       return result</pre>
<pre>   def seek(self, n, m=0):
       self.testclosed()
       last = len(self.data)
       p = self.position
       if m==0: 
          final=n
       elif m==1:
          final=n+p
       elif m==2:
          final=len(self.data)+n
       else:
          raise ValueError, "bad m"
       if final&lt;0:
          raise IOError, "negative seek"
       self.position = final</pre>
<pre>   def isatty(self):
       return 0</pre>
<pre>   def tell(self):
       return self.position</pre>
<pre>   def close(self):
       self.closed = 1</pre>
<pre>   def testclosed(self):
       if self.closed:
          raise IOError, "file closed"</pre>

Try f=FakeInputFile() and test out its operations.
<p>
</p>
<hr>


<h3><a name="4.50">4.50. My multidimensional list (array) is broken! What
gives?</a></h3>

You probably tried to make a multidimensional array like this.
<p>
</p>
<pre>   A = [[None] * 2] * 3</pre>

This makes a list containing 3 references to the same list of length two. 
Changes to one row will show in all rows, which is probably not what you want.
 The following works much better:
<p>
</p>
<pre>   A = [None]*3
   for i in range(3):
        A[i] = [None] * 2</pre>

This generates a list containing 3 different lists of length two.
<p>
If you feel weird, you can also do it in the following way:</p>
<p>
</p>
<pre>   w, h = 2, 3
   A = map(lambda i,w=w: [None] * w, range(h))</pre>
<p>
</p>
<hr>


<h3><a name="4.51">4.51. I want to do a complicated sort: can you do a
Schwartzian Transform in Python?</a></h3>

Yes, and in Python you only have to write it once:
<p>
</p>
<pre> def st(List, Metric):
     def pairing(element, M = Metric):
           return (M(element), element)
     paired = map(pairing, List)
     paired.sort()
     return map(stripit, paired)</pre>
<pre> def stripit(pair):
     return pair[1]</pre>

This technique, attributed to Randal Schwartz, sorts the elements of a list by
a metric which maps each element to its "sort value". For example, if L is a
list of string then
<p>
</p>
<pre>   import string
   Usorted = st(L, string.upper)</pre>
<pre>   def intfield(s):
         return string.atoi( string.strip(s[10:15] ) )</pre>
<pre>   Isorted = st(L, intfield)</pre>

Usorted gives the elements of L sorted as if they were upper case, and Isorted
gives the elements of L sorted by the integer values that appear in the string
slices starting at position 10 and ending at position 15.  Note that Isorted
may also be computed by
<p>
</p>
<pre>   def Icmp(s1, s2):
         return cmp( intfield(s1), intfield(s2) )</pre>
<pre>   Isorted = L[:]
   Isorted.sort(Icmp)</pre>

but since this method computes intfield many times for each element of L, it
is slower than the Schwartzian Transform.
<p>
</p>
<hr>


<h3><a name="4.52">4.52. How to convert between tuples and lists?</a></h3>

The function tuple(seq) converts any sequence into a tuple with the same items
in the same order. For example, tuple([1, 2, 3]) yields (1, 2, 3) and
tuple('abc') yields ('a', 'b', 'c').  If the argument is a tuple, it does not
make a copy but returns the same object, so it is cheap to call tuple() when
you aren't sure that an object is already a tuple.
<p>
The function list(seq) converts any sequence into a list with the same items
in the same order. For example, list((1, 2, 3)) yields [1, 2, 3] and
list('abc') yields ['a', 'b', 'c'].  If the argument is a list, it makes a
copy just like seq[:] would.</p>
<p>
</p>
<hr>


<h3><a name="4.53">4.53. Files retrieved with urllib contain leading garbage
that looks like email headers.</a></h3>

The server is using HTTP/1.1; the vanilla httplib in Python 1.4 only
recognizes HTTP/1.0.  See question 4.42 for a patch.
<p>
</p>
<hr>


<h3><a name="4.54">4.54. How do I get a list of all instances of a given
class?</a></h3>

Python does not keep track of all instances of a class (or of a built-in
type).
<p>
You can program the class's constructor to keep track of all instances, but
unless you're very clever, this has the disadvantage that the instances never
get deleted,because your list of all instances keeps a reference to them.</p>
<p>
(The trick is to regularly inspect the reference counts of the instances
you've retained, and if the reference count is below a certain level, remove
it from the list.  Determining that level is tricky -- it's definitely larger
than 1.)</p>
<p>
</p>
<hr>


<h3><a name="4.55">4.55. A regular expression fails with regex.error: match
failure.</a></h3>

This is usually caused by too much backtracking; the regular expression engine
has a fixed size stack which holds at most 4000 backtrack points.  Every
character matched by e.g. ".*" accounts for a backtrack point, so even a
simple search like
<p>
</p>
<pre>  regex.match('.*x',"x"*5000)</pre>

will fail.
<p>
This is fixed in the re module introduced with Python 1.5; consult the Library
Reference section on re for more information.</p>
<p>
</p>
<hr>


<h3><a name="4.56">4.56. I can't get signal handlers to work.</a></h3>

The most common problem is that the signal handler is declared with the wrong
argument list.  It is called as
<p>
</p>
<pre>        handler(signum, frame)</pre>

so it should be declared with two arguments:
<p>
</p>
<pre>        def handler(signum, frame):
                ...</pre>
<p>
</p>
<hr>


<h3><a name="4.57">4.57. I can't use a global variable in a function?
Help!</a></h3>

Did you do something like this?
<p>
</p>
<pre>   x = 1 # make a global</pre>
<pre>   def f():
         print x # try to print the global
         ...
         for j in range(100):
              if q>3:
                 x=4</pre>

If you did, all references to x in f are local, not global by virtue of the
"x=4" assignment.  Any variable assigned in a function is local to that
function unless it is declared global.  Consequently the "print x" attempts to
print an uninitialized local variable and will trigger a NameError.
<p>
</p>
<hr>


<h3><a name="4.58">4.58. What's a negative index? Why doesn't list.insert()
use them?</a></h3>

Python sequences are indexed with positive numbers and negative numbers.  For
positive numbers 0 is the first index 1 is the second index and so forth.  For
negative indices -1 is the last index and -2 is the pentultimate (next to
last) index and so forth.  Think of seq[-n] as the same as seq[len(seq)-n].
<p>
Using negative indices can be very convenient.  For example if the string Line
ends in a newline then Line[:-1] is all of Line except the newline.</p>
<p>
Sadly the list builtin method L.insert does not observe negative indices. 
This feature could be considered a mistake but since existing programs depend
on this feature it may stay around forever.  L.insert for negative indices
inserts at the start of the list.  To get "proper" negative index behaviour
use L[n:n] = [x] in place of the insert method.</p>
<p>
</p>
<hr>


<h3><a name="4.59">4.59. How can I sort one list by values from another
list?</a></h3>

You can sort lists of  tuples.
<p>
</p>
<pre>  >>> list1 = ["what", "I'm", "sorting", "by"]
  >>> list2 = ["something", "else", "to", "sort"]
  >>> pairs = map(None, list1, list2)
  >>> pairs
  [('what', 'something'), ("I'm", 'else'), ('sorting', 'to'), ('by', 'sort')]
  >>> pairs.sort()
  >>> pairs
  [("I'm", 'else'), ('by', 'sort'), ('sorting', 'to'), ('what', 'something')]
  >>> result = pairs[:]
  >>> for i in xrange(len(result)): result[i] = result[i][1]
  ...
  >>> result
  ['else', 'sort', 'to', 'something']</pre>

And if you didn't understand the question, please see the example above ;c). 
Note that "I'm" sorts before "by" because uppercase "I" comes before lowercase
"b" in the ascii order. Also see 4.51.
<p>
</p>
<hr>


<h3><a name="4.60">4.60. Why doesn't dir() work on builtin types like files
and lists?</a></h3>

It should have -- and it does starting with Python 1.5 (currently in
development -- see Questions 1.13 and 2.10).
<p>
Using 1.4, you can find out which methods a given object supports by looking
at its __methods__ attribute:</p>
<p>
</p>
<pre>    >>> List = []
    >>> List.__methods__
    ['append', 'count', 'index', 'insert', 'remove', 'reverse', 'sort']</pre>
<p>
</p>
<hr>


<h3><a name="4.61">4.61. How can I mimic CGI form submission
(METHOD=POST)?</a></h3>

I would like to retrieve web pages that are the result of POSTing a form. Is
there existing code that would let me do this easily?
<p>
Yes. Here's a simple example that uses httplib.</p>
<p>
</p>
<pre>    #!/usr/local/bin/python</pre>
<pre>    import httplib, sys, time</pre>
<pre>    ### build the query string
    qs = "First=Josephine&amp;MI=Q&amp;Last=Public"</pre>
<pre>    ### connect and send the server a path
    httpobj = httplib.HTTP('www.some-server.out-there', 80)
    httpobj.putrequest('POST', '/cgi-bin/some-cgi-script')
    ### now generate the rest of the HTTP headers...
    httpobj.putheader('Accept', */*')
    httpobj.putheader('Connection', 'Keep-Alive')
    httpobj.putheader('Content-type', 'application/x-www-form-urlencoded')
    httpobj.putheader('Content-length', '%d' % len(qs))
    httpobj.endheaders()
    httpobj.send(qs)
    ### find out what the server said in response...
    reply, msg, hdrs = httpobj.getreply()
    if reply != 200:
        sys.stdout.write(httpobj.getfile().read())</pre>

Note that in general for "url encoded posts" (the default) query strings must
be "quoted" to, for example, change equals signs and spaces to an encoded form
when they occur in name or value.  Use urllib.quote to perform this quoting. 
For example to send name="Guy Steele, Jr.":
<p>
</p>
<pre>   >>> from urllib import quote
   >>> x = quote("Guy Steele, Jr.")
   >>> x
   'Guy%20Steele,%20Jr.'
   >>> query_string = "name="+x
   >>> query_string
   'name=Guy%20Steele,%20Jr.'</pre>
<p>
</p>
<hr>


<h3><a name="4.62">4.62. If my program crashes with a bsddb (or anydbm)
database open, it gets corrupted. How come?</a></h3>

Databases opened for write access with the bsddb module (and often by the
anydbm module, since it will preferentially use bsddb) must explcitly be
closed using the close method of the database.  The underlying libdb package
caches database contents which need to be converted to on-disk form and
written, unlike regular open files which already have the on-disk bits in the
kernel's write buffer, where they can just be dumped by the kernel with the
program exits.
<p>
If you have initialized a new bsddb database but not written anything to it
before the program crashes, you will often wind up with a zero-length file and
encounter an exception the next time the file is opened.</p>
<p>
</p>
<hr>


<h3><a name="4.63">4.63. How do I make a Python script executable on
Unix?</a></h3>

You need to do two things: the script file's mode must be executable (include
the 'x' bit), and the first line must begin with #! followed by the pathname
for the Python interpreter.
<p>
The first is done by executing 'chmod +x scriptfile' or perhaps 'chmod 755
scriptfile'.</p>
<p>
The second can be done in a number of way.  The most straightforward way is to
write</p>
<p>
</p>
<pre>  #!/usr/local/bin/python</pre>

as the very first ine of your file - or whatever the pathname is where the
python interpreter is installed on your platform.
<p>
If you would like the script to be independent of where the python interpreter
lives, you can use the "env" program.  On almost all platforms, the following
woll work, assuming the python interpreter is in a directory on the user's
$PATH:</p>
<p>
</p>
<pre>  #! /usr/bin/env python</pre>

Note -- *don't* do this for CGI scripts.  The $PATH variable for CGI scripts
is often very minimal, so you need to use the actual absolute pathname of the
interpreter.
<p>
Occasionally, a user's environment is so full that the /usr/bin/env program
fails; or there's no env program at all. In that case, you can try the
following hack (due to Alex Rezinsky):</p>
<p>
</p>
<pre>  #! /bin/sh
  """:"
  exec python $0 ${1+"$@"}
  """</pre>

The disadvantage is that this defines the script's __doc__ string. However,
you can fix that by adding
<p>
</p>
<pre>  __doc__ = """...Whatever..."""</pre>
<p>
</p>
<hr>


<h3><a name="4.64">4.64. How do you remove duplicates from a list?</a></h3>

Generally, if you don't mind reordering the List
<p>
</p>
<pre>   if List:
      List.sort()
      last = List[-1]
      for i in range(len(List)-2, -1, -1):
          if last==List[i]: del List[i]
          else: last=List[i]</pre>

If all elements of the list may be used as dictionary keys (ie, they are all
hashable) this is often faster
<p>
</p>
<pre>   d = {}
   for x in List: d[x]=x
   List = d.values()</pre>

Also, for extremely large lists you might consider more optimal alternatives
to the first one. The second one is pretty good whenever it can be used.
<p>
</p>
<hr>


<h3><a name="4.65">4.65. Are there any known year 2000 problems in
Python?</a></h3>

I am not aware of year 2000 deficiencies in Python 1.5.  Python does very few
date calculations and for what it does, it relies on the C library functions. 
Python generally represent times either as seconds since 1970 or as a tuple
(year, month, day, ...) where the year is expressed with four digits, which
makes Y2K bugs unlikely.  So as long as your C library is okay, Python should
be okay.  Of course, I cannot vouch for <i>your</i> Python code!
<p>
Given the nature of freely available software, I have to add that this
statement is not legally binding.  The Python copyright notice contains the
following disclaimer:</p>
<p>
</p>
<pre>  STICHTING MATHEMATISCH CENTRUM AND CNRI DISCLAIM ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE, INCLUDING ALL IMPLIED WARRANTIES OF
  MERCHANTABILITY AND FITNESS, IN NO EVENT SHALL STICHTING MATHEMATISCH
  CENTRUM OR CNRI BE LIABLE FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL
  DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
  PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
  TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.</pre>

The good news is that <i>if</i> you encounter a problem, you have full source
available to track it down and fix it!
<p>
</p>
<hr>


<h3><a name="4.66">4.66. I want a version of map that applies a method to a
sequence of objects! Help!</a></h3>

Get fancy!
<p>
</p>
<pre>  def method_map(objects, method, arguments):
       """method_map([a,b], "flog", (1,2)) gives [a.flog(1,2), b.flog(1,2)]"""
       nobjects = len(objects)
       methods = map(getattr, objects, [method]*nobjects)
       return map(apply, methods, [arguments]*nobjects)</pre>

It's generally a good idea to get to know the mysteries of map and apply and
getattr and the other dynamic features of Python.
<p>
</p>
<hr>


<h3><a name="4.67">4.67. How do I generate random numbers in Python?</a></h3>

The standard library module "whrandom" implements a random number generator. 
Usage is simple:
<p>
</p>
<pre>    import whrandom</pre>
<pre>    whrandom.random()</pre>

This returns a random floating point number in the range [0, 1).
<p>
There are also other specialized generators in this module:</p>
<p>
</p>
<pre>    randint(a, b) chooses an integer in the range [a, b)
    choice(S) chooses from a given sequence
    uniform(a, b) chooses a floating point number in the range [a, b)</pre>

To force the random number generator's initial setting, use
<p>
</p>
<pre>    seed(x, y, z) set the seed from three integers in [1, 256)</pre>

There's also a class, whrandom, whoch you can instantiate to create
independent multiple random number generators.
<p>
The module "random" contains functions that approximate various standard
distributions.</p>
<p>
All this is documented in the library reference manual.  Note that the module
"rand" is obsolete.</p>
<p>
</p>
<hr>


<h3><a name="4.68">4.68. How do I access the serial (RS232) port?</a></h3>

There's a Windows serial communication module (for communication over RS 232
serial ports) at
<p>
</p>
<pre>  <a href="http://www.python.org/ftp/python/contrib/system/siomodule.readme">http://www.python.org/ftp/python/contrib/System/siomodule.README</a>
  <a href="http://www.python.org/ftp/python/contrib/system/siomodule.zip">http://www.python.org/ftp/python/contrib/System/siomodule.zip</a></pre>

For DOS, try Hans Nowak's Python-DX, which supports this, at:
<p>
</p>
<pre>  <a href="http://www.cuci.nl/~hnowak">http://www.cuci.nl/~hnowak</a>/</pre>

For Unix, search Deja News (using <a
href="http://www.python.org/locator">http://www.python.org/locator</a>/) for
"serial port" with author Mitch Chapman (his post is a little too long to
include here).
<p>
</p>
<hr>


<h3><a name="4.69">4.69. Images on Tk-Buttons don't work in Py15?</a></h3>

They <i>do</i> work, but you must keep your own <i>reference</i> to the image
object now. More verbosely, you must make sure that, say, a global variable or
a class attribute refers to the object.
<p>
Quoting Fredrik Lundh from the mailinglist:</p>
<p>
</p>
<pre>  Well, the Tk button widget keeps a reference to the internal
  photoimage object, but Tkinter does not.  So when the last
  Python reference goes away, Tkinter tells Tk to release the
  photoimage.  But since the image is in use by a widget, Tk
  doesn't destroy it.  Not completely.  It just blanks the image,
  making it completely transparent...</pre>
<pre>  And yes, there was a bug in the keyword argument handling
  in 1.4 that kept an extra reference around in some cases.  And
  when Guido fixed that bug in 1.5, he broke quite a few Tkinter
  programs...</pre>
<p>
</p>
<hr>


<h3><a name="4.70">4.70. Where is the math.py (socket.py, regex.py, etc.)
source file?</a></h3>

If you can't find a source file for a module it may be a builtin or
dynamically loaded module implemented in C, C++ or other compiled language. 
In this case you may not have the source file or it may be something like
mathmodule.c, somewhere in a C source directory (not on the Python Path).
<p>
Fredrik Lundh (<a
href="mailto:fredrik@pythonware.com">fredrik@pythonware.com</a>) explains (on
the python-list):</p>
<p>
There are (at least) three kinds of modules in Python: 1) modules written in
Python (.py); 2) modules written in C and dynamically loaded (.dll, .pyd, .so,
.sl, etc); 3) modules written in C and linked with the interpreter; to get a
list of these, type:</p>
<p>
</p>
<pre>    import sys
    print sys.builtin_module_names</pre>
<p>
</p>
<hr>


<h3><a name="4.71">4.71. How do I send mail from a Python script?</a></h3>

On Unix, it's very simple, using sendmail.  The location of the sendmail
program varies between systems; sometimes it is /usr/lib/sendmail, sometime
/usr/sbin/sendmail.  The sendmail manual page will help you out.  Here's some
sample code:
<p>
</p>
<pre>  SENDMAIL = "/usr/sbin/sendmail" # sendmail location
  import os
  p = os.popen("%s -t" % SENDMAIL, "w")
  p.write("To: <a href="mailto:cary@ratatosk.org">cary@ratatosk.org</a>\n")
  p.write("Subject: test\n")
  p.write("\n") # blank line separating headers from body
  p.write("Some text\n")
  p.write("some more text\n")
  sts = p.close()
  if sts != 0:
      print "Sendmail exit status", sts</pre>

On non-Unix systems (and on Unix systems too, of course!), you can use SMTP to
send mail to a nearby mail server.  A library for SMTP (smtplib.py) is
included in Python 1.5.1; in 1.5.2 it will be documented and extended. Here's
a very simple interactive mail sender that uses it:
<p>
</p>
<pre>    import sys, smtplib</pre>
<pre>    fromaddr = raw_input("From: ")
    toaddrs  = string.splitfields(raw_input("To: "), ',')
    print "Enter message, end with ^D:"
    msg = ''
    while 1:
        line = sys.stdin.readline()
        if not line:
            break
        msg = msg + line</pre>
<pre>    # The actual mail send
    server = smtplib.SMTP('localhost')
    server.sendmail(fromaddr, toaddrs, msg)
    server.quit()</pre>

This method will work on any host that supports an SMTP listener; otherwise,
you will have to ask the user for a host.
<p>
</p>
<hr>


<h3><a name="4.72">4.72. How do I avoid blocking in connect() of a
socket?</a></h3>

The select module is widely known to help with asynchronous I/O on sockets
once they are connected.  However, it is less than common knowledge how to
avoid blocking on the initial connect() call.  Jeremy Hylton has the following
advice (slightly edited):
<p>
To prevent the TCP connect from blocking, you can set the socket to
non-blocking mode.  Then when you do the connect(), you will either connect
immediately (unlikely) or get an exception that contains the errno. 
errno.EINPROGRESS indicates that the connection is in progress, but hasn't
finished yet.  Different OSes will return different errnos, so you're going to
have to check.  I can tell you that different versions of Solaris return
different errno values.</p>
<p>
In Python 1.5 and later, you can use connect_ex() to avoid creating an
exception.  It will just return the errno value.</p>
<p>
To poll, you can call connect_ex() again later -- 0 or errno.EISCONN indicate
that you're connected -- or you can pass this socket to select (checking to
see if it is writeable).</p>
<p>
</p>
<hr>


<h3><a name="4.73">4.73. How do I specify hexadecimal and octal
integers?</a></h3>

To specify an octal digit, precede the octal value with a zero.  For example,
to set the variable "a" to the octal value "10" (8 in decimal), type:
<p>
</p>
<pre>    >>> a = 010</pre>

To verify that this works, you can type "a" and hit enter while in the
interpreter, which will cause Python to spit out the current value of "a" in
decimal:
<p>
</p>
<pre>    >>> a
    8</pre>

Hexadecimal is just as easy.  Simply precede the hexadecimal number with a
zero, and then a lower or uppercase "x".  Hexadecimal digits can be specified
in lower or uppercase.  For example, in the Python interpreter:
<p>
</p>
<pre>    >>> a = 0xa5
    >>> a
    165
    >>> b = 0XB2
    >>> b
    178</pre>
<p>
</p>
<hr>


<h3><a name="4.74">4.74. How to get a single keypress at a time?</a></h3>

For Windows, see question 8.2.  Here is an answer for Unix.
<p>
There are several solutions; some involve using curses, which is a pretty big
thing to learn.  Here's a solution without curses, due to Andrew Kuchling
(adapted from code to do a PGP-style randomness pool):</p>
<p>
</p>
<pre>        import termios, TERMIOS, sys, os
        fd = sys.stdin.fileno()
        old = termios.tcgetattr(fd)
        new = termios.tcgetattr(fd)
        new[3] = new[3] &amp; ~TERMIOS.ICANON &amp; ~TERMIOS.ECHO
        new[6][TERMIOS.VMIN] = 1
        new[6][TERMIOS.VTIME] = 0
        termios.tcsetattr(fd, TERMIOS.TCSANOW, new)
        s = ''    # We'll save the characters typed and add them to the pool.
        try:
            while 1:
                c = os.read(fd, 1)
                print "Got character", `c`
                s = s+c
        finally:
            termios.tcsetattr(fd, TERMIOS.TCSAFLUSH, old)</pre>

You need the termios module for any of this to work, and I've only tried it on
Linux, though it should work elsewhere.  It turns off stdin's echoing and
disables canonical mode, and then reads a character at a time from stdin,
noting the time after each keystroke.
<p>
</p>
<hr>


<h3><a name="4.75">4.75. How can I overload constructors (or methods) in
Python?</a></h3>

(This actually applies to all methods, but somehow the question usually comes
up first in the context of constructors.)
<p>
Where in C++ you'd write</p>
<p>
</p>
<pre>    class C {
        C() { cout &lt;&lt; "No arguments\n"; }
        C(int i) { cout &lt;&lt; "Argument is " &lt;&lt; i &lt;&lt; "\n"; }
    }</pre>

in Python you have to write a single constructor that catches all cases using
default arguments.  For example:
<p>
</p>
<pre>    class C:
        def __init__(self, i=None):
            if i is None:
                print "No arguments"
            else:
                print "Argument is", i</pre>

This is not entirely equivalent, but close enough in practice.
<p>
You could also try a variable-length argument list, e.g.</p>
<p>
</p>
<pre>        def __init__(self, *args):
            ....</pre>

The same approach works for all method definitions.
<p>
</p>
<hr>


<h3><a name="4.76">4.76. How do I pass keyword arguments from one method to
another?</a></h3>

Use apply.  For example:
<p>
</p>
<pre>    class Account:
        def __init__(self, **kw):
            self.accountType = kw.get('accountType')
            self.balance = kw.get('balance')</pre>
<pre>    class CheckingAccount(Account):
        def __init__(self, **kw):
            kw['accountType'] = 'checking'
            apply(Account.__init__, (self,), kw)</pre>
<pre>    myAccount = CheckingAccount(balance=100.00)</pre>
<p>
</p>
<hr>


<h3><a name="4.77">4.77. What module should I use to help with generating
HTML?</a></h3>

Check out HTMLgen written by Robin Friedrich. It's a class library of objects
corresponding to all the HTML 3.2 markup tags. It's used when you are writing
in Python and wish to synthesize HTML pages for generating a web or for CGI
forms, etc.
<p>
It can be found in the FTP contrib area on python.org or on the Starship. Use
the search engines there to locate the latest version.</p>
<p>
It might also be useful to consider DocumentTemplate, which offers clear
separation between Python code and HTML code.  DocumentTemplate is part of the
Bobo objects publishing system (http:/www.digicool.com/releases) but can be
used independantly of course!</p>
<p>
</p>
<hr>


<h3><a name="4.78">4.78. How do I create documentation from doc
strings?</a></h3>

Use gendoc, by Daniel Larson.  See
<p>
<a
href="http://starship.skyport.net/crew/danilo">http://starship.skyport.net/crew/danilo</a>/</p>
<p>
It can create HTML from the doc strings in your Python source code.</p>
<p>
</p>
<hr>


<h3><a name="4.79">4.79. How do I read (or write) binary data?</a></h3>

For complex data formats, it's best to use use the struct module.  It's
documented in the library reference. It allows you to take a string read from
a file containing binary data (usually numbers) and convert it to Python
objects; and vice versa.
<p>
For example, the following code reads two 2-byte integers and one 4-byte
integer in big-endian format from a file:</p>
<p>
</p>
<pre>  import struct</pre>
<pre>  f = open(filename, "rb")  # Open in binary mode for portability
  s = f.read(8)
  x, y, z = struct.unpack(">hhl", s)</pre>

The '>' in the format string forces bin-endian data; the letter 'h' reads one
"short integer" (2 bytes), and 'l' reads one "long integer" (4 bytes) from the
string.
<p>
For data that is more regular (e.g. a homogeneous list of ints or floats), you
can also use the array module, also documented in the library reference.</p>
<p>
</p>
<hr>


<h3><a name="4.80">4.80. I can't get key bindings to work in Tkinter</a></h3>

An oft-heard complaint is that event handlers bound to events with the bind()
method don't get handled even when the appropriate key is pressed.
<p>
The most common cause is that the widget to which the binding applies doesn't
have "keyboard focus".  Check out the Tk documentation for the focus command. 
Usually a widget is given the keyboard focus by clicking in it (but not for
labels; see the taketocus option).</p>
<p>
</p>
<hr>


<h3><a name="4.81">4.81. "import crypt" fails</a></h3>

[Unix]
<p>
Starting with Python 1.5, the crypt module is disabled by default. In order to
enable it, you must go into the Python source tree and edit the file
Modules/Setup to enable it (remove a '#' sign in front of the line starting
with '#crypt').  Then rebuild. You may also have to add the string '-lcrypt'
to that same line.</p>
<p>
</p>
<hr>


<h3><a name="4.82">4.82. Are there coding standards or a style guide for
Python programs?</a></h3>

Yes, Guido has written the "Python Style Guide".  See <a
href="http://www.python.org/doc/essays/styleguide.html">http://www.python.org/doc/essays/styleguide.html</a>
<p>
</p>
<hr>


<h3><a name="4.83">4.83. How do I freeze Tkinter applications?</a></h3>

Freeze is a tool to create stand-alone applications (see 4.28).
<p>
When freezing Tkinter applications, the applications will not be truly
stand-alone, as the application will still need the tcl and tk libraries.</p>
<p>
One solution is to ship the application with the tcl and tk libraries, and
point to them at run-time using the TCL_LIBRARY and TK_LIBRARY environment
variables.</p>
<p>
To get truly stand-alone applications, the Tcl scripts that form the library
have to be integrated into the application as well. One tool supporting that
is SAM (stand-alone modules), which is part of the Tix distribution (<a
href="http://tix.mne.com">http://tix.mne.com</a>). Build Tix with SAM enabled,
perform the appropriate call to Tclsam_init etc inside Python's
Modules/tkappinit.c, and link with libtclsam and libtksam (you might include
the Tix libraries as well).</p>
<p>
</p>
<hr>


<h3><a name="4.84">4.84. How do I create static class data and static class
methods?</a></h3>

[Tim Peters, <a href="mailto:tim_one@email.msn.com">tim_one@email.msn.com</a>]
<p>
Static data (in the sense of C++ or Java) is easy; static methods (again in
the sense of C++ or Java) are not supported directly.</p>
<p>
STATIC DATA</p>
<p>
For example,</p>
<p>
</p>
<pre>    class C:
        count = 0   # number of times C.__init__ called</pre>
<pre>        def __init__(self):
            C.count = C.count + 1</pre>
<pre>        def getcount(self):
            return C.count  # or return self.count</pre>

c.count also refers to C.count for any c such that isinstance(c, C) holds,
unless overridden by c itself or by some class on the base-class search path
from c.__class__ back to C.
<p>
Caution:  within a method of C,</p>
<p>
</p>
<pre>    self.count = 42</pre>

creates a new and unrelated instance vrbl named "count" in self's own dict. 
So rebinding of a class-static data name needs the
<p>
</p>
<pre>    C.count = 314</pre>

form whether inside a method or not.
<p>
</p>
<p>
STATIC METHODS</p>
<p>
Static methods (as opposed to static data) are unnatural in Python,
because</p>
<p>
</p>
<pre>    C.getcount</pre>

returns an unbound method object, which can't be invoked without supplying an
instance of C as the first argument.
<p>
The intended way to get the effect of a static method is via a module-level
function:</p>
<p>
</p>
<pre>    def getcount():
        return C.count</pre>

If your code is structured so as to define one class (or tightly related class
hierarchy) per module, this supplies the desired encapsulation.
<p>
Several tortured schemes for faking static methods can be found by searching
DejaNews.  Most people feel such cures are worse than the disease.  Perhaps
the least obnoxious is due to Pekka Pessi (mailto:<a
href="mailto:ppessi@hut.fi">ppessi@hut.fi</a>):</p>
<p>
</p>
<pre>    # helper class to disguise function objects
    class _static:
        def __init__(self, f):
            self.__call__ = f</pre>
<pre>    class C:
        count = 0</pre>
<pre>        def __init__(self):
            C.count = C.count + 1</pre>
<pre>        def getcount():
            return C.count
        getcount = _static(getcount)</pre>
<pre>        def sum(x, y):
            return x + y
        sum = _static(sum)</pre>
<pre>    C(); C()
    c = C()
    print C.getcount()  # prints 3
    print c.getcount()  # prints 3
    print C.sum(27, 15) # prints 42</pre>
<p>
</p>
<hr>


<h3><a name="4.85">4.85. __import__('x.y.z') returns &lt;module 'x'>; how do I
get z?</a></h3>

Try
<p>
</p>
<pre>   __import__('x.y.z').y.z</pre>

For more realistic situations, you may have to do something like
<p>
</p>
<pre>   m = __import__(s)
   for i in string.split(s, ".")[1:]:
       m = getattr(m, i)</pre>
<p>
</p>
<hr>


<h3><a name="4.86">4.86. Basic thread wisdom</a></h3>

If you write a simple test program like this:
<p>
</p>
<pre>  import thread
  def run(name, n):
      for i in range(n): print name, i
  for i in range(10):
      thread.start_new(run, (i, 100))</pre>

none of the threads seem to run!  The reason is that as soon as the main
thread exits, all threads are killed.
<p>
A simple fix is to add a sleep to the end of the program, sufficiently long
for all threads to finish:</p>
<p>
</p>
<pre>  import thread, time
  def run(name, n):
      for i in range(n): print name, i
  for i in range(10):
      thread.start_new(run, (i, 100))
  time.sleep(10) # &lt;----------------------------!</pre>

But now (on many platforms) the threads don't run in parallel, but appear to
run sequentially, one at a time!  The reason is that the OS thread scheduler
doesn't start a new thread until the previous thread is blocked.
<p>
A simple fix is to add a tiny sleep to the start of the run function:</p>
<p>
</p>
<pre>  import thread, time
  def run(name, n):
      time.sleep(0.001) # &lt;---------------------!
      for i in range(n): print name, i
  for i in range(10):
      thread.start_new(run, (i, 100))
  time.sleep(10)</pre>

Some more hints:
<p>
Instead of using a time.sleep() call at the end, it's better to use some kind
of semaphore mechanism.  One idea is to use a the Queue module to create a
queue object, let each thread append a token to the queue when it finishes,
and let the main thread read as many tokens from the queue as there are
threads.</p>
<p>
Use the threading module instead of the thread module.  It's part of Python
since version 1.5.1.  It takes care of all these details, and has many other
nice features too!</p>
<p>
</p>
<hr>


<h3>5. Extending Python</h3>
<hr>


<h3><a name="5.1">5.1. Can I create my own functions in C?</a></h3>

Yes, you can create built-in modules containing functions, variables,
exceptions and even new types in C.  This is explained in the document
"Extending and Embedding the Python Interpreter" (the LaTeX file Doc/ext.tex).
 Also read the chapter on dynamic loading.
<p>
There's more information on this in each of the Python books: Programming
Python, Internet Programming with Python, and Das Python-Buch (in German).</p>
<p>
</p>
<hr>


<h3><a name="5.2">5.2. Can I create my own functions in C++?</a></h3>

Yes, using the C-compatibility features found in C++.  Basically you place
extern "C" { ... } around the Python include files and put extern "C" before
each function that is going to be called by the Python interpreter.  Global or
static C++ objects with constructors are probably not a good idea.
<p>
</p>
<hr>


<h3><a name="5.3">5.3. How can I execute arbitrary Python statements from
C?</a></h3>

The highest-level function to do this is PyRun_SimpleString() which takes a
single string argument which is executed in the context of module __main__ and
returns 0 for success and -1 when an exception occurred (including
SyntaxError).  If you want more control, use PyRun_String(); see the source
for PyRun_SimpleString() in Python/pythonrun.c.
<p>
</p>
<hr>


<h3><a name="5.4">5.4. How can I evaluate an arbitrary Python expression from
C?</a></h3>

Call the function PyRun_String() from the previous question with the start
symbol eval_input (Py_eval_input starting with 1.5a1); it parses an
expression, evaluates it and returns its value.
<p>
</p>
<hr>


<h3><a name="5.5">5.5. How do I extract C values from a Python
object?</a></h3>

That depends on the object's type.  If it's a tuple, PyTupleSize(o) returns
its length and PyTuple_GetItem(o, i) returns its i'th item; similar for lists
with PyListSize(o) and PyList_GetItem(o, i).  For strings, PyString_Size(o)
returns its length and PyString_AsString(o) a pointer to its value (note that
Python strings may contain null bytes so strlen() is not safe).  To test which
type an object is, first make sure it isn't NULL, and then use
PyString_Check(o), PyTuple_Check(o), PyList_Check(o), etc.
<p>
There is also a high-level API to Python objects which is provided by the
so-called 'abstract' interface -- read Include/abstract.h for further details.
 It allows for example interfacing with any kind of Python sequence (e.g.
lists and tuples) using calls like PySequence_Length(), PySequence_GetItem(),
etc.) as well as many other useful protocols.</p>
<p>
</p>
<hr>


<h3><a name="5.6">5.6. How do I use Py_BuildValue() to create a tuple of
arbitrary length?</a></h3>

You can't.  Use t = PyTuple_New(n) instead, and fill it with objects using
PyTuple_SetItem(t, i, o) -- note that this "eats" a reference count of o. 
Similar for lists with PyList_New(n) and PyList_SetItem(l, i, o).  Note that
you <i>must</i> set all the tuple items to some value before you pass the
tuple to Python code -- PyTuple_New(n) initializes them to NULL, which isn't a
valid Python value.
<p>
</p>
<hr>


<h3><a name="5.7">5.7. How do I call an object's method from C?</a></h3>

Here's a function (untested) that might become part of the next release in
some form.  It uses &lt;stdarg.h> to allow passing the argument list on to
vmkvalue():
<p>
</p>
<pre>        object *call_method(object *inst, char *methodname, char *format, ...)
        {
                object *method;
                object *args;
                object *result;
                va_list va;
                method = getattr(inst, methodname);
                if (method == NULL) return NULL;
                va_start(va, format);
                args = vmkvalue(format, va);
                va_end(va);
                if (args == NULL) {
                        DECREF(method);
                        return NULL;
                }
                result = call_object(method, args);
                DECREF(method);
                DECREF(args);
                return result;
        }</pre>

This works for any instance that has methods -- whether built-in or
user-defined.  You are responsible for eventually DECREF'ing the return value.
<p>
To call, e.g., a file object's "seek" method with arguments 10, 0 (assuming
the file object pointer is "f"):</p>
<p>
</p>
<pre>        res = call_method(f, "seek", "(OO)", 10, 0);
        if (res == NULL) {
                ... an exception occurred ...
        }
        else {
                DECREF(res);
        }</pre>

Note that since call_object() <i>always</i> wants a tuple for the argument
list, to call a function without arguments, pass "()" for the format, and to
call a function with one argument, surround the argument in parentheses, e.g.
"(i)".
<p>
</p>
<hr>


<h3><a name="5.8">5.8. How do I catch the output from PyErr_Print() (or
anything that prints to stdout/stderr)?</a></h3>

(Due to Mark Hammond):
<p>
In Python code, define an object that supports the "write()" method. Redirect
sys.stdout and sys.stderr to this object. Call print_error, or just allow the
standard traceback mechanism to work. Then, the output will go wherever your
write() method sends it.</p>
<p>
The easiest way to do this is to use the StringIO class in the standard
library.</p>
<p>
Sample code and use for catching stdout:</p>
<pre>        >>> class StdoutCatcher:
        ...  def __init__(self):
        ...   self.data = ''
        ...  def write(self, stuff):
        ...   self.data = self.data + stuff
        ...  
        >>> import sys
        >>> sys.stdout = StdoutCatcher()
        >>> print 'foo'
        >>> print 'hello world!'
        >>> sys.stderr.write(sys.stdout.data)
        foo
        hello world!</pre>
<p>
</p>
<hr>


<h3><a name="5.9">5.9. How do I access a module written in Python from
C?</a></h3>

You can get a pointer to the module object as follows:
<p>
</p>
<pre>        module = PyImport_ImportModule("&lt;modulename>");</pre>

If the module hasn't been imported yet (i.e. it is not yet present in
sys.modules), this initializes the module; otherwise it simply returns the
value of sys.modules["&lt;modulename>"].  Note that it doesn't enter the
module into any namespace -- it only ensures it has been initialized and is
stored in sys.modules.
<p>
You can then access the module's attributes (i.e. any name defined in the
module) as follows:</p>
<p>
</p>
<pre>        attr = PyObject_GetAttrString(module, "&lt;attrname>");</pre>

Calling PyObject_SetAttrString(), to assign to variables in the module, also
works.
<p>
</p>
<hr>


<h3><a name="5.10">5.10. How do I interface to C++ objects from
Python?</a></h3>

Depending on your requirements, there are many approaches.  To do this
manually, begin by reading the "Extending and Embedding" document
(Doc/ext.tex, see also <a
href="http://www.python.org/doc">http://www.python.org/doc</a>/).  Realize
that for the Python run-time system, there isn't a whole lot of difference
between C and C++ -- so the strategy to build a new Python type around a C
structure (pointer) type will also work for C++ objects.
<p>
A useful automated approach (which also works for C) is SWIG: <a
href="http://www.cs.utah.edu/~beazley/SWIG">http://www.cs.utah.edu/~beazley/SWIG</a>/.</p>
<p>
</p>
<hr>


<h3><a name="5.11">5.11. mSQLmodule (or other old module) won't build with
Python 1.5 (or later)</a></h3>

Since python-1.4 "Python.h" will have the file includes needed in an extension
module. Backward compatibility is dropped after version 1.4 and therefore
mSQLmodule.c will not build as "allobjects.h" cannot be found. The following
change in mSQLmodule.c is harmless when building it with 1.4 and necessary
when doing so for later python versions:
<p>
Remove lines:</p>
<p>
</p>
<pre>        #include "allobjects.h"
        #include "modsupport.h"</pre>

And insert instead:
<p>
</p>
<pre>        #include "Python.h"</pre>

You may also need to add
<p>
</p>
<pre>                #include "rename2.h"</pre>

if the module uses "old names".
<p>
This may happen with other ancient python modules as well, and the same fix
applies.</p>
<p>
</p>
<hr>


<h3><a name="5.12">5.12. I added a module using the Setup file and the make
fails! Huh?</a></h3>

Setup must end in a newline, if there is no newline there it gets very sad. 
Aside from this possibility, maybe you have other non-Python-specific linkage
problems.
<p>
</p>
<hr>


<h3><a name="5.13">5.13. I want to compile a Python module on my Red Hat Linux
system, but some files are missing.</a></h3>

Red Hat's RPM for Python doesn't include the /usr/lib/python1.x/config/
directory, which contains various files required for compiling Python
extensions. Install the python-devel RPM to get the necessary files.
<p>
</p>
<hr>


<h3>6. Python's design</h3>
<hr>


<h3><a name="6.1">6.1. Why isn't there a switch or case statement in
Python?</a></h3>

You can do this easily enough with a sequence of if... elif... elif... else. 
There have been some proposals for switch statement syntax, but there is no
consensus (yet) on whether and how to do range tests.
<p>
</p>
<hr>


<h3><a name="6.2">6.2. Why does Python use indentation for grouping of
statements?</a></h3>

Basically I believe that using indentation for grouping is extremely elegant
and contributes a lot to the clarity of the average Python program.  Most
people learn to love this feature after a while. Some arguments for it:
<p>
Since there are no begin/end brackets there cannot be a disagreement between
grouping perceived by the parser and the human reader.  I remember long ago
seeing a C fragment like this:</p>
<p>
</p>
<pre>        if (x &lt;= y)
                x++;
                y--;
        z++;</pre>

and staring a long time at it wondering why y was being decremented even for x
> y...  (And I wasn't a C newbie then either.)
<p>
Since there are no begin/end brackets, Python is much less prone to
coding-style conflicts.  In C there are loads of different ways to place the
braces (including the choice whether to place braces around single statements
in certain cases, for consistency).  If you're used to reading (and writing)
code that uses one style, you will feel at least slightly uneasy when reading
(or being required to write) another style. Many coding styles place begin/end
brackets on a line by themself. This makes programs considerably longer and
wastes valuable screen space, making it harder to get a good overview over a
program. Ideally, a function should fit on one basic tty screen (say, 20
lines).  20 lines of Python are worth a LOT more than 20 lines of C. This is
not solely due to the lack of begin/end brackets (the lack of declarations
also helps, and the powerful operations of course), but it certainly
helps!</p>
<p>
</p>
<hr>


<h3><a name="6.3">6.3. Why are Python strings immutable?</a></h3>

There are two advantages.  One is performance: knowing that a string is
immutable makes it easy to lay it out at construction time -- fixed and
unchanging storage requirements.  (This is also one of the reasons for the
distinction between tuples and lists.)  The other is that strings in Python
are considered as "elemental" as numbers.  No amount of activity will change
the value 8 to anything else, and in Python, no amount of activity will change
the string "eight" to anything else.  (Adapted from Jim Roskind)
<p>
</p>
<hr>


<h3><a name="6.4">6.4. Why don't strings have methods like index() or sort(),
like lists?</a></h3>

Good question.  Strings currently don't have methods at all (likewise tuples
and numbers).  Long ago, it seemed unnecessary to implement any of these
functions in C, so a standard library module "string" written in Python was
created that performs string related operations.  Since then, the cry for
performance has moved most of them into the built-in module strop (this is
imported by module string, which is still the preferred interface, without
loss of performance except during initialization).  Some of these functions
(e.g. index()) could easily be implemented as string methods instead, but
others (e.g. sort()) can't, since their interface prescribes that they modify
the object, while strings are immutable (see the previous question).
<p>
</p>
<hr>


<h3><a name="6.5">6.5. Why does Python use methods for some functionality
(e.g. list.index()) but functions for other (e.g. len(list))?</a></h3>

Functions are used for those operations that are generic for a group of types
and which should work even for objects that don't have methods at all (e.g.
numbers, strings, tuples).  Also, implementing len(), max(), min() as a
built-in function is actually less code than implementing them as methods for
each type.  One can quibble about individual cases but it's really too late to
change such things fundamentally now.
<p>
</p>
<hr>


<h3><a name="6.6">6.6. Why can't I derive a class from built-in types (e.g.
lists or files)?</a></h3>

This is caused by the relatively late addition of (user-defined) classes to
the language -- the implementation framework doesn't easily allow it.  See the
answer to question 4.2 for a work-around.  This <i>may</i> be fixed in the
(distant) future.
<p>
</p>
<hr>


<h3><a name="6.7">6.7. Why must 'self' be declared and used explicitly in
method definitions and calls?</a></h3>

By asking this question you reveal your C++ background. :-) When I added
classes, this was (again) the simplest way of implementing methods without too
many changes to the interpreter.  I borrowed the idea from Modula-3.  It turns
out to be very useful, for a variety of reasons.
<p>
First, it makes it more obvious that you are using a method or instance
attribute instead of a local variable.  Reading "self.x" or "self.meth()"
makes it absolutely clear that an instance variable or method is used even if
you don't know the class definition by heart. In C++, you can sort of tell by
the lack of a local variable declaration (assuming globals are rare or easily
recognizable) -- but in Python, there are no local variable declarations, so
you'd have to look up the class definition to be sure.</p>
<p>
Second, it means that no special syntax is necessary if you want to explicitly
reference or call the method from a particular class.  In C++, if you want to
use a method from base class that is overridden in a derived class, you have
to use the :: operator -- in Python you can write baseclass.methodname(self,
&lt;argument list>).  This is particularly useful for __init__() methods, and
in general in cases where a derived class method wants to extend the base
class method of the same name and thus has to call the base class method
somehow.</p>
<p>
Lastly, for instance variables, it solves a syntactic problem with assignment:
since local variables in Python are (by definition!) those variables to which
a value assigned in a function body (and that aren't explicitly declared
global), there has to be some way to tell the interpreter that an assignment
was meant to assign to an instance variable instead of to a local variable,
and it should preferably be syntactic (for efficiency reasons).  C++ does this
through declarations, but Python doesn't have declarations and it would be a
pity having to introduce them just for this purpose.  Using the explicit
"self.var" solves this nicely.  Similarly, for using instance variables,
having to write "self.var" means that references to unqualified names inside a
method don't have to search the instance's directories.</p>
<p>
</p>
<hr>


<h3><a name="6.8">6.8. Can't you emulate threads in the interpreter instead of
relying on an OS-specific thread implementation?</a></h3>

Unfortunately, the interpreter pushes at least one C stack frame for each
Python stack frame.  Also, extensions can call back into Python at almost
random moments.  Therefore a complete threads implementation requires thread
support for C.
<p>
</p>
<hr>


<h3><a name="6.9">6.9. Why can't lambda forms contain statements?</a></h3>

Python lambda forms cannot contain statements because Python's syntactic
framework can't handle statements nested inside expressions.
<p>
However, in Python, this is not a serious problem.  Unlike lambda forms in
other languages, where they add functionality, Python lambdas are only a
shorthand notation if you're too lazy to define a function.</p>
<p>
Functions are already first class objects in Python, and can be declared in a
local scope.  Therefore the only advantage of using a lambda form instead of a
locally-defined function is that you don't need to invent a name for the
function -- but that's just a local variable to which the function object
(which is exactly the same type of object that a lambda form yields) is
assigned!</p>
<p>
</p>
<hr>


<h3><a name="6.10">6.10. Why don't lambdas have access to variables defined in
the containing scope?</a></h3>

Because they are implemented as ordinary functions. See question 4.5 above.
<p>
</p>
<hr>


<h3><a name="6.11">6.11. Why can't recursive functions be defined inside other
functions?</a></h3>

See question 4.5 above.  But actually recursive functions can be defined in
other functions with some trickery.
<p>
</p>
<pre>    def test():
        class factorial:
             def __call__(self, n):
                 if n&lt;=1: return 1
                 return n * self(n-1)
        return factorial()</pre>
<pre>    fact = test()</pre>

The instance created by factorial() above acts like the recursive factorial
function.
<p>
Mutually recursive functions can be passed to each other as arguments.</p>
<p>
</p>
<hr>


<h3><a name="6.12">6.12. Why is there no more efficient way of iterating over
a dictionary than first constructing the list of keys()?</a></h3>

Have you tried it?  I bet it's fast enough for your purposes!  In most cases
such a list takes only a few percent of the space occupied by the dictionary. 
Apart from the fixed header, the list needs only 4 bytes (the size of a
pointer) per key.  A dictionary uses 12 bytes per key plus between 30 and 70
percent hash table overhead, plus the space for the keys and values. By
necessity, all keys are distinct objects, and a string object (the most common
key type) costs at least 20 bytes plus the length of the string.  Add to that
the values contained in the dictionary, and you see that 4 bytes more per item
really isn't that much more memory...
<p>
A call to dict.keys() makes one fast scan over the dictionary (internally, the
iteration function does exist) copying the pointers to the key objects into a
pre-allocated list object of the right size. The iteration time isn't lost
(since you'll have to iterate anyway -- unless in the majority of cases your
loop terminates very prematurely (which I doubt since you're getting the keys
in random order).</p>
<p>
I don't expose the dictionary iteration operation to Python programmers
because the dictionary shouldn't be modified during the entire iteration -- if
it is, there's a small chance that the dictionary is reorganized because the
hash table becomes too full, and then the iteration may miss some items and
see others twice.  Exactly because this only occurs rarely, it would lead to
hidden bugs in programs: it's easy never to have it happen during test runs if
you only insert or delete a few items per iteration -- but your users will
surely hit upon it sooner or later.</p>
<p>
</p>
<hr>


<h3><a name="6.13">6.13. Can Python be compiled to machine code, C or some
other language?</a></h3>

Not easily.  Python's high level data types, dynamic typing of objects and
run-time invocation of the interpreter (using eval() or exec) together mean
that a "compiled" Python program would probably consist mostly of calls into
the Python run-time system, even for seemingly simple operations like "x+1". 
Thus, the performance gain would probably be minimal.
<p>
Internally, Python source code is always translated into a "virtual machine
code" or "byte code" representation before it is interpreted (by the "Python
virtual machine" or "bytecode interpreter").  In order to avoid the overhead
of parsing and translating modules that rarely change over and over again,
this byte code is written on a file whose name ends in ".pyc" whenever a
module is parsed (from a file whose name ends in ".py").  When the
corresponding .py file is changed, it is parsed and translated again and the
.pyc file is rewritten.</p>
<p>
There is no performance difference once the .pyc file has been loaded (the
bytecode read from the .pyc file is exactly the same as the bytecode created
by direct translation).  The only difference is that loading code from a .pyc
file is faster than parsing and translating a .py file, so the presence of
precompiled .pyc files will generally improve start-up time of Python scripts.
 If desired, the Lib/compileall.py module/script can be used to force creation
of valid .pyc files for a given set of modules.</p>
<p>
Note that the main script executed by Python, even if its filename ends in
.py, is not compiled to a .pyc file.  It is compiled to bytecode, but the
bytecode is not saved to a file.</p>
<p>
If you are looking for a way to translate Python programs in order to
distribute them in binary form, without the need to distribute the interpreter
and library as well, have a look at the freeze.py script in the Tools/freeze
directory.  This creates a single binary file incorporating your program, the
Python interpreter, and those parts of the Python library that are needed by
your program.  Of course, the resulting binary will only run on the same type
of platform as that used to create it.</p>
<p>
</p>
<hr>


<h3><a name="6.14">6.14. How does Python manage memory? Why not full garbage
collection?</a></h3>

Python uses reference counting memory management. This means that when an
object is no longer in use Python frees the object automatically, with a few
exceptions.
<p>
1) if the object lies on a circular reference path it won't be freed unless
the circularities are broken. EG:</p>
<p>
</p>
<pre>       List = [None]
       List[0] = List</pre>

List will not be freed unless the circularity (List[0] is List) is broken. The
reason List will not be freed is because although it may become inaccessible
the list contains a reference to itself, and reference counting only
deallocates an object when all references to an object are destroyed.  To
break the circular reference path we must destroy the reference, as in
<p>
</p>
<pre>       List[0] = None</pre>

So, if your program creates circular references (and if it is long running
and/or consumes lots of memory) it may have to do some explicit management of
circular structures.  In many application domains this is needed rarely, if
ever.
<p>
2) Sometimes objects get stuck in "tracebacks" temporarily and hence are not
deallocated when you might expect.  Clear the tracebacks via</p>
<p>
</p>
<pre>       import sys
       sys.exc_traceback = sys.last_traceback = None</pre>

Tracebacks are used for reporting errors and implementing debuggers and
related things.  They contain a portion of the program state extracted during
the handling of an exception (usually the most recent exception).
<p>
In the absence of circularities and modulo tracebacks, Python programs need
not explicitly manage memory.</p>
<p>
It is often suggested that Python could benefit from fully general garbage
collection. It's looking less and less likely that Python will ever get
"automatic" garbage collection (GC).  For one thing, unless this were added to
C as a standard feature, it's a portability pain in the ass. And yes, I know
about the Xerox library.  It has bits of assembler code for <i>most</i>
<i>common</i> platforms.  Not for all.  And although it is mostly transparent,
it isn't completely transparent (when I once linked Python with it, it dumped
core).</p>
<p>
"Proper" GC also becomes a problem when Python gets embedded into other
applications.  While in a stand-alone Python it may be fine to replace the
standard malloc() and free() with versions provided by the GC library, an
application embedding Python may want to have its <i>own</i> substitute for
malloc() and free(), and may not want Python's.  Right now, Python works with
anything that implements malloc() and free() properly.</p>
<p>
Besides, the predictability of destructor calls in Python is kind of
attractive.  With GC, the following code (which is fine in current Python)
will run out of file descriptors long before it runs out of memory:</p>
<p>
</p>
<pre>        for file in &lt;very long list of files>:
                f = open(file)
                c = file.read(1)</pre>

Using the current reference counting and destructor scheme, each new
assignment to f closes the previous file.  Using GC, this is not guaranteed. 
Sure, you can think of ways to fix this.  But it's not off-the-shelf
technology.
<p>
All that said, somebody has managed to add GC to Python using the GC library
fromn Xerox, so you can see for yourself.  See</p>
<p>
</p>
<pre>        <a href="http://starship.skyport.net/crew/gandalf/gc-ss.html">http://starship.skyport.net/crew/gandalf/gc-ss.html</a></pre>

See also question 4.17 for ways to plug some common memory leaks manually.
<p>
</p>
<hr>


<h3><a name="6.15">6.15. Why are there separate tuple and list data
types?</a></h3>

This is done so that tuples can be immutable while lists are mutable.
<p>
Immutable tuples are useful in situations where you need to pass a few items
to a function and don't want the function to modify the tuple; for
example,</p>
<p>
</p>
<pre>        point1 = (120, 140)
        point2 = (200, 300)
        record(point1, point2)
        draw(point1, point2)</pre>

You don't want to have to think about what would happen if record() changed
the coordinates -- it can't, because the tuples are immutable.
<p>
On the other hand, when creating large lists dynamically, it is absolutely
crucial that they are mutable -- adding elements to a tuple one by one
requires using the concatenation operator, which makes it quadratic in
time.</p>
<p>
As a general guideline, use tuples like you would use structs in C or records
in Pascal, use lists like (variable length) arrays.</p>
<p>
</p>
<hr>


<h3><a name="6.16">6.16. How are lists implemented?</a></h3>

Despite what a Lisper might think, Python's lists are really variable-length
arrays.  The implementation uses a contiguous array of references to other
objects, and keeps a pointer to this array (as well as its length) in a list
head structure.
<p>
This makes indexing a list (a[i]) an operation whose cost is independent of
the size of the list or the value of the index.</p>
<p>
When items are appended or inserted, the array of references is resized. Some
cleverness is applied to improve the performance of appending items
repeatedly; when the array must be grown, some extra space is allocated so the
next few times don't require an actual resize.</p>
<p>
</p>
<hr>


<h3><a name="6.17">6.17. How are dictionaries implemented?</a></h3>

Python's dictionaries are implemented as resizable hash tables.
<p>
Compared to B-trees, this gives better performance for lookup (the most common
operation by far) under most circumstances, and the implementation is
simpler.</p>
<p>
</p>
<hr>


<h3><a name="6.18">6.18. Why must dictionary keys be immutable?</a></h3>

The hash table implementation of dictionaries uses a hash value calculated
from the key value to find the key.  If the key were a mutable object, its
value could change, and thus its hash could change.  But since whoever changes
the key object can't tell that is incorporated in a dictionary, it can't move
the entry around in the dictionary.  Then, when you try to look up the same
object in the dictionary, it won't be found, since its hash value is
different; and if you try to look up the old value, it won't be found either,
since the value of the object found in that hash bin differs.
<p>
If you think you need to have a dictionary indexed with a list, try to use a
tuple instead.  The function tuple(l) creates a tuple with the same entries as
the list l.</p>
<p>
Some unacceptable solutions that have been proposed:</p>
<p>
- Hash lists by their address (object ID).  This doesn't work because if you
construct a new list with the same value it won't be found; e.g.,</p>
<p>
</p>
<pre>  d = {[1,2]: '12'}
  print d[[1,2]]</pre>

will raise a KeyError exception because the id of the [1,2] used in the second
line differs from that in the first line. In other words, dictionary keys
should be compared using '==', not using 'is'.
<p>
- Make a copy when using a list as a key.  This doesn't work because the list
(being a mutable object) could contain a reference to itself, and then the
copying code would run into an infinite loop.</p>
<p>
- Allow lists as keys but tell the user not to modify them.  This would allow
a class of hard-to-track bugs in programs that I'd rather not see; it
invalidates an important invariant of dictionaries (every value in d.keys() is
usable as a key of the dictionary).</p>
<p>
- Mark lists as read-only once they are used as a dictionary key. The problem
is that it's not just the top-level object that could change its value; you
could use a tuple containing a list as a key.  Entering anything as a key into
a dictionary would require marking all objects reachable from there as
read-only -- and again, self-referential objects could cause an infinite loop
again (and again and again).</p>
<p>
There is a trick to get around this if you need to, but use it at your own
risk:  You can wrap a mutable structure inside a class instance which has both
a __cmp__ and a __hash__ method.</p>
<p>
</p>
<pre>   class listwrapper:
        def __init__(self, the_list):
              self.the_list = the_list
        def __cmp__(self, other):
              return self.the_list == other.the_list
        def __hash__(self):
              l = self.the_list
              result = 98767 - len(l)*555
              for i in range(len(l)):
                   try:
                        result = result + (hash(l[i]) % 9999999) * 1001 + i
                   except:
                        result = (result % 7777777) + i * 333
              return result</pre>

Note that the hash computation is complicated by the possibility that some
members of the list may be unhashable and also by the possibility of
arithmetic overflow.
<p>
You must make sure that the hash value for all such wrapper objects that
reside in a dictionary (or other hash based structure), remain fixed while the
object is in the dictionary (or other structure).</p>
<p>
Furthermore it must always be the case that if o1 == o2 (ie o1.__cmp__(o2)==0)
then hash(o1)==hash(o2) (ie, o1.__hash__() == o2.__hash__()), regardless of
whether the object is in a dictionary or not. If you fail to meet these
restrictions dictionaries and other hash based structures may misbehave!</p>
<p>
In the case of listwrapper above whenever the wrapper object is in a
dictionary the wrapped list must not change to avoid anomalies.  Don't do this
unless you are prepared to think hard about the requirements and the
consequences of not meeting them correctly.  You've been warned!</p>
<p>
</p>
<hr>


<h3><a name="6.19">6.19. How the heck do you make an array in Python?</a></h3>

["this", 1, "is", "an", "array"]
<p>
Lists are arrays in the C or Pascal sense of the word (see question 6.16). 
The array module also provides methods for creating arrays of fixed types with
compact representations (but they are slower to index than lists).  Also note
that the Numerics extensions and others define array-like structures with
various characteristics as well.</p>
<p>
To get Lisp-like lists, emulate cons cells</p>
<p>
</p>
<pre>    lisp_list = ("like",  ("this",  ("example", None) ) )</pre>

using tuples (or lists, if you want mutability).  Here the analogue of lisp
car is lisp_list[0] and the analogue of cdr is lisp_list[1]. Only do this if
you're sure you really need to (it's usually a lot slower than using Python
lists).
<p>
Think of Python lists as mutable heterogeneous arrays of Python objects (say
that 10 times fast :) ).</p>
<p>
</p>
<hr>


<h3><a name="6.20">6.20. Why doesn't list.sort() return the sorted
list?</a></h3>

In situations where performance matters, making a copy of the list just to
sort it would be wasteful.  Therefore, list.sort() sorts the list in place. 
In order to remind you of that fact, it does not return the sorted list.  This
way, you won't be fooled into accidentally overwriting a list when you need a
sorted copy but also need to keep the unsorted version around.
<p>
As a result, here's the idiom to iterate over the keys of a dictionary in
sorted orted:</p>
<p>
</p>
<pre>        keys = dict.keys()
        keys.sort()
        for key in keys:
                ...do whatever with dict[key]...</pre>
<p>
</p>
<hr>


<h3><a name="6.21">6.21. How do you specify and enforce an interface spec in
Python?</a></h3>

An interfaces specification for a module as provided by languages such as C++
and java describes the prototypes for the methods and functions of the module.
 Many feel that compile time enforcement of interface specifications help aid
in the construction of large programs.  Python does not support interface
specifications directly, but many of their advantages can be obtained by an
appropriate test discipline for components, which can often be very easily
accomplished in Python.
<p>
A good test suite for a module can at once provide a regression test and serve
as a module interface specification (even better since it also gives example
usage).  Look to many of the standard libraries which often have a "script
interpretation" which provides a simple "self test."  Even modules which use
complex external interfaces can often be tested in isolation using trivial
"stub" emulations of the external interface.</p>
<p>
An appropriate testing discipline (if enforced) can help build large complex
applications in Python as well as having interface specifications would do (or
better).  Of course Python allows you to get sloppy and not do it.  Also you
might want to design your code with an eye to make it easily tested.</p>
<p>
</p>
<hr>


<h3><a name="6.22">6.22. Why do all classes have the same type? Why do
instances all have the same type?</a></h3>

The Pythonic use of the word "type" is quite different from common usage in
much of the rest of the programming language world.  A "type" in Python is a
description for an object's operations as implemented in C.  All classes have
the same operations implemented in C which sometimes "call back" to differing
program fragments implemented in Python, and hence all classes have the same
type.  Similarly at the C level all class instances have the same C
implementation, and hence all instances have the same type.
<p>
Remember that in Python usage "type" refers to a C implementation of an
object.  To distinguish among instances of different classes use
Instance.__class__, and also look to 4.47.  Sorry for the terminological
confusion, but at this point in Python's development nothing can be done!</p>
<p>
</p>
<hr>


<h3><a name="6.23">6.23. Why isn't all memory freed when Python
exits?</a></h3>

Objects referenced from Python module global name spaces are not always
deallocated when Python exits.
<p>
This may happen if there are circular references (see question 4.17).  There
are also certain bits of memory that are allocated by the C library that are
impossible to free (e.g. a tool like Purify will complain about these).</p>
<p>
But in general, Python 1.5 and beyond (in contrast with earlier versions) is
quite agressive about cleaning up memory on exit.</p>
<p>
If you want to force Python to delete certain things on deallocation use the
sys.exitfunc hook to force those deletions.  For example if you are debugging
an extension module using a memory analysis tool and you wish to make Python
deallocate almost everything you might use an exitfunc like this one:</p>
<p>
</p>
<pre>  import sys</pre>
<pre>  def my_exitfunc():
       print "cleaning up"
       import sys
       # do order dependant deletions here
       ...
       # now delete everything else in arbitrary order
       for x in sys.modules.values():
            d = x.__dict__
            for name in d.keys():
                 del d[name]</pre>
<pre>  sys.exitfunc = my_exitfunc</pre>

Other exitfuncs can be less drastic, of course.
<p>
(In fact, this one just does what Python now already does itself; but the
example of using sys.exitfunc to force cleanups is still useful.)</p>
<p>
</p>
<hr>


<h3><a name="6.24">6.24. Why no class methods or mutable class
variables?</a></h3>

The notation
<p>
</p>
<pre>    instance.attribute(arg1, arg2)</pre>

usually translates to the equivalent of
<p>
</p>
<pre>    Class.attribute(instance, arg1, arg2)</pre>

where Class is a (super)class of instance.  Similarly
<p>
</p>
<pre>    instance.attribute = value</pre>

sets an attribute of an instance (overriding any attribute of a class that
instance inherits).
<p>
Sometimes programmers want to have different behaviours -- they want a method
which does not bind to the instance and a class attribute which changes in
place. Python does not preclude these behaviours, but you have to adopt a
convention to implement them.  One way to accomplish this is to use "list
wrappers" and global functions.</p>
<p>
</p>
<pre>   def C_hello():
         print "hello"</pre>
<pre>   class C:
        hello = [C_hello]
        counter = [0]</pre>
<pre>    I = C()</pre>

Here I.hello[0]() acts very much like a "class method" and I.counter[0] = 2
alters C.counter (and doesn't override it). If you don't understand why you'd
ever want to do this, that's because you are pure of mind, and you probably
never will want to do it!  This is dangerous trickery, not recommended when
avoidable.  (Inspired by Tim Peter's discussion.)
<p>
</p>
<hr>


<h3><a name="6.25">6.25. Why are default values sometimes shared between
objects?</a></h3>

It is often expected that a function CALL creates new objects for default
values. This is not what happens. Default values are created when the function
is DEFINED, that is, there is only one such object that all functions refer
to. If that object is changed, subsequent calls to the function will refer to
this changed object. By definition, immutable objects (like numbers, strings,
tuples, None) are safe from change. Changes to mutable objects (like
dictionaries, lists, class instances) is what causes the confusion.
<p>
Because of this feature it is good programming practice not to use mutable
objects as default values, but to introduce them in the function. Don't
write:</p>
<p>
</p>
<pre>        def foo(dict={}):  # XXX shared reference to one dict for all calls
            ...</pre>

but:
<pre>        def foo(dict=None):
                if dict is None:
                        dict = {} # create a new dict for local namespace</pre>

See page 182 of "Internet Programming with Python" for one discussion of this
feature. Or see the top of page 144 or bottom of page 277 in "Programming
Python" for another discussion.
<p>
</p>
<hr>


<h3><a name="6.26">6.26. Why no goto?</a></h3>

Actually, you can use exceptions to provide a "structured goto" that even
works across function calls.  Many feel that exceptions can conveniently
emulate all reasonable uses of the "go" or "goto" constructs of C, Fortran,
and other languages.  For example:
<p>
</p>
<pre>   class label: pass # declare a label
   try:
        ...
        if (condition): raise label() # goto label
        ...
   except label: # where to goto
        pass
   ...</pre>

This doesn't allow you to jump into the middle of a loop, but that's usually
considered an abuse of goto anyway.  Use sparingly.
<p>
</p>
<hr>


<h3><a name="6.27">6.27. How do you make a higher order function in
Python?</a></h3>

You have two choices: you can use default arguments and override them or you
can use "callable objects."  For example suppose you wanted to define
linear(a,b) which returns a function f where f(x) computes the value a*x+b. 
Using default arguments:
<p>
</p>
<pre>     def linear(a,b):
         def result(x, a=a, b=b):
             return a*x + b
         return result</pre>

Or using callable objects:
<p>
</p>
<pre>     class linear:
        def __init__(self, a, b):
            self.a, self.b = a,b
        def __call__(self, x):
            return self.a * x + self.b</pre>

In both cases:
<p>
</p>
<pre>     taxes = linear(0.3,2)</pre>

gives a callable object where taxes(10e6) == 0.3 * 10e6 + 2.
<p>
The defaults strategy has the disadvantage that the default arguments could be
accidentally or maliciously overridden.  The callable objects approach has the
disadvantage that it is a bit slower and a bit longer.  Note however that a
collection of callables can share their signature via inheritance.  EG</p>
<p>
</p>
<pre>      class exponential(linear):
         # __init__ inherited
         def __call__(self, x):
             return self.a * (x ** self.b)</pre>

On comp.lang.python, <a
href="mailto:zenin@bawdycaste.org">zenin@bawdycaste.org</a> points out that an
object can encapsulate state for several methods in order to emulate the
"closure" concept from functional programming languages, for example:
<p>
</p>
<pre>    class counter:
        value = 0
        def set(self, x): self.value = x
        def up(self): self.value=self.value+1
        def down(self): self.value=self.value-1</pre>
<pre>    count = counter()
    inc, dec, reset = count.up, count.down, count.set</pre>

Here inc, dec and reset act like "functions which share the same closure
containing the variable count.value" (if you like that way of thinking).
<p>
</p>
<hr>


<h3><a name="6.28">6.28. Why do I get a SyntaxError for a 'continue' inside a
'try'?</a></h3>

This is an implementation limitation, caused by the extremely simple-minded
way Python generates bytecode.  The try block pushes something on the "block
stack" which the continue would have to pop off again.  The current code
generator doesn't have the data structures around so that 'continue' can
generate the right code.
<p>
Note that JPython doesn't have this restriction!</p>
<p>
</p>
<hr>


<h3><a name="6.29">6.29. Why can't raw strings (r-strings) end with a
backslash?</a></h3>

More precisely, they can't end with an odd number of backslashes: the unpaired
backslash at the end escapes the closing quote character, leaving an
unterminated string.
<p>
Raw strings were designed to ease creating input for processors (chiefly
regular expression engines) that want to do their own backslash escape
processing. Such processors consider an unmatched trailing backslash to be an
error anyway, so raw strings disallow that.  In return, they allow you to pass
on the string quote character by escaping it with a backslash.  These rules
work well when r-strings are used for their intended purpose.</p>
<p>
If you're trying to build Windows pathnames, note that all Windows system
calls accept forward slashes too:</p>
<p>
</p>
<pre>    f = open("/mydir/file.txt") # works fine!</pre>

If you're trying to build a pathname for a DOS command, try e.g. one of
<p>
</p>
<pre>    dir = r"\this\is\my\dos\dir" "\\"
    dir = r"\this\is\my\dos\dir\ "[:-1]
    dir = "\\this\\is\\my\\dos\\dir\\"</pre>
<p>
</p>
<hr>


<h3>7. Using Python on non-UNIX platforms</h3>
<hr>


<h3><a name="7.1">7.1. Is there a Mac version of Python?</a></h3>

Yes, see the "mac" subdirectory of the distribution sites, e.g. <a
href="ftp://ftp.python.org/pub/python/mac">ftp://ftp.python.org/pub/python/mac</a>/.
<p>
</p>
<hr>


<h3><a name="7.2">7.2. Are there DOS and Windows versions of Python?</a></h3>

Yes.  The core windows binaries are available from <a
href="http://www.python.org/windows">http://www.python.org/windows</a>/. There
is a plethora of Windows extensions available, including a large number of
not-always-compatible GUI toolkits.  The core binaries include the standard
Tkinter GUI extension.
<p>
Most windows extensions can be found (or referenced) at <a
href="http://www.python.org/windows">http://www.python.org/windows</a>/</p>
<p>
Windows 3.1/DOS support seems to have dropped off recently.  You may need to
settle for an old version of Python one these platforms.  One such port is
WPY</p>
<p>
WPY: Ports to DOS, Windows 3.1(1), Windows 95, Windows NT and OS/2. Also
contains a GUI package that offers portability between Windows (not DOS) and
Unix, and native look and feel on both. <a
href="ftp://ftp.python.org/pub/python/wpy">ftp://ftp.python.org/pub/python/wpy</a>/.</p>
<p>
</p>
<hr>


<h3><a name="7.3">7.3. Is there an OS/2 version of Python?</a></h3>

Yes, see the "pc" and "wpy" subdirectory of the distribution sites (see
above).
<p>
</p>
<hr>


<h3><a name="7.4">7.4. Is there a VMS version of Python?</a></h3>

Yes, there is a port of Python 1.4 to OpenVMS and a few ports of 1.2 to VMS.
See <a
href="ftp://ftp.python.org/pub/python/contrib/Porting/vms">ftp://ftp.python.org/pub/python/contrib/Porting/vms</a>/.
<p>
Uwe Zessin has ported Python 1.5.x to OpenVMS. See <a
href="http://decus.decus.de/~zessin">http://decus.decus.de/~zessin</a>/.</p>
<p>
</p>
<hr>


<h3><a name="7.5">7.5. What about IBM mainframes, or other non-UNIX
platforms?</a></h3>

I haven't heard about these, except I remember hearing about an OS/9 port and
a port to Vxworks (both operating systems for embedded systems).  If you're
interested in any of this, go directly to the newsgroup and ask there, you may
find exactly what you need.  For example, a port to MPE/iX 5.0 on HP3000
computers was just announced, see <a
href="http://www.allegro.com/software">http://www.allegro.com/software</a>/.
<p>
</p>
<hr>


<h3><a name="7.6">7.6. Where are the source or Makefiles for the non-UNIX
versions?</a></h3>

The standard sources can (almost) be used.  Additional sources can be found in
the platform-specific subdirectories of the distribution.
<p>
</p>
<hr>


<h3><a name="7.7">7.7. What is the status and support for the non-UNIX
versions?</a></h3>

I don't have access to most of these platforms, so in general I am dependent
on material submitted by volunteers.  However I strive to integrate all
changes needed to get it to compile on a particular platform back into the
standard sources, so porting of the next version to the various non-UNIX
platforms should be easy.
<p>
</p>
<hr>


<h3><a name="7.8">7.8. I have a PC version but it appears to be only a binary.
Where's the library?</a></h3>

If you are running any version of Windows, then you have the wrong
distribution.  The FAQ lists current Windows versions.  Notably, Pythonwin and
wpy provide fully functional installations.
<p>
But if you are sure you have the only distribution with a hope of working on
your system, then...</p>
<p>
You still need to copy the files from the distribution directory "python/Lib"
to your system.  If you don't have the full distribution, you can get the file
lib&lt;version>.tar.gz from most ftp sites carrying Python; this is a subset
of the distribution containing just those files, e.g.  <a
href="ftp://ftp.python.org/pub/python/src/lib1.4.tar.gz">ftp://ftp.python.org/pub/python/src/lib1.4.tar.gz</a>.</p>
<p>
Once you have installed the library, you need to point sys.path to it.
Assuming the library is in C:\misc\python\lib, the following commands will
point your Python interpreter to it (note the doubled backslashes -- you can
also use single forward slashes instead):</p>
<p>
</p>
<pre>        >>> import sys
        >>> sys.path.insert(0, 'C:\\misc\\python\\lib')
        >>></pre>

For a more permanent effect, set the environment variable PYTHONPATH, as
follows (talking to a DOS prompt):
<p>
</p>
<pre>        C> SET PYTHONPATH=C:\misc\python\lib</pre>
<p>
</p>
<hr>


<h3><a name="7.9">7.9. Where's the documentation for the Mac or PC
version?</a></h3>

The documentation for the Unix version also applies to the Mac and PC
versions.  Where applicable, differences are indicated in the text.
<p>
</p>
<hr>


<h3><a name="7.10">7.10. How do I create a Python program file on the Mac or
PC?</a></h3>

Use an external editor.  On the Mac, BBEdit seems to be a popular no-frills
text editor.  I work like this: start the interpreter; edit a module file
using BBedit; import and test it in the interpreter; edit again in BBedit;
then use the built-in function reload() to re-read the imported module; etc.
In the 1.4 distribution you will find a BBEdit extension that makes life a
little easier: it can tell the interpreter to execute the current window. See
:Mac:Tools:BBPy:README.
<p>
Regarding the same question for the PC, Kurt Wm. Hemr writes: "While anyone
with a pulse could certainly figure out how to do the same on MS-Windows, I
would recommend the NotGNU Emacs clone for MS-Windows. Not only can you easily
resave and "reload()" from Python after making changes, but since WinNot
auto-copies to the clipboard any text you select, you can simply select the
entire procedure (function) which you changed in WinNot, switch to QWPython,
and shift-ins to reenter the changed program unit."</p>
<p>
If you're using Windows95 or Windows NT, you should also know about PythonWin,
which provides a GUI framework, with an mouse-driven editor, an object
browser, and a GUI-based debugger.  See</p>
<pre>       <a href="http://www.python.org/ftp/python/pythonwin">http://www.python.org/ftp/python/pythonwin</a>/</pre>

for details.
<p>
</p>
<hr>


<h3><a name="7.11">7.11. How can I use Tkinter on Windows 95/NT?</a></h3>

Starting from Python 1.5, it's very easy -- just download and install Python
and Tcl/Tk and you're in business.  See
<p>
</p>
<pre>  <a href="http://www.python.org/download/download_windows.html">http://www.python.org/download/download_windows.html</a></pre>

One warning: don't attempt to use Tkinter from PythonWin (Mark Hammond's IDE).
 Use it from the command line interface (python.exe) or the windowless
interpreter (pythonw.exe).
<p>
</p>
<hr>


<h3><a name="7.12">7.12. cgi.py (or other CGI programming) doesn't work
sometimes on NT or win95!</a></h3>

Be sure you have the latest python.exe, that you are using python.exe rather
than a GUI version of python and that you have configured the server to
execute
<p>
</p>
<pre>     "...\python.exe -u ..."</pre>

for the cgi execution.  The -u (unbuffered) option on NT and win95 prevents
the interpreter from altering newlines in the standard input and output. 
Without it post/multipart requests will seem to have the wrong length and
binary (eg, GIF) responses may get garbled (resulting in, eg, a "broken
image").
<p>
</p>
<hr>


<h3><a name="7.13">7.13. Why doesn't os.popen() work in PythonWin on
NT?</a></h3>

The reason that os.popen() doesn't work from within PythonWin is due to a bug
in Microsoft's C Runtime Library (CRT). The CRT assumes you  have a Win32
console attached to the process.
<p>
You should use the win32pipe module's popen() instead which doesn't depend on
having an attached Win32 console.</p>
<p>
Example:</p>
<pre> import win32pipe
 f = win32pipe.popen('dir /c c:\\')
 print f.readlines()
 f.close()</pre>
<p>
</p>
<hr>


<h3><a name="7.14">7.14. How do I use different functionality on different
platforms with the same program?</a></h3>

Remember that Python is extremely dynamic and that you can use this dynamism
to configure a program at run-time to use available functionality on different
platforms.  For example you can test the sys.platform and import different
modules based on its value.
<p>
</p>
<pre>   import sys
   if sys.platform == "win32":
      import win32pipe
      popen = win32pipe.popen
   else:
      import os
      popen = os.popen</pre>

(See FAQ 7.13 for an explanation of why you might want to do something like
this.)  Also you can try to import a module and use a fallback if the import
fails:
<p>
</p>
<pre>    try:
         import really_fast_implementation
         choice = really_fast_implementation
    except ImportError:
         import slower_implementation
         choice = slower_implementation</pre>
<p>
</p>
<hr>


<h3><a name="7.15">7.15. Is there an Amiga version of Python?</a></h3>

Yes. See the AmigaPython homepage at <a
href="http://www.bigfoot.com/~irmen/python.html">http://www.bigfoot.com/~irmen/python.html</a>.
<p>
</p>
<hr>


<h3>8. Python on Windows</h3>
<hr>


<h3><a name="8.1">8.1. Using Python for CGI on Microsoft Windows</a></h3>

Setting up the Microsoft IIS Server/Peer Server:
<p>
On the Microsoft IIS server or on the Win95 MS Personal Web Server you set up
python in the same way that you would set up any other scripting engine.</p>
<p>
Run regedt32 and go to:</p>
<p>
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\W3SVC\Parameters\ScriptMap</p>
<p>
and enter the following line (making any specific changes that your system may
need)</p>
<p>
.py :REG_SZ: c:\&lt;path to python>\python.exe -u %s %s</p>
<p>
This line will allow you to call your script with a simple reference like:
http://yourserver/scripts/yourscript.py provided "scripts" is an "executable"
directory for your server (which it usually is by default). The "-u" flag
specifies unbuffered and binary mode for stdin - needed when working with
binary data</p>
<p>
In addition, it is recommended by people who would know that using ".py" may
not be a good idea for the file extensions when used in this context (you
might want to reserve *.py for support modules and use *.cgi or *.cgp for
"main program" scripts). However, that issue is beyond this Windows FAQ
entry.</p>
<p>
Netscape Servers: Information on this topic exists at: <a
href="http://home.netscape.com/comprod/server_central/support/fasttrack_man/programs.htm#1010870">http://home.netscape.com/comprod/server_central/support/fasttrack_man/programs.htm#1010870</a></p>
<p>
</p>
<hr>


<h3><a name="8.2">8.2. How to check for a keypress without blocking?</a></h3>

Use the msvcrt module.  This is a standard Windows-specific extensions in
Python 1.5 and beyond.  It defines a function kbhit() which checks whether a
keyboard hit is present; also getch() which gets one character without echo. 
Plus a few other goodies.
<p>
(Search for "keypress" to find an answer for Unix as well.)</p>
<p>
</p>
<hr>


<h3><a name="8.3">8.3. $PYTHONPATH</a></h3>

In MS-DOS derived environments, a unix variable such as $PYTHONPATH is set as
PYTHONPATH, without the dollar sign.  PYTHONPATH is useful for specifying the
location of library files.
<p>
</p>
<hr>


<h3><a name="8.4">8.4. dedent syntax errors</a></h3>

Tim &lt;<a href="mailto:tim_one@email.msn.com">tim_one@email.msn.com</a>> sez:
 the original content of this FAQ (below) makes little sense.  The FAQ does
not recommend using tabs, and Guido's Python Style Guide recommends 4 spaces
for distributed Python code; this is also the Emacs python-mode default; see
<pre>    <a href="http://www.python.org/doc/essays/styleguide.html">http://www.python.org/doc/essays/styleguide.html</a></pre>

Under any editor mixing tabs and spaces is a bad idea.  MSVC is no different
in this respect, and is easily configured to use spaces:  Take Tools ->
Options -> Tabs, and for file type "Default" set "Tab size" and "Indent size"
to 4, and select the "Insert spaces" radio button.
<p>
If you suspect mixed tabs and spaces are causing problems in leading
whitespace, run Python with the -t switch or, run Tools/Scripts/tabnanny.py to
check a directory tree in batch mode.</p>
<p>
[original follows]</p>
<p>
The FAQ really means it when it suggests using tabs, not spaces, for
indentation control.  This may be a bigger problem in windows than in unix. 
For instance, the Microsoft Visual C++ programmers editor, in its default
configuration, does not indicate whether the white space is spaces or tabs. 
If it is spaces, you are likely to get syntax errors not obviously related to
the indentation.</p>
<p>
</p>
<hr>


<h3><a name="8.5">8.5. How do I emulate os.kill() in Windows?</a></h3>

Use win32api:
<p>
</p>
<pre>    def kill(pid):
        """kill function for Win32"""
        import win32api
        handle = win32api.OpenProcess(1, 0, pid)
        return (0 != win32api.TerminateProcess(handle, 0))</pre>
<p>
</p>
<hr>


<h3><a name="8.6">8.6. Why does os.path.isdir() fail on NT shared
directories?</a></h3>

The solution appears to be always append the "\\" on the end of shared drives.
<p>
</p>
<pre>  >>> import os
  >>> os.path.isdir( '\\\\rorschach\\public')
  0
  >>> os.path.isdir( '\\\\rorschach\\public\\')
  1</pre>

[Blake Winton responds:] I've had the same problem doing "Start >> Run" and
then a directory on a shared drive.  If I use "\\rorschach\public", it will
fail, but if I use "\\rorschach\public\", it will work.  For that matter,
os.stat() does the same thing (well, it gives an error for
"\\\\rorschach\\public", but you get the idea)...
<p>
I've got a theory about why this happens, but it's only a theory.  NT knows
the difference between shared directories, and regular directories. 
"\\rorschach\public" isn't a directory, it's _really_ an IPC abstraction. 
This is sort of lended credence to by the fact that when you're mapping a
network drive, you can't map "\\rorschach\public\utils", but only
"\\rorschach\public".</p>
<p>
[Clarification by <a
href="mailto:funkster@midwinter.com">funkster@midwinter.com</a>] It's not
actually a Python question, as Python is working just fine; it's clearing up
something a bit muddled about Windows networked drives.</p>
<p>
It helps to think of share points as being like drive letters. Example:</p>
<pre>        k: is not a directory
        k:\ is a directory
        k:\media is a directory
        k:\media\ is not a directory</pre>

The same rules apply if you substitute "k:" with "\\conky\foo":
<pre>        \\conky\foo  is not a directory
        \\conky\foo\ is a directory
        \\conky\foo\media is a directory
        \\conky\foo\media\ is not a directory</pre>
<p>
</p>
<hr>


<h3><a name="8.7">8.7. PyRun_SimpleFile() crashes on Windows but not on
Unix</a></h3>

I've seen a number of reports of PyRun_SimpleFile() failing in a Windows port
of an application embedding Python that worked fine on Unix. 
PyRun_SimpleString() works fine on both platforms.
<p>
I think this happens because the application was compiled with a different set
of compiler flags than Python15.DLL.  It seems that some compiler flags affect
the standard I/O library in such a way that using different flags makes calls
fail.  You need to set it for multi-threaded DLL.</p>
<p>
</p>
<hr>


<h3><a name="8.8">8.8. Import of _tkinter fails on Windows 95/98</a></h3>

Sometimes, the import of _tkinter fails on Windows 95 or 98, complaining with
a message like the following:
<p>
</p>
<pre>  ImportError: DLL load failed: One of the library files needed
  to run this application cannot be found.</pre>

It could be that you haven't installed Tcl/Tk, but if you did install Tcl/Tk,
and the Wish application works correctly, the problem may be that its
installer didn't manage to edit the autoexec.bat file correctly.  It tries to
add a statement that changes the PATH environment variable to include the
Tcl/Tk 'bin' subdirectory, but sometimes this edit doesn't quite work. 
Opening it with notepad usually reveals what the problem is.
<p>
(One additional hint, noted by David Szafranski: you can't use long filenames
here; e.g. use C:\PROGRA~1\Tcl\bin instead of C:\Program Files\Tcl\bin.)</p>
<p>
</p>
<hr>


<h3><a name="8.9">8.9. Can't extract the downloaded documentation on
Windows</a></h3>

Sometimes, when you download the documentation package to a Windows machine
using a web browser, the file extension of the saved file ends up being .EXE. 
This is a mistake; the extension should be .TGZ.
<p>
Simply rename the downloaded file to have the .TGZ extension, and WinZip will
be able to handle it.  (If your copy of WinZip doesn't, get a newer one from
<a href="http://www.winzip.com">http://www.winzip.com</a>.)</p>
<p>
</p>
<hr>


<h3><a name="8.10">8.10. Can't get Py_RunSimpleFile() to work.</a></h3>

This is very sensitive to the compiler vendor, version and (perhaps) even
options.  If the FILE* structure in your embedding program isn't the same as
is assumed by the Python interpreter it won't work.
<p>
The Python 1.5.* DLLs (python15.dll) are all compiled with MS VC++ 5.0 and
with multithreading-DLL options (/MD, I think).</p>
<p>
If you can't change compilers or flags, try using Py_RunSimpleString(). A
trick to get it to run an arbitrary file is to construct a call to execfile()
with the name of your file as argument.</p>
<p>
</p>
<hr>


<h3><a name="8.11">8.11. Where is Freeze for Windows?</a></h3>

("Freeze" is a program that allows you to ship a Python program as a single
stand-alone executable file.  It is <i>not</i> a compiler, your programs don't
run any faster, but they are more easily distributable (to platforms with the
same OS and CPU).  Read the README file of the freeze program for more
disclaimers.)
<p>
You can use freeze on Windows, but you must download the source tree (see <a
href="http://www.python.org/download/download_source.html">http://www.python.org/download/download_source.html</a>).
This is recommended for Python 1.5.2 (and betas thereof) only; older versions
don't quite work.</p>
<p>
You need the Microsoft VC++ 5.0 compiler (maybe it works with 6.0 too).  You
probably need to build Python -- the project files are all in the PCbuild
directory.</p>
<p>
The freeze program is in the Tools\freeze subdirectory of the source tree.</p>
<p>
<!--User part of page ends here-->
</p>
</body>
</html>
